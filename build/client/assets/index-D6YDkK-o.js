import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as s,c as j}from"./components-CCwaTRgT.js";import{u as y}from"./NotificationContext-BVMvs2cM.js";import{u as N,O as S}from"./OperationContext-BhT9SWU1.js";import{P as A,x as P,m as E,I as B,J as O,O as I}from"./lib-d5lyMBXU.js";import{A as L}from"./AccountLayout-zLF_nnCh.js";import{C as _}from"./ContentLayout-DHcYfdZu.js";import{u as k}from"./AuthContext-C7k3lHjW.js";import"./UserMenu-BJva0xcL.js";import"./WhiteLogo-hx6VZQD6.js";import"./index-oI16Z90E.js";import"./HomeNav-CVNWGNT6.js";import"./SrchNavbar-BmbhUp-t.js";import"./HamburgerSecondary-BkHc2D4C.js";import"./BusinessMenu-lxtqnmPk.js";const C=({userGuid:c,businessGuid:l})=>{const[t,f]=s.useState(null),[a,p]=s.useState(!0);y();const[u,x]=s.useState(!1),{showOperation:d,showSuccess:m,showError:i,showWarning:v,showInfo:g,completeOperation:h}=N();s.useEffect(()=>{try{A(c,l).then(o=>{f(o[0].active_status),p(!1)})}catch{alert("Could not fetch business")}},[]);const n=async()=>{x(!0),d("processing",""),await new Promise(r=>setTimeout(r,1e3));const o=!t;try{const r=`/api/listing/activate/${c}/${l}`,b=P.BASE_URL+r,$=await fetch(b,{method:"PUT",headers:E,body:JSON.stringify({user_guid:c,business_guid:l,active:o})});m("success","Operation completed successfully"),h(),await new Promise(w=>setTimeout(w,1e3))}catch(r){i("error",`Error processing: ${r.message}`)}finally{f(o)}};return a?e.jsx("div",{children:"Loading..."}):e.jsx("div",{children:e.jsxs("div",{className:`p-6  rounded  max-w-2xl
        mx-auto mt-12`,children:[e.jsx("div",{className:"mb-6 text-[13.5px] border-b pb-3",children:"If you deactivate your data all your data will still be intact, however, it will no longer be visible across all Garssete.com platforms."}),e.jsxs("h2",{className:"text-lg mb-1 font-semibold",children:[t?"Deactivate":"Activate","Â Business or Organization"]}),e.jsx("div",{className:"mb-5",children:t?"Your data is active. It will be visible across all Garssete.com platforms.":"Your data is deactivated, it will no longer be visible. However, all your data will still be intact."}),e.jsx("div",{className:"border-[3px] border-gray-100 p-5 rounded-lg shadow",children:e.jsxs("label",{className:`flex items-center space-x-4 hover:cursor-pointer
                        `,children:[e.jsx("input",{type:"checkbox",checked:t??!1,onChange:n,className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:t?"Active":"Inactive"}),e.jsxs("div",{className:"font-normal text-sm",children:["Click to ",t?"deactivate":"activate"," this business profile."]})]})]})})]})})},X=()=>{s.useEffect(()=>{B(localStorage)},[]);const[c,l]=s.useState(!0),[t,f]=s.useState(null),[a,p]=s.useState(""),[u,x]=s.useState(""),{business_guid:d,user_guid:m}=j(),[i,v]=s.useState(null);return k()?(s.useEffect(()=>{const h=async(n,o)=>{p(n),x(o);const r=await I(n||"");v(r)};try{d&&m&&h(d,m)}catch(n){O(n)}},[d,m]),s.useEffect(()=>{a&&u&&i&&(f({businessGuid:a,userGuid:u,businessProfile:i}),l(!1))},[a,u,i]),c?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx(L,{children:e.jsx(_,{title:`${i.active_status?"Deactivate":"Activate"} Business Profile`,businessGuid:a,data:t,businessProfile:i,children:e.jsx(S,{children:t&&e.jsx(C,{userGuid:u,businessGuid:a})})})})):null};export{X as default};
