import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as s,c as j}from"./components-BgCvqN9p.js";import{u as y}from"./NotificationContext-BOeqtiJ2.js";import{u as N,O as S}from"./OperationContext-C5fIEC6d.js";import{U as A,L as E,q as P,N as B,l as L,S as O}from"./lib-CiZsJ3ya.js";import{A as _}from"./AccountLayout-CU6Oc5YK.js";import{C as I}from"./ContentLayout-CDun7rPp.js";import{u as k}from"./AuthContext-Ch7_A212.js";import"./UserMenu-DOvFpcHO.js";import"./index-DdGNG7cx.js";import"./HomeNav-9BHYhjAv.js";import"./SrchNavbar-Fu84TMvJ.js";import"./HamburgerSecondary-BOvoNT0S.js";import"./json-BTJ4b87v.js";import"./BusinessMenu-BC7EWQxj.js";import"./BusinessDrawer-BHmWqhtS.js";const C=({userGuid:n,businessGuid:c})=>{const[a,m]=s.useState(null),[i,h]=s.useState(!0);y();const[l,p]=s.useState(!1),{showOperation:u,showSuccess:d,showError:o,showWarning:b,showInfo:v,completeOperation:x}=N();s.useEffect(()=>{try{A(n,c).then(t=>{m(t[0].active_status),h(!1)})}catch{console.log("Could not fetch business")}},[]);const f=async()=>{p(!0),u("processing",""),await new Promise(r=>setTimeout(r,1e3));const t=!a;try{const r=`/api/listing/activate/${n}/${c}`,g=E.BASE_URL+r,U=await fetch(g,{method:"PUT",headers:P,body:JSON.stringify({user_guid:n,business_guid:c,active:t})});d("success","Operation completed successfully"),x(),await new Promise(w=>setTimeout(w,1e3))}catch(r){o("error",`Error processing: ${r.message}`)}finally{m(t)}};return i?e.jsx("div",{children:"Loading..."}):e.jsx("div",{children:e.jsxs("div",{className:`p-6  rounded  max-w-2xl
        mx-auto mt-12`,children:[e.jsx("div",{className:"mb-6 text-[13.5px] border-b pb-3",children:"If you deactivate your data all your data will still be intact, however, it will no longer be visible across all Garssete.com platforms."}),e.jsxs("h2",{className:"text-lg mb-1 font-semibold",children:[a?"Deactivate":"Activate","Â Business or Organization"]}),e.jsx("div",{className:"mb-5",children:a?"Your data is active. It will be visible across all Garssete.com platforms.":"Your data is deactivated, it will no longer be visible. However, all your data will still be intact."}),e.jsx("div",{className:"border-[3px] border-gray-100 p-5 rounded-lg shadow",children:e.jsxs("label",{className:`flex items-center space-x-4 hover:cursor-pointer
                        `,children:[e.jsx("input",{type:"checkbox",checked:a??!1,onChange:f,className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:a?"Active":"Inactive"}),e.jsxs("div",{className:"font-normal text-sm",children:["Click to ",a?"deactivate":"activate"," this business profile."]})]})]})})]})})},Z=()=>{s.useEffect(()=>{B(localStorage)},[]);const[n,c]=s.useState(!0),[a,m]=s.useState(null),[i,h]=s.useState(""),[l,p]=s.useState(""),{business_guid:u,user_guid:d}=j(),[o,b]=s.useState(null),v=k();if(!v)return null;const{user:x}=v;return s.useEffect(()=>{const f=async(t,r)=>{h(t),p(r);const g=await O(t||"");b(g)};try{u&&d&&f(u,d)}catch(t){L(t)}},[u,d]),s.useEffect(()=>{},[x]),s.useEffect(()=>{i&&l&&o&&(m({businessGuid:i,userGuid:l,businessProfile:o}),c(!1))},[i,l,o]),n?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx(_,{children:e.jsx(I,{title:`${o.active_status?"Deactivate":"Activate"} Business Profile`,businessGuid:i,data:a,businessProfile:o,children:e.jsx(S,{children:a&&e.jsx(C,{userGuid:l,businessGuid:i})})})})};export{Z as default};
