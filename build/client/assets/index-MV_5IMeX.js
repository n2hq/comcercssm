import{j as s,L as p,r as o,A as f,B as w}from"./components-UScJPEQZ.js";import{R as y}from"./ResponsiveNav-D0WQGs1A.js";import{k,l as _}from"./AuthContext-CGggca3n.js";import{e as C,n as L}from"./MobileNav-aPg5T7ro.js";import{G as b}from"./index-DOwvlINV.js";import{L as S,S as g,F as $}from"./LatestStarRating-C7RA25d2.js";import"./UserMenu-Btoey3DL.js";import"./SearchBox-zAwg0FZa.js";const B=({feature:e})=>s.jsxs("div",{id:e.gid,className:"pb-4 pt-3",children:[s.jsx(p,{to:`/${e.gid}`,children:s.jsx("div",{className:`text-[15px] tracking-normal 
                text-blue-700 font-normal`,children:e.title})}),s.jsx("div",{className:`text-md font-semibold 
                tracking-tight mt-[2px]`,children:e.phone}),s.jsx("div",{className:`font-normal text-[13px] 
                tracking-normal mt-[2px] leading-[1.3em]
                text-black`,children:e.short_description.substring(0,80)}),s.jsx("div",{className:`text-[12px] font-normal 
                tracking-tight mt-[5px] leading-[1.4em]
                text-brown-700`,children:e.address_one}),s.jsx("div",{className:`text-[13px] font-normal 
                tracking-tight mt-[8px] text-blue-800`,children:s.jsx(p,{to:e.website?e.website:`#${e.gid}`,children:"Website"})})]}),E=()=>{const[e,c]=o.useState([]);return o.useEffect(()=>{(async()=>{const a=await k();console.log(a),c(a)})()},[]),s.jsxs("div",{className:`border-[1px] px-4 pt-4 pb-4
        rounded border-gray-200`,children:[s.jsx("div",{className:"font-bold text-lg",children:"Featured"}),s.jsx("div",{className:"divide-y divide-gray-200",children:(e==null?void 0:e.length)>0?e==null?void 0:e.map((t,a)=>s.jsx(B,{feature:t},a)):s.jsx("div",{className:"text-[15px] mt-4",children:"Loading..."})})]})},F=({children:e})=>s.jsx("div",{className:"w-full h-auto px-[15px] mt-5",children:s.jsxs("div",{className:`max-w-[1100px] mx-auto w-full
                    grid grid-cols-12 gap-8`,children:[s.jsx("div",{className:"col-span-12 lg:col-span-8 ",children:e}),s.jsx("div",{className:"col-span-12 lg:col-span-4 lg:block ",children:s.jsx("div",{className:"sticky top-[80px]",children:s.jsx(E,{})})})]})});function R(e){return b({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function I(e){return b({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4.58341 17.3211C3.55316 16.2274 3 15 3 13.0103C3 9.51086 5.45651 6.37366 9.03059 4.82318L9.92328 6.20079C6.58804 8.00539 5.93618 10.346 5.67564 11.822C6.21263 11.5443 6.91558 11.4466 7.60471 11.5105C9.40908 11.6778 10.8312 13.159 10.8312 15C10.8312 16.933 9.26416 18.5 7.33116 18.5C6.2581 18.5 5.23196 18.0095 4.58341 17.3211ZM14.5834 17.3211C13.5532 16.2274 13 15 13 13.0103C13 9.51086 15.4565 6.37366 19.0306 4.82318L19.9233 6.20079C16.588 8.00539 15.9362 10.346 15.6756 11.822C16.2126 11.5443 16.9156 11.4466 17.6047 11.5105C19.4091 11.6778 20.8312 13.159 20.8312 15C20.8312 16.933 19.2642 18.5 17.3312 18.5C16.2581 18.5 15.232 18.0095 14.5834 17.3211Z"},child:[]}]})(e)}const P=({listing:e})=>{var t,a;return s.jsxs("div",{className:" cursor-pointer mt-4",onClick:d=>{window.location.href=`/${e.gid}`},children:[s.jsxs("div",{className:"flex rounded-sm gap-4",children:[s.jsx("div",{className:"relative min-w-[100px] w-[100px] h-[100px]",children:s.jsx("img",{src:"https://oxbyt.com"+e.image_url,alt:e.title,className:`object-cover w-full h-full text-sm
                            rounded `})}),s.jsx("div",{className:" w-full",children:s.jsxs("div",{className:`md:flex md:place-content-between 
                w-full md:gap-x-[4px]`,children:[s.jsxs("div",{className:"w-full md:w-[60%]",children:[s.jsx(p,{to:`/${e.gid}`,onClick:d=>d.stopPropagation(),children:s.jsx("div",{className:`font-bold text-[17px] text-brown-800
                    leading-[1.1em] hover:underline text-blue-900`,children:e.title})}),s.jsx("div",{className:`font-normal text-[13px] leading-[1.2em] mt-[2px]
                    `,children:e!=null&&e.business_phrases?`${(t=e==null?void 0:e.business_phrases)==null?void 0:t.substring(0,150)}...`:""}),s.jsxs("div",{className:`font-normal text-[13px] 
                                    flex place-items-center gap-1 mt-[3px]`,children:[s.jsx(p,{className:"hover:underline text-blue-700",to:e.website!==null?e.website:"#top",onClick:d=>d.stopPropagation(),children:"Website"}),s.jsx("span",{children:s.jsx(R,{})}),s.jsx("div",{className:"capitalize flex place-items-center gap-1",children:e.category})]}),(e==null?void 0:e.established)&&s.jsxs("div",{className:"flex gap-2 mt-[5px] place-items-center",children:[s.jsx("div",{children:s.jsx(C,{})}),s.jsxs("div",{className:"flex flex-col gap-y-0 leading-3",children:[s.jsxs("div",{className:"text-[12px] font-bold",children:["Since ",e==null?void 0:e.established]}),s.jsx("div",{className:"text-[12px]",children:"In Business"})]})]})]}),s.jsxs("div",{className:`w-full lg:w-[40%] hidden 
                                sm:block`,children:[s.jsx("div",{className:`flex flex-col 
                    place-items-end place-content-end
                        font-semibold text-[15px] tracking-tighter`,children:e.phone}),s.jsxs("div",{className:`flex flex-col text-end text-[12px]
                                leading-[1.2em]`,children:[e==null?void 0:e.address_one,e!=null&&e.address_two?`, ${e==null?void 0:e.address_two}`:"",e!=null&&e.city_name?`, ${e==null?void 0:e.city_name}`:"",e!=null&&e.state_name?`, ${e==null?void 0:e.state_name}`:"",e!=null&&e.country_name?`, ${e==null?void 0:e.country_name}`:""]})]})]})})]}),s.jsxs("div",{className:`mt-2 md:mt-3 mb-2 text-[13px] leading-[1.2em]
                    flex place-content-start`,children:[s.jsx("div",{className:"relative top-[-3px]",children:s.jsx(I,{className:"tracking-tighter text-[20px]"})}),s.jsx("div",{children:e!=null&&e.short_description?`${(a=e==null?void 0:e.short_description)==null?void 0:a.substring(0,150)}...`:""})]})]})},A=({data:e,itemsPerPage:c=10})=>{const[t,a]=o.useState(1),d=Math.ceil(e.length/c),x=t*c,m=x-c,i=e.slice(m,x),l=n=>a(n),u=()=>{t>1&&a(t-1)},j=()=>{t<d&&a(t+1)};return s.jsxs("div",{children:[s.jsx("div",{className:" divide-y",children:i.map((n,r)=>s.jsx("div",{children:s.jsx(P,{listing:n})},r))}),d>1&&s.jsxs("div",{className:`flex justify-center gap-[5px] 
                mt-[60px]`,children:[s.jsx("button",{onClick:u,disabled:t===1,className:`px-[12px] py-[8px] bg-white cursor-pointer border
                                rounded-[4px]`,children:"Previous"}),Array.from({length:d},(n,r)=>r+1).map(n=>s.jsx("button",{onClick:()=>l(n),className:`px-[12px] py-[8px]  cursor-pointer border
                                rounded-[4px] ${t===n?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:n},n)),s.jsx("button",{onClick:j,disabled:t===d,className:`px-[12px] py-[8px] bg-white cursor-pointer border
                                rounded-[4px]`,children:"Next"})]})]})},v=({title:e,subtitle:c,category:t,limit:a})=>{const[d,x]=o.useState(""),[m,i]=o.useState(""),[l,u]=o.useState([]),j="https://oxbyt.com";o.useEffect(()=>{e&&c&&(x(e),i(c))},[e,c]);let n=async(r,h)=>{if(h&&r){let N=await _(r,h);u(N)}};return o.useEffect(()=>{a&&t&&n(t,a)},[a,t]),s.jsxs("div",{className:"mt-10 border-t pt-5",children:[s.jsxs("div",{className:" mb-[20px] ",children:[s.jsx("div",{className:"font-semibold text-xl",children:d}),s.jsx("div",{className:"text-sm -mt-[2px]",children:m})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-3 gap-y-4",children:(l==null?void 0:l.length)>0&&(l==null?void 0:l.map((r,h)=>s.jsxs("div",{children:[s.jsx("div",{children:s.jsx(p,{to:`/${r.gid}`,children:s.jsx("div",{className:"relative h-[180px]",children:s.jsx("img",{className:`object-cover w-full h-full
                                                    text-sm`,src:j+(r==null?void 0:r.image_url),alt:r.title})})})}),s.jsx("div",{className:`mt-1 text-[15px] tracking-tight 
                                     truncate`,children:r.title}),s.jsx("div",{className:"mt-1",children:s.jsx(S,{rating:r.avg_rating})}),s.jsx("div",{className:`text-[11px] mt-[5px] tracking-tight
                                    leading-[1.2em]`,children:r.short_description.substring(0,100)})]},h)))})]})},O=()=>{var x;const e=f();w();const c=e.data,t=e.query,[a,d]=o.useState(null);return o.useEffect(()=>{t&&d(t)},[t]),s.jsxs("div",{children:[s.jsx(y,{theme:"light"}),s.jsx(g,{query:t}),s.jsx("div",{className:"px-[15px] border-b",children:s.jsx("div",{className:"max-w-[1100px] mx-auto w-full",children:s.jsxs("div",{className:" grid grid-cols-12 gap-x-2",children:[s.jsx("div",{className:`flex place-items-center col-span-12 md:col-span-4 truncate
                             pt-3 pb-0 md:pb-3 `,children:s.jsx("span",{className:"text-[18px] font-bold",children:((x=e.query)==null?void 0:x.length)>0?`Search for '${e.query}'`:"Browse Updates"})}),s.jsx("div",{className:`space-x-6 flex place-items-center place-content-start
                            col-span-12 md:col-span-8 truncate md:place-content-end
                             pt-0 pb-2 md:pt-3 md:pb-3 `,children:L.map((m,i)=>s.jsx(p,{to:`${m.url}`,className:"text-[14px]",children:m.label},i))})]})})}),s.jsxs(F,{children:[c.length>0?s.jsx(A,{data:c,itemsPerPage:20}):s.jsx("div",{className:`flex place-items-center rounded
                            place-content-center p-5 border capitalize`,children:s.jsx("span",{children:"no record"})}),s.jsx(v,{category:"entertainment",limit:5,title:"Entertainment",subtitle:"Entertainment based businesses added in the last 7 days"}),s.jsx(v,{category:"services",limit:5,title:"Services",subtitle:"Services based businesses added in the last 7 days"})]}),s.jsx($,{})]})};export{O as default};
