import{j as a}from"./jsx-runtime-0DLF9kdB.js";import{r as m,d as I,c as F}from"./components-qdL6XBti.js";import{a2 as R,z as P,a3 as y,a4 as D,a5 as U,a6 as G,a7 as q,a8 as k,a9 as M}from"./lib-q9e4eigB.js";import{R as S,T,A as W,C as H,a as O,F as Q}from"./Categories-D4HwNE6B.js";import{S as V}from"./SrchNavbar-CROL9yXm.js";import"./UserMenu-CfZ1I5mh.js";import"./AuthContext-CCU0zqrf.js";import"./WhiteLogo-BdP7-UZf.js";import"./index-dNWcubkU.js";import"./json-tXDSE21y.js";const $=({averageRating:e})=>{const[u,x]=m.useState(0);return m.useEffect(()=>{e!=null&&x(e)},[e]),a.jsxs("div",{className:"text-blue-700",children:["(",R(Number(u)),")"]})},J=({listing:e})=>{var _;const[u,x]=m.useState("/images/placeholder-icon.webp"),[o,h]=m.useState(""),[p,f]=m.useState(""),[d,t]=m.useState(null),[j,w]=m.useState(""),[c,E]=m.useState(null),[v,C]=m.useState(null),[A,z]=m.useState("");return m.useEffect(()=>{if(e){const s=e;E(s),h(P.IMG_BASE_URL+(s==null?void 0:s.image_url))}},[e]),m.useEffect(()=>{e!=null&&e.website?w(e==null?void 0:e.website):(e==null?void 0:e.username)===""||(e==null?void 0:e.username)===null?w("/"+(e==null?void 0:e.gid)):w("/"+(e==null?void 0:e.username))},[e]),m.useEffect(()=>{e&&((e==null?void 0:e.image_url)!==""&&(e==null?void 0:e.image_url)!==null&&(e==null?void 0:e.image_url)!==void 0&&h(P.IMG_BASE_URL+(e==null?void 0:e.image_url)),(e==null?void 0:e.username)!==""&&(e==null?void 0:e.username)!==null&&(e==null?void 0:e.username)!==void 0?f(e==null?void 0:e.username):f(e==null?void 0:e.gid))},[e]),m.useEffect(()=>{if(e!=null&&e.social_media){let s=[];const r=y(e==null?void 0:e.social_media,",");r!==null&&(r==null||r.map((l,N)=>{const n=y(l,"$"),b={mediaName:n[0],mediaHandle:n[1],baseUrl:n[2]};s.push(b)})),t(s)}},[e]),m.useEffect(()=>{},[d]),m.useEffect(()=>{if(c!=null&&c.facility_features){let s=[];const r=y(c==null?void 0:c.facility_features,"&");r!==null&&(r==null||r.map((N,n)=>{const b=y(N,"$"),B={featureId:b[0],userDescription:b[1]};s.push(B)}));const l=D(s);C(l)}},[c]),m.useEffect(()=>{e!==null&&(async r=>{let l=r==null?void 0:r.title;l+=r!=null&&r.address_one?", "+(r==null?void 0:r.address_one):"",l+=r!=null&&r.address_two?", "+(r==null?void 0:r.address_two):"",l+=r!=null&&r.city_name?", "+(r==null?void 0:r.city_name):"",l+=r!=null&&r.state_name?", "+(r==null?void 0:r.state_name):"",l+=r!=null&&r.zipcode?", "+(r==null?void 0:r.zipcode):"",l+=r!=null&&r.country_name?", "+(r==null?void 0:r.country_name):"";let N=`https://www.google.com/maps/search/?api=1&query=${l}`;z(N)})(e)},[e]),a.jsxs("div",{className:"bg-white w-full h-auto  overflow-hidden border   hover:shadow-md hover:shadow-gray-200",children:[a.jsx("div",{className:"bg-gray-50/30 py-3 px-4 border-b-0",children:a.jsxs("a",{href:`/${p}`,children:[a.jsxs("div",{className:"flex place-content-between gap-2",children:[a.jsxs("div",{className:"flex place-items-start gap-2 w-full",children:[a.jsx("div",{className:"w-[90px] h-[90px] min-w-[90px]   bg-black bg-cover bg-center overflow-hidden relative border",style:{backgroundImage:`url(${u})`},children:o!==""&&a.jsx("img",{src:o,alt:"",className:`object-cover w-full h-full text-sm
                             z-0 bg-white`})}),a.jsxs("div",{className:" w-full",children:[a.jsx("div",{className:"text-[18px] font-normal text-blue-700 line-clamp-1 w-full",children:e==null?void 0:e.title}),(e==null?void 0:e.category)&&a.jsx("div",{className:"text-[12px] text-gray-500  capitalize mt-[0px]",children:(_=U(e==null?void 0:e.category))==null?void 0:_.name}),a.jsxs("div",{className:"flex place-items-center gap-x-1 mt-[5px] ",children:[a.jsx("div",{children:(c==null?void 0:c.average_rating)!==null&&(c==null?void 0:c.average_rating)!==""&&(c==null?void 0:c.average_rating)!==void 0?a.jsxs("div",{className:" flex gap-2 place-items-center",children:[a.jsx(S,{rating:Number(c==null?void 0:c.average_rating)}),a.jsx($,{averageRating:c==null?void 0:c.average_rating})]}):a.jsxs("div",{className:" flex gap-2 place-items-center",children:[a.jsx(S,{rating:1}),a.jsx($,{averageRating:0})]})}),a.jsx("div",{className:" ",children:Number(c==null?void 0:c.total_reviews)>0?c==null?void 0:c.total_reviews:0})]})]})]}),a.jsx("div",{className:"flex place-items-start",children:a.jsx("div",{className:"font-bold rounded-sm border px-3 py-[2px]",children:"View"})})]}),a.jsx("div",{className:"mt-[8px] text-[14px] md:text-[13px] text-gray-800 leading-[1.3em] line-clamp-3",children:e==null?void 0:e.short_description})]})}),a.jsx("div",{children:a.jsxs("div",{className:" h-auto flex place-content-between gap-2 ",children:[a.jsxs("div",{className:"flex place-items-start w-[60%] flex-col  pl-4  pt-2 pb-4 ",children:[a.jsxs("div",{className:"flex place-items-center gap-x-1",children:[a.jsx(G,{}),a.jsxs("span",{className:"mt-[1px] text-gray-500 space-x-2",children:[a.jsx("span",{className:"font-bold",children:"Founded:"}),a.jsx("span",{children:e==null?void 0:e.established})]})]}),v!==null&&a.jsxs("div",{className:"mt-2 flex place-items-start gap-2 w-full relative",children:[a.jsx("span",{className:"text-[13px]",children:"Facilities: "}),a.jsx("div",{className:"flex place-items-baseline gap-3 flex-wrap leading-[0.9em] ",children:v==null?void 0:v.map((s,r)=>a.jsx(T,{tooltip:`${s==null?void 0:s.name}: ${(s==null?void 0:s.userDescription)||""}`,children:a.jsx("div",{className:"text-[15px]",children:s==null?void 0:s.icon})},r))})]})]}),a.jsxs("div",{className:"flex place-items-end flex-col w-[40%] text-end pr-4 pt-2 pb-4",children:[a.jsx("div",{className:"font-[600]",children:e==null?void 0:e.phone}),a.jsx("div",{className:"text-[12px] leading-[1.2em] mt-1",children:a.jsx(W,{listing:e})})]})]})}),a.jsx("div",{className:"border-none",children:a.jsxs("div",{className:"flex place-content-between mx-4 my-1",children:[a.jsxs("div",{className:"flex place-items-center gap-4",children:[a.jsx("a",{href:`mailto:${e==null?void 0:e.email_address}`,children:a.jsx(q,{size:20})},34),(e==null?void 0:e.phone)&&a.jsx("a",{href:`tel:${e==null?void 0:e.phone}`,children:a.jsx(k,{size:20})},30),d!==null&&(d==null?void 0:d.map((s,r)=>a.jsx("a",{href:`${s==null?void 0:s.baseUrl}${s==null?void 0:s.mediaHandle}`,children:M(s==null?void 0:s.mediaName)},r)))]}),a.jsx("div",{className:"px-1.5 py-0.5 bg-red-500 rounded hover:shadow-lg text-white",children:a.jsx("a",{href:`${j}`,children:"Website"})})]})}),a.jsx("div",{className:"px-4 mb-4 mt-8",children:a.jsxs("div",{className:" grid grid-cols-2 gap-2 w-full md:w-[50%]",children:[a.jsx("a",{target:"_blank",href:`${A}`,className:"border border-blue-400 py-[5px] rounded px-2 font-semibold w-full text-center",children:"Go to map"}),a.jsx("div",{children:(c==null?void 0:c.phone)&&a.jsx("a",{href:`tel:${c==null?void 0:c.phone}`,children:a.jsxs("button",{className:"bg-blue-700 rounded w-full text-white flex place-items-center place-content-center text-[15px] gap-2 py-[5px]",children:[a.jsx(k,{size:20,className:"mt-[2px]"}),a.jsx("span",{children:"Call"})]})})})]})})]})},K=()=>a.jsx("div",{className:"bg-white w-full h-auto md:rounded-t-md shadow-md overflow-hidden border",children:a.jsxs("div",{className:"bg-gray-50/30 py-3 px-4 border-b",children:[a.jsxs("div",{className:"flex place-content-between",children:[a.jsx("div",{className:"flex place-items-center gap-2",children:a.jsxs("div",{className:"-space-y-1",children:[a.jsx("div",{className:"text-black text-lg font-semibold",children:"Garsset.com"}),a.jsx("div",{className:"text-[12px] text-gray-500 italic capitalize",children:"Business Directory Service"})]})}),a.jsx("div",{className:"flex place-items-center"})]}),a.jsx("div",{className:"mt-[8px] text-[12px] text-gray-500 leading-[1.3em]",children:"The only real-time generative AI app for video chatting, live streaming, and video creation on the market."})]})});function X({pagination:e}){var f;const[u]=I(),x=e.currentPage,o=e.totalPages,h=()=>{if(o<=7)return Array.from({length:o},(t,j)=>j+1);const d=[];switch(d.push(1),x){case 1:d.push(2,3,"...",o);break;case 2:d.push(2,3,4,"...",o);break;case 3:d.push(2,3,4,5,"...",o);break;case o-2:d.push("...",o-3,o-2,o-1,o);break;case o-1:d.push("...",o-3,o-2,o-1,o);break;case o:d.push("...",o-2,o-1,o);break;default:d.push("...",x-1,x,x+1,"...",o);break}return d},p=d=>{const t=new URLSearchParams(u);return t.set("page",d.toString()),`?${t.toString()}`};return a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(x-1)*e.itemsPerPage+1," to"," ",Math.min(x*e.itemsPerPage,e.totalItems)," of"," ",e.totalItems," items"]}),a.jsxs("nav",{className:"flex items-center space-x-1",children:[a.jsx("a",{href:e.hasPrev?p(x-1):"#",className:`px-3 py-2 border rounded-md text-sm font-medium ${e.hasPrev?"text-gray-700 hover:bg-gray-100":"opacity-50 cursor-not-allowed text-gray-400"}`,"aria-disabled":!e.hasPrev,onClick:d=>!e.hasPrev&&d.preventDefault(),children:"Prev"}),(f=h())==null?void 0:f.map((d,t)=>typeof d=="number"?a.jsx("a",{href:p(d),className:`px-3 py-2 border rounded-md text-sm font-medium ${d===x?"bg-blue-500 text-white border-blue-500":"text-gray-700 hover:bg-gray-100"}`,children:d},d):a.jsx("span",{className:"px-3 py-2 text-gray-500",children:d},`ellipsis-${t}`)),a.jsx("a",{href:e.hasNext?p(x+1):"#",className:`px-3 py-2 border rounded-md text-sm font-medium ${e.hasNext?"text-gray-700 hover:bg-gray-100":"opacity-50 cursor-not-allowed text-gray-400"}`,"aria-disabled":!e.hasNext,onClick:d=>!e.hasNext&&d.preventDefault(),children:"Next"})]})]})}const de=()=>{const e=F(),[u]=I(),x=e.data.items,o=e.data.pagination,h=e.query,p=e.countries,[f,d]=m.useState(null);return parseInt(u.get("page")||"1"),m.useEffect(()=>{h&&d(h)},[h]),a.jsxs("div",{className:" ",children:[a.jsx(V,{}),a.jsxs("div",{className:"h-screen flex flex-col relative ",children:[a.jsx("div",{className:"mt-[120px] md:mt-[60px]"}),a.jsxs("div",{className:"grid grid-cols-12 h-full overflow-hidden  gap-5 ",children:[a.jsxs("aside",{className:"col-span-3 h-full overflow-y-auto scrollbar-hidden pt-2 hidden xl:block",children:[a.jsxs("div",{className:"",children:[a.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Categories"}),a.jsx(H,{})]}),a.jsxs("div",{className:"mt-5",children:[a.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Countries"}),p&&a.jsx(O,{countries:p})]}),a.jsx("div",{className:" py-4 px-4 border-t",children:"Garssete - Business Directory Listing"})]}),a.jsx("div",{className:"col-span-12 xl:col-span-9  overflow-y-auto w-full md:px-[15px]",children:a.jsxs("div",{className:"grid grid-cols-12 gap-5",children:[a.jsx("div",{className:"col-span-12 md:col-span-8  pt-3",children:a.jsxs("div",{className:"space-y-8",children:[x==null?void 0:x.map((t,j)=>a.jsx(J,{listing:t},j)),a.jsx(X,{pagination:o}),a.jsx(K,{})]})}),a.jsx("div",{className:"hidden md:block md:col-span-4 pt-3    ",children:a.jsx("div",{className:"w-full xl:w-[90%] sticky top-3 ml-auto",children:a.jsx(Q,{})})})]})})]})]})]})};export{de as default};
