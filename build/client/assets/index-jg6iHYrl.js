import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as t,b as ne}from"./components-qdL6XBti.js";import{A as le,C as oe}from"./ContentLayout-IVhImePf.js";import{q,k as K,E as X,Y as ae,aj as ie,B as Y,a as $,I as re,aF as ce,A as de}from"./lib-CswUZYoq.js";import{B as ue,a as he}from"./BusinessHeader-DZ7R-Rjs.js";import{u as me}from"./AuthContext-BaQ1mGz6.js";import{u as V}from"./NotificationContext-IgbMj6VA.js";import{I as H}from"./index-Dz1RsV8-.js";import"./UserMenu-LiQR5g1A.js";import"./WhiteLogo-Il9AjoLy.js";import"./HomeNav-DcrJ3R4k.js";import"./SrchNavbar-DyHOxup7.js";import"./json-BrY44Fjs.js";const Q=t.createContext(null);function pe(){return t.useContext(Q)}function xe({children:s}){const[n,l]=t.useState(!1),[r,a]=t.useState(!1),[i,u]=t.useState(null),[c,o]=t.useState(null),[f,g]=t.useState(null),[p,h]=t.useState(!1),[_,k]=t.useState(null),[b,j]=t.useState(null),[D,d]=t.useState(null),[y,C]=t.useState(null),[L,te]=t.useState(null),B=t.useRef(null),I=V(),T=()=>{a(!1),u(null),l(!1)},J=()=>{var x;(x=B.current)==null||x.click()},G=x=>{var A;const E=(A=x.target.files)==null?void 0:A[0];if(E){const N=URL.createObjectURL(E);u(N),k(E),h(!0)}},M=async()=>{I.notify(),l(!0),await new Promise(v=>setTimeout(v,1e3));let x=document.getElementById("product_title"),E=document.getElementById("product_description"),A=document.getElementById("product_link");const N=new FormData;p&&N.append("file",_),N.append("guid",c),N.append("bid",f),N.append("product_title",x.value||""),N.append("product_description",E.value||""),N.append("product_link",A.value||"");const P=X.IMG_BASE_URL+"/business_gallery_product_upload";try{const v=await fetch(P,{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*"},body:N});if(v.ok)I.alert("Product Saved","Product saved successfully!");else{let m=v.json().then(R=>{I.alert("",R.message)})}}catch{return}finally{l(!1)}};let O={dialog:r,setDialog:a,handleCloseDialog:T,imgSrc:i,setImgSrc:u,userGuid:c,setUserGuid:o,businessGuid:f,setBusinessGuid:g,isImgSelected:p,setIsImageSelected:h,selectedFile:_,setSelectedFile:k,productTitle:b,setProductTitle:j,productDescription:y,setProductDescription:C,productLink:D,setProductLink:d,deletePhoto:async(x,E,A)=>{const P="https://pics.gasimg.com"+"/delete_business_gallery_pic",v={guid:x,bid:E,image_guid:A};l(!0),await new Promise(m=>setTimeout(m,1e3));try{const m=await fetch(P,{method:"POST",headers:K,body:JSON.stringify(v)});if(m.ok)I.alertReload("","Image deleted successfully!");else{let R=m.json().then(U=>{I.alert(U.message)})}}catch(m){return alert(m.message)}finally{l(!1)}}};return e.jsxs(Q.Provider,{value:O,children:[r&&e.jsx("div",{onMouseDown:x=>a(!1),className:`fixed w-screen h-screen z-[3100] 
                 top-0 left-0 right-0 bottom-0 bg-black/30
                place-content-center place-items-center`,children:e.jsx("div",{className:`relative max-w-[90%] w-[90%] h-[80%] bg-white 
                        rounded-[8px] overflow-hidden z-[3100] mx-auto `,onMouseDown:x=>x.stopPropagation(),children:e.jsxs("div",{className:"w-full h-full overflow-y-auto",children:[e.jsxs("div",{className:"relative w-full h-[75%] bg-black",children:[e.jsx("img",{src:i,alt:"",className:"object-scale-down w-full h-full"}),e.jsx("input",{type:"file",accept:"image/*",ref:B,className:"hidden",onChange:G}),e.jsx("div",{className:`flex place-content-center place-items-center
                                        bg-black/10 w-full h-full absolute z-0 top-0 object-cover
                                        text-white/80 `,onMouseDown:J,children:e.jsx("div",{className:`w-[60px] h-[60px] flex flex-col
                                        place-content-center place-items-center bg-white/50
                                        hover:cursor-pointer hover:bg-white/50
                                        rounded-full transition duration-300 ease-in-out`,children:e.jsx(q,{className:" text-[30px]"})})})]}),e.jsxs("div",{className:"h-[25%] space-y-1",children:[e.jsx("input",{onChange:x=>j(x.target.value),id:"product_title",value:b||"",placeholder:"Enter product title.",className:"w-full bg-gray-100 px-3 py-3"}),e.jsx("textarea",{onChange:x=>C(x.target.value),id:"product_description",value:y||"",placeholder:"Enter product description.",className:"w-full bg-gray-100 px-3  h-[60px] py-3"}),e.jsx("input",{onChange:x=>d(x.target.value),id:"product_link",value:D||"",placeholder:"Enter product link.",className:"w-full bg-gray-100 px-3   py-3"}),e.jsxs("div",{className:"flex place-content-end px-3 gap-2",children:[e.jsx("button",{onMouseDown:()=>T(),className:`bg-gray-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md mb-2 mt-4`,children:"Cancel"}),e.jsx("button",{onClick:()=>M(),className:`bg-blue-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md mb-2 mt-4`,children:n?"Working...":"Submit"})]})]})]})})}),s]})}const ge=({userGuid:s,businessGuid:n})=>{const l=pe(),r=()=>{l.setDialog(!0),l.setUserGuid(s),l.setBusinessGuid(n)};return e.jsx("div",{className:"mb-2",children:e.jsx("button",{onMouseDown:r,className:` bg-blue-800 rounded-md px-3 py-1
                text-white hover:bg-blue-700 transition
                duration-500 ease-in-out hover:shadow-md
                 shadow-gray-900 hover:shadow-black/50`,children:"Add Product"})})},Z=t.createContext(null);function fe(){return t.useContext(Z)}function we({children:s}){const[n,l]=t.useState(!1),[r,a]=t.useState(!1),[i,u]=t.useState(null),[c,o]=t.useState(null),[f,g]=t.useState(null),[p,h]=t.useState(!1),[_,k]=t.useState(null),[b,j]=t.useState(null),[D,d]=t.useState(null),[y,C]=t.useState(null),[L,te]=t.useState(null),[B,I]=t.useState("null"),[T,J]=t.useState(null),G=t.useRef(null),M=V(),z=()=>{a(!1),u(null),l(!1)},O=()=>{var w;(w=G.current)==null||w.click()},x=w=>{var v;const P=(v=w.target.files)==null?void 0:v[0];if(P){const m=URL.createObjectURL(P);u(m),k(P),h(!0)}},E=async()=>{M.notify(),l(!0),await new Promise(S=>setTimeout(S,1e3));let w=document.getElementById("product_title"),P=document.getElementById("product_description"),v=document.getElementById("product_link");const m=new FormData;p&&m.append("file",_),m.append("guid",c),m.append("bid",f),m.append("product_title",w.value),m.append("product_description",P.value),m.append("product_link",v.value),m.append("product_guid",B);const F="https://pics.gasimg.com"+"/business_gallery_product_update";console.log(Object.fromEntries(m.entries()));try{const S=await fetch(F,{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*"},body:m});if(S.ok)M.alert("Product Update","Product updated successfully!");else{let se=S.json().then(W=>{M.alert("",W.message)})}}catch{return}finally{l(!1)}};let N={dialog:r,setDialog:a,handleCloseDialog:z,imgSrc:i,setImgSrc:u,userGuid:c,setUserGuid:o,businessGuid:f,setBusinessGuid:g,isImgSelected:p,setIsImageSelected:h,selectedFile:_,setSelectedFile:k,productTitle:b,setProductTitle:j,productDescription:D,setProductDescription:d,productLink:y,setProductLink:C,productGuid:B,setProductGuid:I,deletePhoto:async(w,P,v)=>{const U="https://pics.gasimg.com"+"/delete_business_gallery_pic",F={guid:w,bid:P,image_guid:v};l(!0),await new Promise(S=>setTimeout(S,1e3));try{const S=await fetch(U,{method:"POST",headers:K,body:JSON.stringify(F)});if(S.ok)M.alertReload("","Image deleted successfully!");else{let se=S.json().then(W=>{M.alert(W.message)})}}catch(S){return alert(S.message)}finally{l(!1)}}};return e.jsxs(Z.Provider,{value:N,children:[r&&e.jsx("div",{className:"fixed w-screen h-screen bg-black/30 z-[3000]",children:e.jsx("div",{className:`fixed w-screen h-screen z-[3000] 
                 top-0 left-0 right-0 bottom-0 bg-black/30
                place-content-center place-items-center`,children:e.jsx("div",{className:`relative max-w-[90%] w-[90%] h-[80%] bg-white 
                        rounded-[8px] overflow-hidden z-[3100] mx-auto `,children:e.jsxs("div",{className:"w-full h-full overflow-y-auto",children:[e.jsxs("div",{className:"relative w-full h-[75%] bg-black",children:[e.jsx("img",{src:i,alt:"",className:"object-scale-down w-full h-full"}),e.jsx("input",{type:"file",accept:"image/*",ref:G,className:"hidden",onChange:x}),e.jsx("div",{className:`flex place-content-center place-items-center
                                        bg-black/10 w-full h-full absolute z-0 top-0 object-cover
                                        text-white/80 `,onMouseDown:O,children:e.jsx("div",{className:`w-[60px] h-[60px] flex flex-col
                                        place-content-center place-items-center bg-white/50
                                        hover:cursor-pointer hover:bg-white/50
                                        rounded-full transition duration-300 ease-in-out`,children:e.jsx(q,{className:" text-[30px]"})})})]}),e.jsxs("div",{className:"h-[25%]",children:[e.jsx("input",{onChange:w=>j(w.target.value),id:"product_title",value:b||"",placeholder:"Enter product title.",className:"w-full bg-gray-100 px-3  py-3 mb-1"}),e.jsx("textarea",{onChange:w=>d(w.target.value),id:"product_description",value:D||"",placeholder:"Enter product description.",className:"w-full bg-gray-100 px-3  h-[60px] py-3"}),e.jsx("input",{onChange:w=>C(w.target.value),id:"product_link",value:y||"",placeholder:"Enter product link.",className:"w-full bg-gray-100 px-3 py-3"}),e.jsxs("div",{className:"flex place-content-end px-3 gap-2",children:[e.jsx("button",{onMouseDown:()=>z(),className:`bg-gray-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md mb-2 mt-4`,children:"Cancel"}),e.jsx("button",{onClick:()=>E(),className:`bg-blue-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md mb-2 mt-4`,children:n?"Working...":"Submit"})]})]})]})})})}),s]})}const be=({product:s,menu:n,userGuid:l,businessGuid:r})=>{const[a,i]=t.useState(!1),[u,c]=t.useState(null),o=fe(),f=V(),g=()=>{o.setDialog(!0),o.setImgSrc(X.IMG_BASE_URL+s.product_image_url),o.setProductTitle(s.product_title),o.setProductDescription(s.product_description),o.setProductLink(s.product_link),o.setProductGuid(s.product_guid),o.setUserGuid(l),o.setBusinessGuid(r)},p=async()=>{f.notify(),await new Promise(h=>setTimeout(h,1e3)),o.deleteVideo(l,r,s.product_guid)};return e.jsx("div",{className:"",children:n&&e.jsx("div",{className:` absolute top-2 right-2 w-[80%] bg-white
                rounded-[12px] overflow-hidden border-[1px] border-white
                shadow-md`,children:e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:" divide-y-[1px]",children:[e.jsx("div",{onMouseDown:g,className:`py-1 hover:bg-gray-300 w-full
                                flex flex-col
                                px-2 transition duration-1000 ease-in-out`,children:"Edit"}),e.jsx("div",{onMouseDown:p,className:`py-1 hover:bg-gray-300 w-full
                                flex flex-col
                                px-2 transition duration-1000 ease-in-out`,children:"Delete"})]})})})})},ve=({showCarousel:s,product:n,itemIndex:l,userGuid:r,businessGuid:a})=>{const[i,u]=t.useState(!1),[c,o]=t.useState(null),f="https://pics.gasimg.com";let g="";n.product_image_url?g=f+n.product_image_url:g="https://trendyblinds.ca/wp-content/uploads/2023/09/3.-3D-WALLPAPER-SKU0015.jpg";const[p,h]=t.useState(g),_=()=>{u(!0)},k=async()=>{await new Promise(b=>setTimeout(b,200)),u(!1)};return t.useEffect(()=>{if(n){const b=ae(n==null?void 0:n.product_link);o(b)}},[n]),e.jsx("div",{className:"z-0",children:e.jsxs("div",{className:`border-[1px] h-fit p-1 rounded-md shadow-md
                    hover:cursor-pointer relative z-0`,children:[e.jsx("button",{onMouseDown:_,onBlur:k,className:`w-[30px] h-[30px] z-50 bg-white 
                flex place-content-center place-items-center 
                rounded-full absolute right-2 top-2 cursor-pointer
                hover:bg-gray-500 hover:text-white/80 transition duration-1000 ease-in-out`,children:e.jsx(ie,{className:"text-[20px]"})}),e.jsx("div",{onMouseDown:b=>s(l),className:`relative h-[100px] md:h-[170px] xl:h-[160px]
                         rounded-md overflow-hidden -z-10
                    `,children:e.jsx("img",{src:X.IMG_BASE_URL+(n==null?void 0:n.product_image_url),alt:"",className:`object-cover w-full h-full -z-40
                        `})}),(n==null?void 0:n.product_title).length>0&&e.jsx("div",{className:"text-[13px] mt-2 mb-1.5 leading-[1.2em] mx-[2px] line-clamp-2",children:n==null?void 0:n.product_title}),e.jsx(be,{product:n,menu:i,userGuid:r,businessGuid:a})]})})},je=({slides:s,selectedSlide:n,handleClose:l})=>{const[r,a]=t.useState(0);t.useRef(0),t.useRef(0);const i=()=>{a(c=>c===0?s.length-1:c-1)},u=()=>{a(c=>c===s.length-1?0:c+1)};return t.useEffect(()=>{n!==null&&a(n-1)},[n]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 gap-0 ",children:[e.jsxs("div",{className:"col-span-12 md:col-span-9 w-full h-full relative bg-black flex",children:[e.jsx("div",{className:" w-auto h-screen flex overflow-hidden",children:s.map((c,o)=>e.jsx("img",{src:c.image_url,alt:"",style:{transform:`translateX(-${r*100}%)`},className:`object-scale-down w-full h-full 
                                            block flex-shrink-0 flex-grow-0 transition-transform
                                            ease-in-out duration-1000`},o))}),e.jsx("button",{onMouseDown:i,className:`block absolute top-0 bottom-0 
                p-[1rem] cursor-pointer left-0 group h-full 
                transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full place-content-center place-items-center group-hover:bg-white/30
                        transition duration-500 ease-in-out`,children:e.jsx(Y,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("button",{onMouseDown:u,className:`block absolute top-0 bottom-0 
                    p-[1rem] cursor-pointer right-0 group 
                     transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full flex place-content-center place-items-center group-hover:bg-white/30
                        transition duration-500 ease-in-out`,children:e.jsx($,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("div",{onMouseDown:()=>l(),className:`w-[50px] h-[50px] z-[300] bg-white
                    flex place-content-center place-items-center
                    rounded-full absolute left-2 top-2 cursor-pointer
                    hover:bg-white/40 transition duration-1000 ease-in-out`,children:e.jsx(H,{className:"text-[30px]"})})]}),e.jsxs("div",{className:"hidden md:block md:col-span-3 px-5",children:[e.jsx("h1",{className:" text-[22px] my-4 font-sans font-extrabold tracking-tight leading-[24px]",children:"Photos for Jason Won, DPT - Flex With Doctor Jay"}),e.jsxs("div",{className:" my-4 ",children:[r+1," / ",s.length]}),e.jsx("hr",{}),e.jsx("div",{className:" my-4",children:s[r].image_title})]})]})})},ye=({overlay:s,setOverlay:n,selectedSlide:l,handleClose:r,gallery:a})=>e.jsx("div",{children:s&&e.jsx("div",{className:`flex w-screen h-screen bg-white z-[1000] 
                fixed top-0 left-0 right-0 bottom-0 `,children:a&&l&&e.jsx(je,{slides:a,selectedSlide:l,handleClose:r})})}),ee=t.createContext(null);function Ne(){return t.useContext(ee)}const Se="https://pics.gasimg.com",_e=({children:s})=>{const[n,l]=t.useState(!1),[r,a]=t.useState(null),[i,u]=t.useState(!1),[c,o]=t.useState(0),[f,g]=t.useState(null),p=t.useRef(0);t.useRef(0);const h=d=>{p.current=d.touches[0].clientX},_=d=>{const y=d.changedTouches[0].clientX,C=p.current-y;C>50?o(L=>(L+1)%i.length):C<-50&&o(L=>(L-1+i.length)%i.length)},k=()=>{l(!1)},b=()=>{o(d=>d===0?i.length-1:d-1)},j=()=>{o(d=>d===i.length-1?0:d+1)};t.useEffect(()=>{r!==null&&o(r-1)},[r]);let D={dialog:n,setDialog:l,selectedSlide:r,setSelectedSlide:a,slides:i,setGallery:u,setListing:g};return t.useEffect(()=>{const d=y=>{y.key==="Escape"&&k()};return n&&document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[n]),e.jsxs(ee.Provider,{value:D,children:[n&&e.jsx("div",{className:`flex w-screen h-screen bg-white z-[20001] 
                fixed top-0 left-0 right-0 bottom-0 `,children:e.jsxs("div",{className:"grid grid-cols-12 gap-0 w-full",children:[e.jsxs("div",{className:"col-span-12 md:col-span-9 w-full h-full relative bg-black flex",children:[e.jsx("div",{className:" w-full h-screen flex overflow-hidden",children:i&&r&&i.map((d,y)=>e.jsx("img",{onTouchStart:h,onTouchEnd:_,src:Se+d.product_image_url,alt:"",style:{transform:`translateX(-${c*100}%)`},className:`object-scale-down w-full h-full 
                                            block flex-shrink-0 flex-grow-0 transition-transform
                                            ease-in-out duration-1000`},y))}),e.jsx("button",{onMouseDown:b,className:`block absolute top-0 bottom-0 
                                                p-[1rem] cursor-pointer left-0 group h-full 
                                                transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full flex place-content-center place-items-center group-hover:bg-white/30
                                                        transition duration-500 ease-in-out`,children:e.jsx(Y,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("button",{onMouseDown:j,className:`block absolute top-0 bottom-0 
                                                    p-[1rem] cursor-pointer right-0 group 
                                                     transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full flex place-content-center place-items-center group-hover:bg-white/30
                                                        transition duration-500 ease-in-out`,children:e.jsx($,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("div",{onMouseDown:()=>k(),className:`w-[50px] h-[50px] z-[300] bg-white
                                                    flex place-content-center place-items-center
                                                    rounded-full absolute left-2 top-2 cursor-pointer
                                                    hover:bg-white/40 transition duration-1000 ease-in-out`,children:e.jsx(H,{className:"text-[30px]"})})]}),e.jsxs("div",{className:"hidden md:block md:col-span-3 px-5",children:[e.jsxs("h1",{className:" text-[22px] my-4 font-sans font-extrabold tracking-tight leading-[24px]",children:["Products for ",f&&f.title]}),e.jsxs("div",{className:" my-4 ",children:[c+1," / ",i.length]}),e.jsx("hr",{}),e.jsx("div",{className:" my-4 whitespace-pre-line",children:i[c].product_title}),i[c].product_description&&e.jsx("div",{className:" my-4 whitespace-pre-line",children:i[c].product_description}),e.jsx("div",{className:" mt-8 whitespace-pre-line",children:e.jsx("a",{target:"_product",href:i[c].product_link,className:"bg-blue-600 text-white px-12 py-4 text-center rounded-md cursor-pointer hover:shadow-lg hover:shadow-gray-300",children:"Go"})})]})]})}),s]})},ke=({productGallery:s,userGuid:n,businessGuid:l,listing:r})=>{const[a,i]=t.useState(!1),[u,c]=t.useState(0),o=Ne(),f=()=>{i(!1)},g=p=>{o.setDialog(!0),o.setSelectedSlide(p+1),o.setGallery(s),o.setListing(r)};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:` border-[1px] p-3 rounded-[5px] 
                grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4
                lg:grid-cols-4 xl:grid-cols-5 gap-2 z-0`,children:s==null?void 0:s.map((p,h)=>e.jsx("div",{className:"z-0",children:e.jsx(ve,{showCarousel:g,product:p,itemIndex:h,userGuid:n,businessGuid:l})},h))}),e.jsx(ye,{overlay:a,setOverlay:i,selectedSlide:u+1,handleClose:f,gallery:s})]})},ze=()=>{t.useEffect(()=>{re(localStorage)},[]);const[s,n]=t.useState(""),[l,r]=t.useState(""),[a,i]=t.useState(null),[u,c]=t.useState(null),[o,f]=t.useState(!0),{business_guid:g,user_guid:p}=ne(),[h,_]=t.useState(null);return me()?(t.useEffect(()=>{const b=async(j,D)=>{n(j),r(D);const d=await ce(j,D);i(d);const y=await de(j||"");_(y)};try{g&&p&&b(g,p)}catch(j){console.log(j.message)}},[g,p]),t.useEffect(()=>{s&&l&&a&&h&&(c({businessGuid:s,userGuid:l,productGallery:a,businessProfile:h}),f(!1))},[s,l,a,h]),o?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx(we,{children:e.jsx(_e,{children:e.jsx(xe,{children:e.jsx(le,{children:e.jsxs(oe,{title:"Videos Settings",businessGuid:s,data:u,businessProfile:h,children:[e.jsx(ue,{businessGuid:s,data:u,businessProfile:h}),s&&l&&e.jsx(he,{guid:s,userGuid:l}),s&&l&&e.jsx(ge,{userGuid:l,businessGuid:s}),a!==null&&(a==null?void 0:a.length)>0?e.jsx("div",{className:"z-0",children:e.jsx(ke,{productGallery:a,userGuid:l,businessGuid:s,listing:h})}):e.jsx("div",{className:" mt-2 border-[1px] rounded-lg p-3 mb-6",children:"Video Gallery is empty."})]})})})})})):null};export{ze as default};
