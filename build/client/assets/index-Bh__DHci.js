import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as s,b as j}from"./components-_iSq0a46.js";import{u as b}from"./NotificationContext-BsVh7NJD.js";import{j as y,k as A,h as S,I as w,i as B}from"./lib-De5pj66C.js";import{A as N,C as P}from"./ContentLayout-CQrKj-ea.js";import{B as E,a as L}from"./BusinessHeader-CjfuwdWv.js";import{u as _}from"./AuthContext-WCmxb3j_.js";import"./UserMenu-DdhvtKs9.js";import"./index-wLtdlWzV.js";import"./index-mJTNn3L-.js";import"./WhiteLogo-ButLoU8x.js";import"./HomeNav-CNITR2Pp.js";import"./SrchNavbar-8V94fl53.js";import"./json-DzZQDtVR.js";import"./HamburgerSecondary-t_a1qYz3.js";import"./CardTitle-BDvi6d6P.js";const k=({userGuid:r,businessGuid:c})=>{const[i,d]=s.useState(null),[a,m]=s.useState(!0),o=b(),[x,l]=s.useState(!1);s.useEffect(()=>{try{y(r,c).then(t=>{d(t[0].active_status),m(!1)})}catch{alert("Could not fetch business")}},[]);const u=async()=>{l(!0),o.notify(),await new Promise(n=>setTimeout(n,1e3));const t=!i;try{const n=`/api/listing/activate/${r}/${c}`,g=A.BASE_URL+n,f=await fetch(g,{method:"PUT",headers:S,body:JSON.stringify({user_guid:r,business_guid:c,active:t})});o.alertReload("Success","Completed!"),await new Promise(h=>setTimeout(h,1e3))}catch{}finally{d(t)}};return a?e.jsx("div",{children:"Loading..."}):e.jsx("div",{children:e.jsxs("div",{className:`p-6  rounded  max-w-lg
        mx-auto mt-12`,children:[e.jsxs("h2",{className:"text-lg mb-4 font-semibold",children:[i?"Deactivate":"Activate","Â Business"]}),e.jsx("div",{className:"border-[3px] border-gray-100 p-5 rounded-lg shadow",children:e.jsxs("label",{className:`flex items-center space-x-4 hover:cursor-pointer
                        `,children:[e.jsx("input",{type:"checkbox",checked:i??!1,onChange:u,className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:i?"Active":"Inactive"}),e.jsxs("div",{className:"font-normal text-sm",children:["Click to ",i?"deactivate":"activate"," the business profile. Once deactivated, it will no longer be visible"]})]})]})})]})})},Q=()=>{s.useEffect(()=>{w(localStorage)},[]);const[r,c]=s.useState(!0),[i,d]=s.useState(null),[a,m]=s.useState(""),[o,x]=s.useState(""),{business_guid:l,user_guid:u}=j(),[t,n]=s.useState(null);return _()?(s.useEffect(()=>{l&&u&&(async(f,h)=>{m(f),x(h);const v=await B(f||"");n(v)})(l,u)},[l,u]),s.useEffect(()=>{a&&o&&t&&(d({businessGuid:a,userGuid:o,businessProfile:t}),c(!1))},[a,o,t]),r?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx(N,{children:e.jsxs(P,{title:`${t.active_status?"Deactivate":"Activate"} Business Profile`,businessGuid:a,data:i,businessProfile:t,children:[e.jsx(E,{businessGuid:a,data:i,businessProfile:t}),a&&o&&e.jsx(L,{guid:a,userGuid:o}),i&&e.jsx(k,{userGuid:o,businessGuid:a})]})})):null};export{Q as default};
