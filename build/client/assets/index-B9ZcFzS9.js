import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as t,b}from"./components-DN9bEK-g.js";import{u as y}from"./NotificationContext-CvT6Gxr8.js";import{e as w,f as A,h as N,d as S}from"./lib-Y_mKruQP.js";import{A as B,C as P}from"./ContentLayout-P7p8DAKp.js";import{B as L}from"./BusinessMenu-BPFu39Ff.js";import{u as _}from"./AuthContext-FFpxFTZw.js";import"./MobileNav-DuMnp-dh.js";import"./index-DhkpV1_a.js";import"./index-J1ACD94P.js";import"./index-DlU_14A9.js";import"./WhiteLogo-09buATrq.js";import"./HomeNav-DOPYUQrR.js";const C=({userGuid:r,businessGuid:c})=>{const[s,d]=t.useState(null),[n,f]=t.useState(!0),a=y(),[x,l]=t.useState(!1);t.useEffect(()=>{try{w(r,c).then(i=>{d(i[0].active_status),f(!1)})}catch{alert("Could not fetch business")}},[]);const u=async()=>{l(!0),a.notify(),await new Promise(o=>setTimeout(o,1e3));const i=!s;try{const o=`/api/listing/activate/${r}/${c}`,g=A.BASE_URL+o,v=await fetch(g,{method:"PUT",headers:N,body:JSON.stringify({user_guid:r,business_guid:c,active:i})});a.alertReload("Success","Completed!"),await new Promise(m=>setTimeout(m,1e3))}catch{}finally{d(i)}};return n?e.jsx("div",{children:"Loading..."}):e.jsx("div",{children:e.jsxs("div",{className:`p-6  rounded  max-w-lg
        mx-auto mt-12`,children:[e.jsxs("h2",{className:"text-lg mb-4 font-semibold",children:[s?"Deactivate":"Activate","Â Business"]}),e.jsx("div",{className:"border-[3px] border-gray-100 p-5 rounded-lg shadow",children:e.jsxs("label",{className:`flex items-center space-x-4 hover:cursor-pointer
                        `,children:[e.jsx("input",{type:"checkbox",checked:s??!1,onChange:u,className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s?"Active":"Inactive"}),e.jsxs("div",{className:"font-normal text-sm",children:["Click to ",s?"deactivate":"activate"," the business profile. Once deactivated, it will no longer be visible"]})]})]})})]})})},z=()=>{var h;const[r,c]=t.useState(!0),[s,d]=t.useState(null),[n,f]=t.useState(""),[a,x]=t.useState(""),{business_guid:l,user_guid:u}=b(),[i,o]=t.useState(null);return _()?(t.useEffect(()=>{l&&u&&(async(m,p)=>{f(m),x(p);const j=await S(m||"");o(j)})(l,u)},[l,u]),t.useEffect(()=>{n&&a&&i&&(d({businessGuid:n,userGuid:a,businessProfile:i}),c(!1))},[n,a,i]),r?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx(B,{children:e.jsxs(P,{title:`${i.active_status?"Deactivate":"Activate"} Business Profile`,children:[e.jsx("div",{className:"font-semibold mb-2 text-md",children:(h=s==null?void 0:s.businessProfile)==null?void 0:h.title}),n&&a&&e.jsx(L,{guid:n,userGuid:a}),s&&e.jsx(C,{userGuid:a,businessGuid:n})]})})):null};export{z as default};
