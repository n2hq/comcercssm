import{j as a}from"./jsx-runtime-0DLF9kdB.js";import{r as o,L as f,c as k,B as $}from"./components-_iSq0a46.js";import{F as z}from"./Featured-DcEeZkef.js";import{k as N,R as w,S as L}from"./lib-D3V1-_xT.js";import{b as y}from"./index-IMbIR-_2.js";import{l as I}from"./index-CTbeVz01.js";import{L as E}from"./LatestStarRating-jlpcR0a0.js";import{n as B}from"./HamburgerSecondary-BxBy3BQ0.js";import{T as P}from"./TopAd-BIJNNjIB.js";import{S as C}from"./SearchLayout-h5FOsDqR.js";import{V as R}from"./VerticalHeight-CjKseacd.js";import{C as A,F as M}from"./FooterSection-Djukrc_1.js";import"./UserMenu-Dwi6NMN0.js";import"./index-aaHDQ7n8.js";import"./AuthContext-Di_kKw7g.js";import"./WhiteLogo-CgiFAK2a.js";import"./SrchNavbar-H3YWNLnx.js";const T=({children:e})=>a.jsx("div",{className:"w-full h-auto px-[15px] mt-5 z-0",children:a.jsxs("div",{className:`max-w-[1100px] mx-auto w-full
                    grid grid-cols-12 gap-8`,children:[a.jsx("div",{className:"col-span-12 lg:col-span-8 ",children:e}),a.jsx("div",{className:"col-span-12 lg:col-span-4 lg:block ",children:a.jsx("div",{className:"sticky top-[80px]",children:a.jsx(z,{})})})]})});function _({rating:e}){return a.jsx("div",{className:"flex gap-[3px]",children:Array.from({length:5}).map((c,r)=>{const t=Math.max(0,Math.min(1,e-r))*100;return a.jsxs("div",{className:`relative w-[20px] h-[20px] bg-gray-300 rounded 
                            overflow-hidden flex place-items-center
                            place-content-center`,children:[a.jsx("div",{className:"absolute inset-0 bg-green-600 z-[0]",style:{width:`${t}%`}}),a.jsx(I,{className:"relative z-[0] w-[14px] h-[14px] text-white",fill:"currentColor"})]},r)})})}const U=({listing:e})=>{var x,d;const[c,r]=o.useState("/images/imgplaceholder2.jpg"),[t,p]=o.useState("/images/imgplaceholder2.jpg"),[l,h]=o.useState("");return o.useEffect(()=>{e&&(((e==null?void 0:e.image_url)!==""||(e==null?void 0:e.image_url)!==null)&&p(N.IMG_BASE_URL+(e==null?void 0:e.image_url)),(e==null?void 0:e.username)!==""&&(e==null?void 0:e.username)!==null&&(e==null?void 0:e.username)!==void 0?h(e==null?void 0:e.username):h(e==null?void 0:e.gid))},[e]),a.jsxs("div",{className:" cursor-pointer mt-6 z-0 pb-6",onClick:u=>{window.location.href=`/${l}`},children:[a.jsxs("div",{className:"flex rounded-sm gap-4 z-0",children:[a.jsxs("div",{className:`relative min-w-[170px] w-[100px] h-[100px] border
                    bg-white z-0 bg-cover bg-center rounded-lg shadow-md overflow-hidden`,style:{backgroundImage:`url(${c})`},children:[a.jsx("img",{src:t,alt:e.title,className:`object-cover w-full h-full text-sm
                            rounded z-0`}),a.jsx("div",{className:`w-full h-[50%]
                            absolute z-[10] bottom-0 
                            bg-gradient-to-t from-black/40
                            to-transparent
                            `})]}),a.jsx("div",{className:" w-full",children:a.jsxs("div",{className:`md:flex md:place-content-between 
                w-full md:gap-x-[4px]`,children:[a.jsxs("div",{className:"w-full md:w-[60%]",children:[a.jsx(f,{to:`/${l}`,onClick:u=>u.stopPropagation(),children:a.jsx("div",{className:`font-bold text-[17px] text-brown-800
                    leading-[1.1em] hover:underline text-[#001e5a]`,children:e.title})}),a.jsxs("div",{className:`mt-2 flex gap-1
                                                     place-items-center`,children:[a.jsx(_,{rating:e==null?void 0:e.average_rating}),a.jsxs("div",{className:`flex place-items-center
                                gap-1 text-black/60 text-[13px]`,children:[a.jsx("div",{children:e==null?void 0:e.average_rating}),a.jsxs("div",{children:["(",`${(e==null?void 0:e.total_reviews)===null?0:e==null?void 0:e.total_reviews} review${Number(e==null?void 0:e.total_reviews)>1?"s":""}`,")"]})]})]}),a.jsx("div",{className:`font-normal text-[13px] leading-[1.2em] mt-[5px]
                    `,children:e!=null&&e.business_phrases?`${(x=e==null?void 0:e.business_phrases)==null?void 0:x.substring(0,150)}...`:""}),a.jsx("div",{className:`font-normal text-[13px] 
                                    flex place-items-center gap-1 mt-[3px]`,children:a.jsx("div",{className:`capitalize flex place-items-center gap-1
                                    text-black underline`,children:e.category})}),(e==null?void 0:e.established)&&a.jsxs("div",{className:"flex gap-2 mt-[5px] place-items-center",children:[a.jsx("div",{children:a.jsx(w,{})}),a.jsxs("div",{className:"flex flex-col gap-y-[3px] leading-3",children:[a.jsxs("div",{className:"text-[12px] font-bold",children:["Since ",e==null?void 0:e.established]}),a.jsx("div",{className:"text-[12px]",children:"In Business"})]})]})]}),a.jsxs("div",{className:`w-full lg:w-[40%] hidden 
                                sm:block`,children:[a.jsx("div",{className:`flex flex-col 
                    place-items-end place-content-end
                        font-semibold text-[15px] tracking-tighter`,children:e.phone}),a.jsxs("div",{className:`flex flex-col text-end text-[12px]
                                leading-[1.2em]`,children:[e==null?void 0:e.address_one,e!=null&&e.address_two?`, ${e==null?void 0:e.address_two}`:"",e!=null&&e.city_name?`, ${e==null?void 0:e.city_name}`:"",e!=null&&e.state_name?`, ${e==null?void 0:e.state_name}`:"",e!=null&&e.country_name?`, ${e==null?void 0:e.country_name}`:""]})]})]})})]}),a.jsxs("div",{className:`mt-2 md:mt-3 mb-0 text-[13px] leading-[1.2em]
                    flex place-content-start`,children:[a.jsx("div",{className:"relative top-[-3px] z-0 flex",children:a.jsx(y,{className:"tracking-tighter text-[20px]"})}),a.jsx("div",{children:e!=null&&e.short_description?`${(d=e==null?void 0:e.short_description)==null?void 0:d.substring(0,150)}...`:""})]})]})},q=({listing:e,index:c})=>{var d;const[r,t]=o.useState("/images/imgplaceholder2.jpg"),[p,l]=o.useState("/images/imgplaceholder2.jpg"),[h,x]=o.useState("");return o.useEffect(()=>{e&&(((e==null?void 0:e.image_url)!==""||(e==null?void 0:e.image_url)!==null)&&l(N.IMG_BASE_URL+(e==null?void 0:e.image_url)),(e==null?void 0:e.username)!==""&&(e==null?void 0:e.username)!==null&&(e==null?void 0:e.username)!==void 0?x(e==null?void 0:e.username):x(e==null?void 0:e.gid))},[e]),a.jsx("div",{className:" cursor-pointer mt-6 z-0 pb-6",onClick:u=>{window.location.href=`/${h}`},children:a.jsxs("div",{className:"w-full h-fit my-4",children:[a.jsxs("div",{className:"flex gap-[10px]",children:[a.jsxs("div",{className:`w-[90px] min-w-[90px]
                    bg-transparent z-0 h-[80px]
                    rounded-md overflow-hidden
                    relative`,style:{backgroundImage:`url(${r})`},children:[a.jsx("img",{src:p,alt:e==null?void 0:e.title,className:`object-cover w-full h-full 
                                text-sm rounded z-[0]`}),a.jsx("div",{className:`w-full h-[40%]
                            absolute z-[10] bottom-0 
                            bg-gradient-to-t from-black/40
                            to-transparent
                            `})]}),a.jsxs("div",{className:"flex-1 min-w-0 ",children:[a.jsxs("div",{className:`text-[19px] 
                    font-bold leading-[1.2em]
                    truncate overflow-hidden
                    `,children:[c+1,". ",e==null?void 0:e.title]}),a.jsxs("div",{className:`mt-2 flex gap-1
                         place-items-center`,children:[a.jsx(_,{rating:e==null?void 0:e.average_rating}),a.jsxs("div",{className:`flex place-items-center
                                gap-1 text-black/60 text-[13px]`,children:[a.jsxs("div",{children:[Number(e==null?void 0:e.average_rating),","]}),a.jsxs("div",{className:"leading-[1.2em]",children:["(",`${e==null?void 0:e.total_reviews} review${Number(e==null?void 0:e.total_reviews)>1?"s":""}`,")"]})]})]}),a.jsx("div",{className:`capitalize mt-1
                            text-[14px] underline`,children:e==null?void 0:e.category}),(e==null?void 0:e.established)&&a.jsxs("div",{className:"flex gap-2 mt-[5px] place-items-center",children:[a.jsx("div",{children:a.jsx(w,{})}),a.jsxs("div",{className:"flex flex-col gap-y-1 leading-3",children:[a.jsxs("div",{className:"text-[12px] font-bold",children:["Since ",e==null?void 0:e.established]}),a.jsx("div",{className:"text-[12px]",children:"In Business"})]})]})]})]}),a.jsxs("div",{className:`mt-2 md:mt-3 mb-0 text-[14px] leading-[1.2em]
                                flex place-content-start`,children:[a.jsx("div",{className:"relative top-[-3px] z-0 flex",children:a.jsx(y,{className:"tracking-tighter text-[20px]"})}),a.jsx("div",{children:e!=null&&e.short_description?`${(d=e==null?void 0:e.short_description)==null?void 0:d.substring(0,150)}...`:""})]})]})})},b=({data:e,itemsPerPage:c=10})=>{const[r,t]=o.useState(1),p=Math.ceil(e.length/c),l=r*c,h=l-c,x=e.slice(h,l),d=m=>t(m),u=()=>{r>1&&t(r-1)},v=()=>{r<p&&t(r+1)};return a.jsxs("div",{children:[a.jsx("div",{className:" divide-y z-0 divide-gray-500/30",children:x==null?void 0:x.map((m,s)=>a.jsxs("div",{children:[a.jsx("div",{className:"md:hidden",children:a.jsx(q,{listing:m,index:s})}),a.jsx("div",{className:"hidden md:block",children:m&&a.jsx(U,{listing:m})})]},s))}),p>1&&a.jsxs("div",{className:`flex justify-center gap-[5px] 
                mt-[60px]`,children:[a.jsx("button",{onClick:u,disabled:r===1,className:`px-[12px] py-[8px] bg-white cursor-pointer border
                                rounded-[4px]`,children:"Previous"}),Array.from({length:p},(m,s)=>s+1).map(m=>a.jsx("button",{onClick:()=>d(m),className:`px-[12px] py-[8px]  cursor-pointer border
                                rounded-[4px] ${r===m?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:m},m)),a.jsx("button",{onClick:v,disabled:r===p,className:`px-[12px] py-[8px] bg-white cursor-pointer border
                                rounded-[4px]`,children:"Next"})]})]})},j=({title:e,subtitle:c,category:r,limit:t})=>{const[p,l]=o.useState(""),[h,x]=o.useState(""),[d,u]=o.useState([]),v="https://tpics.gasimg.com";o.useEffect(()=>{e&&c&&(l(e),x(c))},[e,c]);let m=async(s,n)=>{if(n&&s){let S=await L(s,n);u(S)}};return o.useEffect(()=>{t&&r&&m(r,t)},[t,r]),a.jsxs("div",{className:"mt-10 border-t pt-5",children:[a.jsxs("div",{className:" mb-[20px] ",children:[a.jsx("div",{className:"font-semibold text-xl",children:p}),a.jsx("div",{className:"text-sm -mt-[2px]",children:h})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-3 gap-y-4",children:(d==null?void 0:d.length)>0&&(d==null?void 0:d.map((s,n)=>a.jsxs("div",{children:[a.jsx("div",{children:a.jsx(f,{to:`/${s.gid}`,children:a.jsx("div",{className:"relative h-[180px]",children:a.jsx("img",{className:`object-cover w-full h-full
                                                    text-sm`,src:s!=null&&s.image_url?v+(s==null?void 0:s.image_url):"https://accuvice.ng/wp-content/uploads/2016/06/placeholder.gif",alt:s.title})})})}),a.jsx("div",{className:`mt-1 text-[15px] tracking-tight 
                                     truncate`,children:s.title}),a.jsx("div",{className:"mt-1",children:a.jsx(E,{rating:s.avg_rating})}),a.jsx("div",{className:`text-[11px] mt-[5px] tracking-tight
                                    leading-[1.2em]`,children:s.short_description.substring(0,100)})]},n)))})]})},re=()=>{var l,h;const e=k();$();const c=e.data,r=e.query,[t,p]=o.useState(null);return o.useEffect(()=>{r&&p(r)},[r]),a.jsxs(C,{children:[a.jsx("div",{className:"px-[15px] bg-gray-100 ",children:a.jsx("div",{className:"max-w-[1100px] mx-auto w-full",children:a.jsxs("div",{className:" grid grid-cols-12 gap-x-2 gap-y-2 md:gap-y-0",children:[a.jsx("div",{className:`flex place-items-center col-span-12 md:col-span-4 truncate
                             pt-3 pb-0 md:pb-3 `,children:a.jsx("span",{className:"text-[17px] font-bold",children:((l=e.query)==null?void 0:l.length)>0?`Search for '${e.query}'`:"Browse Updates"})}),a.jsx("div",{className:`flex place-items-center place-content-start
                         text-gray-500 col-span-12 md:col-span-8 
                            md:place-content-end font-bold pb-[15px] md:pb-[0px]
                            gap-x-3 md:gap-x-12 flex-wrap md:flex-nowrap leading-[1.4em]
                              `,children:(h=B)==null?void 0:h.map((x,d)=>a.jsx(f,{to:`${x.url}`,className:"",children:x.label},d))})]})})}),a.jsx(P,{}),a.jsxs("div",{className:"md:hidden px-[12px] mt-8",children:[(c==null?void 0:c.length)>0?a.jsx(b,{data:c,itemsPerPage:20}):a.jsx("div",{className:`flex place-items-center rounded
                            place-content-center p-5 border capitalize`,children:a.jsx("span",{children:"no record"})}),a.jsx(j,{category:"entertainment",limit:5,title:"Entertainment",subtitle:"Entertainment based businesses added in the last 7 days"}),a.jsx(j,{category:"services",limit:5,title:"Services",subtitle:"Services based businesses added in the last 7 days"})]}),a.jsx("div",{className:"hidden md:block",children:a.jsxs(T,{children:[c.length>0?a.jsx(b,{data:c,itemsPerPage:20}):a.jsx("div",{className:`flex place-items-center rounded
                            place-content-center p-5 border capitalize`,children:a.jsx("span",{children:"no record"})}),a.jsx(j,{category:"entertainment",limit:5,title:"Entertainment",subtitle:"Entertainment based businesses added in the last 7 days"}),a.jsx(j,{category:"services",limit:5,title:"Services",subtitle:"Services based businesses added in the last 7 days"})]})}),a.jsx(R,{}),a.jsx(A,{}),a.jsx(M,{})]})};export{re as default};
