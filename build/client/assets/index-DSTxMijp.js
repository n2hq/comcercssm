import{j as a}from"./jsx-runtime-0DLF9kdB.js";import{u as k,s as C}from"./zod-g2XesUsp.js";import{r as i,b as T}from"./components-qdL6XBti.js";import{$ as E,I as O,a0 as A,O as B}from"./lib-ClTvlenw.js";import{z as s}from"./index-C4bLmoCR.js";import{A as W}from"./AccountLayout-DbrzReIn.js";import{C as $}from"./ContentLayout-HezYF_cE.js";import{u as F}from"./NotificationContext-DWfQct5-.js";import{f as L}from"./WhiteLogo-BbkPtNln.js";import{u as I}from"./AuthContext-C3M4QnT1.js";import"./UserMenu-DhuDjlu1.js";import"./index-DBZSphUT.js";import"./HomeNav-DquwwIxa.js";import"./SrchNavbar-BSFAt3zc.js";import"./json-CS1Ohf1x.js";import"./BusinessMenu-CGE5pLZJ.js";const D=/^(?!https?)(?!www\.?).*\..+$/g,G=s.object({username:s.any(),title:s.string().min(1,{message:"Enter a business name"}).min(3,{message:"Busines Name must not be less than 3 characters"}).max(100,{message:"Business name must not be more than 100 characters."}),country_code:s.string({message:"Please select a country"}).min(1,{message:"Please enter a country code."}),address_one:s.string({message:"Please enter an address"}).min(3,{message:"Address must not be less than 3 characters"}).max(100,{message:"Address must not be more than 100 characters"}),address_two:s.any(),state_code:s.any(),state_text:s.any(),country_text:s.any(),city:s.any(),established:s.string({message:"Please enter year established"}).min(4,{message:"Year must be at least 4 characters"}),call_code:s.any(),call_mobile:s.any(),zipcode:s.any(),intro:s.any(),category:s.string().min(2,{message:"Please select a business category"}),business_phrases:s.string({message:"Please enter business phrase"}).min(3,{message:"Business Phrases must not be less than 3 characters"}).max(1e3,{message:"Business Phrases must not be more than 100 characters"}),products:s.string({message:"Please enter products offered"}),services:s.union([s.string({message:"Please enter services offered"}).min(3,{message:"Please enter up to 3 characters"}),s.literal("")]),xsocial:s.any(),fbsocial:s.any(),linksocial:s.any(),website:s.union([s.string().regex(D).nullish(),s.literal("")]),email:s.string({message:"Please enter an email."}).min(1,{message:"Email must not be empty"}).email({message:"Please enter a valid email"})}).superRefine((o,u)=>{var l,n;((l=o==null?void 0:o.address_two)==null?void 0:l.length)!==0&&((n=o==null?void 0:o.address_two)==null?void 0:n.length)<3&&u.addIssue({code:s.ZodIssueCode.custom,path:["address_two"],message:"Enter a minimum of 3 characters"})}),P=["Closed","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","24:00"],V=({data:o,onChange:u,options:l})=>{const[n,c]=i.useState(null),[m,d]=i.useState("no_hours"),[x,b]=i.useState(!1),g=F(),v=async e=>{const t=e;return{Monday:{start:t.monday_from,end:t.monday_to},Tuesday:{start:t.tuesday_from,end:t.tuesday_to},Wednesday:{start:t.wednesday_from,end:t.wednesday_to},Thursday:{start:t.thursday_from,end:t.thursday_to},Friday:{start:t.friday_from,end:t.friday_to},Saturday:{start:t.saturday_from,end:t.saturday_to},Sunday:{start:t.sunday_from,end:t.sunday_to}}};i.useEffect(()=>{(async()=>{const t=await v(o.operatingHours);c(t),u(t),d(o.operatingHours.open_status)})()},[o.operatingHours]);const f=(e,t,r)=>{if(!n)return;let p=r;if(n[e].end<=p&&p!=="Closed"){alert(`For ${e}, closing time must be later than opening time.`);return}c({...n,[e]:{...n[e],[t]:r}}),u(n)},_=(e,t,r)=>{if(!n)return;let p=n[e].start;if(r<=p&&p!=="Closed"){alert(`For ${e}, closing time must be later than opening time.`);return}c({...n,[e]:{...n[e],[t]:r}}),u(n)},h=async()=>{if(m===null)return g.alertCancel("","Please select working hours."),!1;b(!0),g.notify(),await new Promise(e=>setTimeout(e,1e3));try{const e=await E(m,n,o.businessGuid,o.userGuid);console.log(e),g.alert("",e.message),b(!1)}catch(e){g.alert("",e.message)}};return n?a.jsx("div",{children:a.jsx("div",{className:`${L}`,children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"w-full",children:l.map(e=>a.jsxs("label",{className:`flex items-center gap-3 p-3 rounded cursor-pointer ${m===e.value?" bg-blue-50":"border-gray-300"}`,children:[a.jsx("div",{className:"w-[20px]",children:a.jsx("input",{type:"radio",name:"openStatus",value:e.value,checked:m===e.value,onChange:()=>d(e.value),className:"accent-blue-600 w-[20px] h-[20px]"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-gray-800",children:e.label}),a.jsx("span",{className:"text-[13px] text-gray-500",children:e.more})]})]},e.value))}),m==="selected_hours"&&Object.keys(n).map(e=>{var t;return a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"w-24 font-semibold",children:e}),a.jsxs("select",{value:((t=n[e])==null?void 0:t.start)||"",onChange:r=>f(e,"start",r.target.value),className:"border p-2 rounded",children:[a.jsx("option",{value:"",children:"From..."}),P.map(r=>a.jsx("option",{value:r,children:r},r))]}),a.jsx("span",{children:"to"}),a.jsxs("select",{value:n[e].end||"",onChange:r=>_(e,"end",r.target.value),className:"border p-2 rounded",children:[a.jsx("option",{value:"",children:"To..."}),P.map(r=>a.jsx("option",{value:r,children:r},r))]})]},e)}),a.jsx("div",{children:a.jsx("button",{onClick:h,className:`mt-6 bg-blue-600 text-white px-6 py-2 
                            rounded hover:bg-blue-700 transition
                            shadow-md hover:shadow-lg hover:shadow-black/50`,children:x?"Saving...":"Save Business Hours"})})]})})}):a.jsx("p",{children:"Loading working hours..."})},ce=()=>{i.useEffect(()=>{O(localStorage)},[]);const[o,u]=i.useState(!0),[l,n]=i.useState(""),[c,m]=i.useState(""),[d,x]=i.useState(),[b,g]=i.useState([]),v=[{value:"no_hours",label:"No Hours Available",more:"Visitors won't see business hours on this Page"},{value:"always_open",label:"Always Open",more:"e.g. Parks, beaches, roads"},{value:"permanently_closed",label:"Permanently Closed",more:"Permantently closed"},{value:"temporarily_closed",label:"Temporarily Closed",more:"Temporarily closed"},{value:"selected_hours",label:"Open During Selected Hours",more:"Open during selected hours"}],[f,_]=i.useState(null),[h,e]=i.useState(null),{business_guid:t,user_guid:r}=T();I(),i.useEffect(()=>{const w=async(y,S)=>{n(y),m(S);const N=await A(y,S);x(N);const H=await B(y||"");e(H)};try{t&&r&&w(t,r)}catch(y){console.log(y.message)}},[t,r]),i.useEffect(()=>{l&&c&&d&&h&&(_({businessGuid:l,userGuid:c,operatingHours:d,businessProfile:h}),u(!1))},[l,c,d,h]);const{register:p,handleSubmit:j,getValues:z,watch:R,setError:M,formState:{errors:U,isSubmitting:Y}}=k({defaultValues:{},resolver:C(G)});return o?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("div",{className:"text-lg",children:"Loading..."})}):a.jsx(W,{children:a.jsx($,{title:"Settings",businessGuid:l,data:f,businessProfile:h,children:f&&a.jsx("div",{className:"mt-6",children:a.jsx(V,{data:f,onChange:g,options:v})})})})};export{ce as default};
