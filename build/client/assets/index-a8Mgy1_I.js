import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as s,b}from"./components-qdL6XBti.js";import{u as j}from"./NotificationContext-jkHr5VFO.js";import{K as w,w as y,n as A,I as N,J as S}from"./lib-Vg6a-bJE.js";import{A as B,C as P}from"./ContentLayout-BxrbsZcp.js";import{B as E,a as L}from"./BusinessHeader-Ta45pSoe.js";import{u as _}from"./AuthContext-BnCYfHn3.js";import"./UserMenu-C8vdknC1.js";import"./WhiteLogo-CmRTgcFd.js";import"./index-Cj0zFx3r.js";import"./HomeNav-DdgaWdh1.js";import"./SrchNavbar-8eek0ggc.js";import"./json-CfA3Rlrt.js";import"./CardTitle-BY0Ps6Ga.js";const C=({userGuid:n,businessGuid:l})=>{const[a,d]=s.useState(null),[i,m]=s.useState(!0),o=j(),[h,c]=s.useState(!1);s.useEffect(()=>{try{w(n,l).then(t=>{d(t[0].active_status),m(!1)})}catch{alert("Could not fetch business")}},[]);const u=async()=>{c(!0),o.notify(),await new Promise(r=>setTimeout(r,1e3));const t=!a;try{const r=`/api/listing/activate/${n}/${l}`,v=y.BASE_URL+r,f=await fetch(v,{method:"PUT",headers:A,body:JSON.stringify({user_guid:n,business_guid:l,active:t})});o.alertReload("Success","Completed!"),await new Promise(x=>setTimeout(x,1e3))}catch{}finally{d(t)}};return i?e.jsx("div",{children:"Loading..."}):e.jsx("div",{children:e.jsxs("div",{className:`p-6  rounded  max-w-2xl
        mx-auto mt-12`,children:[e.jsx("div",{className:"mb-6 text-[13.5px] border-b pb-3",children:"If you deactivate your data all your data will still be intact, however, it will no longer be visible across all Garssete.com platforms."}),e.jsxs("h2",{className:"text-lg mb-1 font-semibold",children:[a?"Deactivate":"Activate","Â Business or Organization"]}),e.jsx("div",{className:"mb-5",children:a?"Your data is active. It will be visible across all Garssete.com platforms.":"Your data is deactivated, it will no longer be visible. However, all your data will still be intact."}),e.jsx("div",{className:"border-[3px] border-gray-100 p-5 rounded-lg shadow",children:e.jsxs("label",{className:`flex items-center space-x-4 hover:cursor-pointer
                        `,children:[e.jsx("input",{type:"checkbox",checked:a??!1,onChange:u,className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:a?"Active":"Inactive"}),e.jsxs("div",{className:"font-normal text-sm",children:["Click to ",a?"deactivate":"activate"," this business profile."]})]})]})})]})})},M=()=>{s.useEffect(()=>{N(localStorage)},[]);const[n,l]=s.useState(!0),[a,d]=s.useState(null),[i,m]=s.useState(""),[o,h]=s.useState(""),{business_guid:c,user_guid:u}=b(),[t,r]=s.useState(null);return _()?(s.useEffect(()=>{c&&u&&(async(f,x)=>{m(f),h(x);const g=await S(f||"");r(g)})(c,u)},[c,u]),s.useEffect(()=>{i&&o&&t&&(d({businessGuid:i,userGuid:o,businessProfile:t}),l(!1))},[i,o,t]),n?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx(B,{children:e.jsxs(P,{title:`${t.active_status?"Deactivate":"Activate"} Business Profile`,businessGuid:i,data:a,businessProfile:t,children:[e.jsx(E,{businessGuid:i,data:a,businessProfile:t}),i&&o&&e.jsx(L,{guid:i,userGuid:o}),a&&e.jsx(C,{userGuid:o,businessGuid:i})]})})):null};export{M as default};
