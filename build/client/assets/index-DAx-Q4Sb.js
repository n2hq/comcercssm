import{j as a}from"./jsx-runtime-0DLF9kdB.js";import{z as t,u as k,s as C}from"./index-CORT_df8.js";import{r as o,b as T}from"./components-DN9bEK-g.js";import{s as B,I as E,u as A,e as O}from"./lib-D_E54Po9.js";import{A as W,C as F}from"./ContentLayout-D6GHJShn.js";import{u as L}from"./NotificationContext-Cxf71-by.js";import{f as $}from"./WhiteLogo-G2f36SkX.js";import{B as D}from"./BusinessMenu-BlqJeUcB.js";import{u as I}from"./AuthContext-DPwfnQyg.js";import"./UserMenu-BoCAam-g.js";import"./index-CHNmjcsn.js";import"./index-SLANYK4f.js";import"./HomeNav-BkJw5wC0.js";import"./SrchNavbar-DUKOLbBs.js";import"./HamburgerSecondary-Cq9oUJYL.js";const G=/^(?!https?)(?!www\.?).*\..+$/g,V=t.object({username:t.any(),title:t.string().min(1,{message:"Enter a business name"}).min(3,{message:"Busines Name must not be less than 3 characters"}).max(100,{message:"Business name must not be more than 100 characters."}),country_code:t.string({message:"Please select a country"}).min(1,{message:"Please enter a country code."}),address_one:t.string({message:"Please enter an address"}).min(3,{message:"Address must not be less than 3 characters"}).max(100,{message:"Address must not be more than 100 characters"}),address_two:t.any(),state_code:t.any(),state_text:t.any(),country_text:t.any(),city:t.any(),established:t.string({message:"Please enter year established"}).min(4,{message:"Year must be at least 4 characters"}),call_code:t.any(),call_mobile:t.any(),zipcode:t.any(),intro:t.any(),category:t.string().min(2,{message:"Please select a business category"}),business_phrases:t.string({message:"Please enter business phrase"}).min(3,{message:"Business Phrases must not be less than 3 characters"}).max(1e3,{message:"Business Phrases must not be more than 100 characters"}),products:t.string({message:"Please enter products offered"}),services:t.union([t.string({message:"Please enter services offered"}).min(3,{message:"Please enter up to 3 characters"}),t.literal("")]),xsocial:t.any(),fbsocial:t.any(),linksocial:t.any(),website:t.union([t.string().regex(G).nullish(),t.literal("")]),email:t.string({message:"Please enter an email."}).min(1,{message:"Email must not be empty"}).email({message:"Please enter a valid email"})}).superRefine((n,c)=>{var i,r;((i=n==null?void 0:n.address_two)==null?void 0:i.length)!==0&&((r=n==null?void 0:n.address_two)==null?void 0:r.length)<3&&c.addIssue({code:t.ZodIssueCode.custom,path:["address_two"],message:"Enter a minimum of 3 characters"})}),S=["Closed","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00"],z=({data:n,onChange:c,options:i})=>{const[r,l]=o.useState(null),[m,d]=o.useState("no_hours"),[x,y]=o.useState(!1),g=L(),b=async s=>{const e=s;return{Monday:{start:e.monday_from,end:e.monday_to},Tuesday:{start:e.tuesday_from,end:e.tuesday_to},Wednesday:{start:e.wednesday_from,end:e.wednesday_to},Thursday:{start:e.thursday_from,end:e.thursday_to},Friday:{start:e.friday_from,end:e.friday_to},Saturday:{start:e.saturday_from,end:e.saturday_to},Sunday:{start:e.sunday_from,end:e.sunday_to}}};o.useEffect(()=>{(async()=>{const e=await b(n.operatingHours);l(e),c(e),d(n.operatingHours.open_status)})()},[n.operatingHours]);const f=(s,e,u)=>{if(!r)return;let p=u;if(r[s].end<=p&&p!=="Closed"){alert(`For ${s}, closing time must be later than opening time.`);return}l({...r,[s]:{...r[s],[e]:u}}),c(r)},v=(s,e,u)=>{if(!r)return;let p=r[s].start;if(u<=p&&p!=="Closed"){alert(`For ${s}, closing time must be later than opening time.`);return}l({...r,[s]:{...r[s],[e]:u}}),c(r)},h=async()=>{if(m===null)return g.alertCancel("","Please select working hours."),!1;y(!0),g.notify(),await new Promise(s=>setTimeout(s,1e3));try{const s=await B(m,r,n.businessGuid,n.userGuid);console.log(s),g.alert("",s.message),y(!1)}catch(s){g.alert("",s.message)}};return r?a.jsx("div",{children:a.jsx("div",{className:`${$}`,children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"w-full",children:i.map(s=>a.jsxs("label",{className:`flex items-center gap-3 p-3 rounded cursor-pointer ${m===s.value?" bg-blue-50":"border-gray-300"}`,children:[a.jsx("div",{className:"w-[20px]",children:a.jsx("input",{type:"radio",name:"openStatus",value:s.value,checked:m===s.value,onChange:()=>d(s.value),className:"accent-blue-600 w-[20px] h-[20px]"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-gray-800",children:s.label}),a.jsx("span",{className:"text-[13px] text-gray-500",children:s.more})]})]},s.value))}),m==="selected_hours"&&Object.keys(r).map(s=>a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"w-24 font-semibold",children:s}),a.jsxs("select",{value:r[s].start,onChange:e=>f(s,"start",e.target.value),className:"border p-2 rounded",children:[a.jsx("option",{value:"",children:"From..."}),S.map(e=>a.jsx("option",{value:e,children:e},e))]}),a.jsx("span",{children:"to"}),a.jsxs("select",{value:r[s].end,onChange:e=>v(s,"end",e.target.value),className:"border p-2 rounded",children:[a.jsx("option",{value:"",children:"To..."}),S.map(e=>a.jsx("option",{value:e,children:e},e))]})]},s)),a.jsx("div",{children:a.jsx("button",{onClick:h,className:`mt-6 bg-blue-600 text-white px-6 py-2 
                            rounded hover:bg-blue-700 transition
                            shadow-md hover:shadow-lg hover:shadow-black/50`,children:x?"Saving...":"Save Business Hours"})})]})})}):a.jsx("p",{children:"Loading working hours..."})},ce=()=>{o.useEffect(()=>{E(localStorage)},[]);const[n,c]=o.useState(!0),[i,r]=o.useState(""),[l,m]=o.useState(""),[d,x]=o.useState(),[y,g]=o.useState([]),b=[{value:"no_hours",label:"No Hours Available",more:"Visitors won't see business hours on this Page"},{value:"always_open",label:"Always Open",more:"e.g. Parks, beaches, roads"},{value:"permanently_closed",label:"Permanently Closed",more:"Permantently closed"},{value:"temporarily_closed",label:"Temporarily Closed",more:"Temporarily closed"},{value:"selected_hours",label:"Open During Selected Hours",more:"Open during selected hours"}],[f,v]=o.useState(null),[h,s]=o.useState(null),{business_guid:e,user_guid:u}=T();I(),o.useEffect(()=>{e&&u&&(async(_,w)=>{r(_),m(w);const N=await A(_,w);x(N);const H=await O(_||"");s(H)})(e,u)},[e,u]),o.useEffect(()=>{i&&l&&d&&h&&(v({businessGuid:i,userGuid:l,operatingHours:d,businessProfile:h}),c(!1))},[i,l,d,h]);const{register:p,handleSubmit:j,getValues:M,watch:R,setError:U,formState:{errors:Y,isSubmitting:Z}}=k({defaultValues:{},resolver:C(V)});return n?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("div",{className:"text-lg",children:"Loading..."})}):a.jsx(W,{children:a.jsxs(F,{title:"Settings",businessGuid:i,data:f,businessProfile:h,children:[i&&l&&a.jsx(D,{guid:i,userGuid:l}),f&&a.jsx("div",{className:"mt-6",children:a.jsx(z,{data:f,onChange:g,options:b})})]})})};export{ce as default};
