import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as s,b as S}from"./components-DN9bEK-g.js";import{A as y,C as D}from"./ContentLayout-Bsb89wQM.js";import{z as I,e as P}from"./lib-0UoF-2jt.js";import{B as C}from"./BusinessMenu-BlqJeUcB.js";import{u as _,a as k}from"./EditPhotoDialogContext-DxeuqDm8.js";import{k as M,B,a as G,I as A}from"./index-CGVRBAuN.js";import{u as z}from"./NotificationContext-mjUCmhAx.js";import{u as E}from"./SliderContext-C16V0RkC.js";import{u as L}from"./AuthContext-DBb3Uwfs.js";import{C as R}from"./CardTitle-Vm8bzRht.js";import"./UserMenu-CZENSG3-.js";import"./index-KkPTkV9P.js";import"./WhiteLogo-KvIGxFy1.js";import"./HomeNav--w42PZ0U.js";import"./SrchNavbar--S2ZW-_M.js";import"./HamburgerSecondary-4LoKiv2C.js";const U=({userGuid:t,businessGuid:i})=>{const o=s.useRef(null),[r,a]=s.useState(null),[h,d]=s.useState(null),[n,l]=s.useState(!1),[x,u]=s.useState(!1),[m,g]=s.useState(!1),c=_(),b=p=>{var j;try{const f=(j=p.target.files)==null?void 0:j[0];if(f){const w=URL.createObjectURL(f);a(w),d(f),l(!0),c.setDialog(!0),c.setImgSrc(w),c.setSelectedFile(f),c.setIsImageSelected(!0),c.setUserGuid(t),c.setBusinessGuid(i)}}finally{p.target.value=""}},v=()=>{var p;(p=o.current)==null||p.click()};return e.jsxs("div",{className:"mb-2",children:[e.jsx("button",{onMouseDown:v,className:` bg-blue-800 rounded-md px-3 py-1
                text-white hover:bg-blue-700 transition
                duration-500 ease-in-out hover:shadow-md
                 shadow-gray-900 hover:shadow-black/50`,children:"Add Photo"}),e.jsx("input",{type:"file",accept:"image/*",ref:o,className:" hidden",onChange:b})]})},F=({item:t,menu:i,userGuid:o,businessGuid:r})=>{const[a,h]=s.useState(!1),[d,n]=s.useState(null),l=k(),x=z(),u="https://tpics.gasimg.com",m=()=>{l.setDialog(!0),l.setImgSrc(u+t.image_url),l.setImageTitle(t.image_title),l.setUserGuid(o),l.setBusinessGuid(r),l.setImageGuid(t.image_guid),h(!0)},g=async()=>{x.notify(),await new Promise(c=>setTimeout(c,1e3)),l.deletePhoto(o,r,t.image_guid)};return e.jsx("div",{className:"",children:i&&e.jsx("div",{className:` absolute top-2 right-2 w-[80%] bg-white
                rounded-[12px] overflow-hidden border-[1px] border-white
                shadow-md`,children:e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:" divide-y-[1px]",children:[e.jsx("div",{onMouseDown:m,className:`py-1 hover:bg-gray-300 w-full
                                flex flex-col
                                px-2 transition duration-1000 ease-in-out`,children:"Edit"}),e.jsx("div",{onMouseDown:g,className:`py-1 hover:bg-gray-300 w-full
                                flex flex-col
                                px-2 transition duration-1000 ease-in-out`,children:"Delete"})]})})})})},O=({showCarousel:t,item:i,itemIndex:o,userGuid:r,businessGuid:a})=>{const[h,d]=s.useState(!1),n="https://tpics.gasimg.com";let l="";i.image_url?l=n+i.image_url:l="https://trendyblinds.ca/wp-content/uploads/2023/09/3.-3D-WALLPAPER-SKU0015.jpg";const[x,u]=s.useState(l),m=()=>{d(!0)},g=async()=>{await new Promise(c=>setTimeout(c,200)),d(!1)};return e.jsx("div",{className:"z-0",children:e.jsxs("div",{className:`border-[1px] h-fit p-1 rounded-md shadow-md
                    hover:cursor-pointer relative z-0`,children:[e.jsx("button",{onMouseDown:m,onBlur:g,className:`w-[30px] h-[30px] z-50 bg-white 
                flex place-content-center place-items-center 
                rounded-full absolute right-2 top-2 cursor-pointer
                hover:bg-gray-500 hover:text-white/80 transition duration-1000 ease-in-out`,children:e.jsx(M,{className:"text-[20px]"})}),e.jsx("div",{onMouseDown:c=>t(o),className:`relative h-[100px] md:h-[170px] xl:h-[160px]
                         rounded-md overflow-hidden -z-10
                    `,children:e.jsx("img",{src:x,alt:"",className:`object-cover w-full h-full -z-40
                        `})}),i.image_title.length>0&&e.jsx("div",{className:"text-[13px] mt-2 mb-1.5 leading-[1.2em] mx-[2px]",children:i.image_title}),e.jsx(F,{item:i,menu:h,userGuid:r,businessGuid:a})]})})},T=({slides:t,selectedSlide:i,handleClose:o})=>{const[r,a]=s.useState(0);s.useRef(0),s.useRef(0);const h=()=>{a(n=>n===0?t.length-1:n-1)},d=()=>{a(n=>n===t.length-1?0:n+1)};return s.useEffect(()=>{i!==null&&a(i-1)},[i]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 gap-0 ",children:[e.jsxs("div",{className:"col-span-12 md:col-span-9 w-full h-full relative bg-black flex",children:[e.jsx("div",{className:" w-auto h-screen flex overflow-hidden",children:t.map((n,l)=>e.jsx("img",{src:n.image_url,alt:"",style:{transform:`translateX(-${r*100}%)`},className:`object-scale-down w-full h-full 
                                            block flex-shrink-0 flex-grow-0 transition-transform
                                            ease-in-out duration-1000`},l))}),e.jsx("button",{onMouseDown:h,className:`block absolute top-0 bottom-0 
                p-[1rem] cursor-pointer left-0 group h-full 
                transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full place-content-center place-items-center group-hover:bg-white/30
                        transition duration-500 ease-in-out`,children:e.jsx(B,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("button",{onMouseDown:d,className:`block absolute top-0 bottom-0 
                    p-[1rem] cursor-pointer right-0 group 
                     transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full flex place-content-center place-items-center group-hover:bg-white/30
                        transition duration-500 ease-in-out`,children:e.jsx(G,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("div",{onMouseDown:()=>o(),className:`w-[50px] h-[50px] z-[300] bg-white
                    flex place-content-center place-items-center
                    rounded-full absolute left-2 top-2 cursor-pointer
                    hover:bg-white/40 transition duration-1000 ease-in-out`,children:e.jsx(A,{className:"text-[30px]"})})]}),e.jsxs("div",{className:"hidden md:block md:col-span-3 px-5",children:[e.jsx("h1",{className:" text-[22px] my-4 font-sans font-extrabold tracking-tight leading-[24px]",children:"Photos for Jason Won, DPT - Flex With Doctor Jay"}),e.jsxs("div",{className:" my-4 ",children:[r+1," / ",t.length]}),e.jsx("hr",{}),e.jsx("div",{className:" my-4",children:t[r].image_title})]})]})})},W=({overlay:t,setOverlay:i,selectedSlide:o,handleClose:r,gallery:a})=>e.jsx("div",{children:t&&e.jsx("div",{className:`flex w-screen h-screen bg-white z-[1000] 
                fixed top-0 left-0 right-0 bottom-0 `,children:a&&o&&e.jsx(T,{slides:a,selectedSlide:o,handleClose:r})})}),J=({gallery:t,userGuid:i,businessGuid:o})=>{const[r,a]=s.useState(!1),[h,d]=s.useState(0),n=E(),l=()=>{a(!1)},x=u=>{n.setDialog(!0),n.setSelectedSlide(u+1),n.setGallery(t)};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:` border-[1px] p-3 rounded-[5px] 
                grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4
                lg:grid-cols-4 xl:grid-cols-5 gap-2 z-0`,children:t.map((u,m)=>e.jsx("div",{className:"z-0",children:e.jsx(O,{showCarousel:x,item:u,itemIndex:m,userGuid:i,businessGuid:o})},m))}),e.jsx(W,{overlay:r,setOverlay:a,selectedSlide:h+1,handleClose:l,gallery:t})]})},re=()=>{var v;const[t,i]=s.useState(""),[o,r]=s.useState(""),[a,h]=s.useState(null),[d,n]=s.useState(null),[l,x]=s.useState(!0),{business_guid:u,user_guid:m}=S(),[g,c]=s.useState(null);return L()?(s.useEffect(()=>{u&&m&&(async(j,f)=>{i(j),r(f);const w=await I(j,f);h(w);const N=await P(j||"");c(N)})(u,m)},[u,m]),s.useEffect(()=>{t&&o&&a&&g&&(n({businessGuid:t,userGuid:o,gallery:a,businessProfile:g}),x(!1))},[t,o,a,g]),l?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx(y,{children:e.jsxs(D,{title:"Gallery Settings",children:[e.jsx(R,{baseUrl:"/web/account/portfolio/",guid:t,children:(v=d==null?void 0:d.businessProfile)==null?void 0:v.title}),t&&o&&e.jsx(C,{guid:t,userGuid:o}),t&&o&&e.jsx(U,{userGuid:o,businessGuid:t}),a.length>0?e.jsx("div",{className:"z-0",children:e.jsx(J,{gallery:a,userGuid:o,businessGuid:t})}):e.jsx("div",{className:" mt-2 border-[1px] rounded-lg p-3 mb-6",children:"Gallery is empty"})]})})):null};export{re as default};
