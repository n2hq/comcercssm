import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as t,b as Z}from"./components-qdL6XBti.js";import{A as ee}from"./AccountLayout-DbrzReIn.js";import{C as te}from"./ContentLayout-HezYF_cE.js";import{w as q,p as K,z as W,l as se,ak as le,B as ne,a as oe,I as ae,aE as ie,O as re}from"./lib-ClTvlenw.js";import{u as ce}from"./AuthContext-C3M4QnT1.js";import{u as V}from"./NotificationContext-DWfQct5-.js";import{I as de}from"./index-DBZSphUT.js";import{u as ue,P as me}from"./ProductSliderContext-CxZhSVvd.js";import"./UserMenu-DhuDjlu1.js";import"./WhiteLogo-BbkPtNln.js";import"./HomeNav-DquwwIxa.js";import"./SrchNavbar-BSFAt3zc.js";import"./json-CS1Ohf1x.js";import"./BusinessMenu-CGE5pLZJ.js";const X=t.createContext(null);function pe(){return t.useContext(X)}function he({children:s}){const[l,n]=t.useState(!1),[i,o]=t.useState(!1),[g,u]=t.useState(null),[d,a]=t.useState(null),[w,x]=t.useState(null),[p,m]=t.useState(!1),[N,P]=t.useState(null),[b,y]=t.useState(null),[k,D]=t.useState(null),[I,M]=t.useState(null),[$,H]=t.useState(null),L=t.useRef(null),C=V(),U=()=>{o(!1),u(null),n(!1)},J=()=>{var c;(c=L.current)==null||c.click()},B=c=>{var A;const _=(A=c.target.files)==null?void 0:A[0];if(_){const v=URL.createObjectURL(_);u(v),P(_),m(!0)}},E=async()=>{C.notify(),n(!0),await new Promise(f=>setTimeout(f,1e3));let c=document.getElementById("product_title"),_=document.getElementById("product_description"),A=document.getElementById("product_link");const v=new FormData;p&&v.append("file",N),v.append("guid",d),v.append("bid",w),v.append("product_title",c.value||""),v.append("product_description",_.value||""),v.append("product_link",A.value||"");const S=W.IMG_BASE_URL+"/business_gallery_product_upload";try{const f=await fetch(S,{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*"},body:v});if(f.ok)C.alert("Product Saved","Product saved successfully!");else{let r=f.json().then(G=>{C.alert("",G.message)})}}catch{return}finally{n(!1)}};let T={dialog:i,setDialog:o,handleCloseDialog:U,imgSrc:g,setImgSrc:u,userGuid:d,setUserGuid:a,businessGuid:w,setBusinessGuid:x,isImgSelected:p,setIsImageSelected:m,selectedFile:N,setSelectedFile:P,productTitle:b,setProductTitle:y,productDescription:I,setProductDescription:M,productLink:k,setProductLink:D,deletePhoto:async(c,_,A)=>{const S="https://pics.gasimg.com"+"/delete_business_gallery_pic",f={guid:c,bid:_,image_guid:A};n(!0),await new Promise(r=>setTimeout(r,1e3));try{const r=await fetch(S,{method:"POST",headers:K,body:JSON.stringify(f)});if(r.ok)C.alertReload("","Image deleted successfully!");else{let G=r.json().then(R=>{C.alert(R.message)})}}catch(r){return alert(r.message)}finally{n(!1)}}};return e.jsxs(X.Provider,{value:T,children:[i&&e.jsx("div",{onMouseDown:c=>o(!1),className:`fixed w-screen h-screen z-[3100] 
                 top-0 left-0 right-0 bottom-0 bg-black/30
                place-content-center place-items-center`,children:e.jsx("div",{className:`relative max-w-[90%] w-[90%] h-[80%] bg-white 
                        rounded-[8px] overflow-hidden z-[3100] mx-auto `,onMouseDown:c=>c.stopPropagation(),children:e.jsxs("div",{className:"w-full h-full overflow-y-auto",children:[e.jsxs("div",{className:"relative w-full h-[75%] bg-black",children:[e.jsx("img",{src:g,alt:"",className:"object-scale-down w-full h-full"}),e.jsx("input",{type:"file",accept:"image/*",ref:L,className:"hidden",onChange:B}),e.jsx("div",{className:`flex place-content-center place-items-center
                                        bg-black/10 w-full h-full absolute z-0 top-0 object-cover
                                        text-white/80 `,onMouseDown:J,children:e.jsx("div",{className:`w-[60px] h-[60px] flex flex-col
                                        place-content-center place-items-center bg-white/50
                                        hover:cursor-pointer hover:bg-white/50
                                        rounded-full transition duration-300 ease-in-out`,children:e.jsx(q,{className:" text-[30px]"})})})]}),e.jsxs("div",{className:"h-[25%] space-y-1",children:[e.jsx("input",{onChange:c=>y(c.target.value),id:"product_title",value:b||"",placeholder:"Enter product title.",className:"w-full bg-gray-100 px-3 py-3"}),e.jsx("textarea",{onChange:c=>M(c.target.value),id:"product_description",value:I||"",placeholder:"Enter product description.",className:"w-full bg-gray-100 px-3  h-[60px] py-3"}),e.jsx("input",{onChange:c=>D(c.target.value),id:"product_link",value:k||"",placeholder:"Enter product link.",className:"w-full bg-gray-100 px-3   py-3"}),e.jsxs("div",{className:"flex place-content-end px-3 gap-2",children:[e.jsx("button",{onMouseDown:()=>U(),className:`bg-gray-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md mb-2 mt-4`,children:"Cancel"}),e.jsx("button",{onClick:()=>E(),className:`bg-blue-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md mb-2 mt-4`,children:l?"Working...":"Submit"})]})]})]})})}),s]})}const ge=({userGuid:s,businessGuid:l})=>{const n=pe(),i=()=>{n.setDialog(!0),n.setUserGuid(s),n.setBusinessGuid(l)};return e.jsx("div",{className:"mb-2",children:e.jsx("button",{onMouseDown:i,className:` bg-blue-800 rounded-md px-3 py-1
                text-white hover:bg-blue-700 transition
                duration-500 ease-in-out hover:shadow-md
                 shadow-gray-900 hover:shadow-black/50`,children:"Add Product"})})},Y=t.createContext(null);function xe(){return t.useContext(Y)}function fe({children:s}){const[l,n]=t.useState(!1),[i,o]=t.useState(!1),[g,u]=t.useState(null),[d,a]=t.useState(null),[w,x]=t.useState(null),[p,m]=t.useState(!1),[N,P]=t.useState(null),[b,y]=t.useState(null),[k,D]=t.useState(null),[I,M]=t.useState(null),[$,H]=t.useState(null),[L,C]=t.useState("null"),[U,J]=t.useState(null),B=t.useRef(null),E=V(),z=()=>{o(!1),u(null),n(!1)},T=()=>{var h;(h=B.current)==null||h.click()},c=h=>{var f;const S=(f=h.target.files)==null?void 0:f[0];if(S){const r=URL.createObjectURL(S);u(r),P(S),m(!0)}},_=async()=>{E.notify(),n(!0),await new Promise(j=>setTimeout(j,1e3));let h=document.getElementById("product_title"),S=document.getElementById("product_description"),f=document.getElementById("product_link");const r=new FormData;p&&r.append("file",N),r.append("guid",d),r.append("bid",w),r.append("product_title",h.value),r.append("product_description",S.value),r.append("product_link",f.value),r.append("product_guid",L);const O="https://pics.gasimg.com"+"/business_gallery_product_update";console.log(Object.fromEntries(r.entries()));try{const j=await fetch(O,{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*"},body:r});if(j.ok)E.alert("Product Update","Product updated successfully!");else{let Q=j.json().then(F=>{E.alert("",F.message)})}}catch{return}finally{n(!1)}};let v={dialog:i,setDialog:o,handleCloseDialog:z,imgSrc:g,setImgSrc:u,userGuid:d,setUserGuid:a,businessGuid:w,setBusinessGuid:x,isImgSelected:p,setIsImageSelected:m,selectedFile:N,setSelectedFile:P,productTitle:b,setProductTitle:y,productDescription:k,setProductDescription:D,productLink:I,setProductLink:M,productGuid:L,setProductGuid:C,deletePhoto:async(h,S,f)=>{const R="https://pics.gasimg.com"+"/delete_business_gallery_pic",O={guid:h,bid:S,image_guid:f};n(!0),await new Promise(j=>setTimeout(j,1e3));try{const j=await fetch(R,{method:"POST",headers:K,body:JSON.stringify(O)});if(j.ok)E.alertReload("","Image deleted successfully!");else{let Q=j.json().then(F=>{E.alert(F.message)})}}catch(j){return alert(j.message)}finally{n(!1)}}};return e.jsxs(Y.Provider,{value:v,children:[i&&e.jsx("div",{className:"fixed w-screen h-screen bg-black/30 z-[3000]",children:e.jsx("div",{className:`fixed w-screen h-screen z-[3000] 
                 top-0 left-0 right-0 bottom-0 bg-black/30
                place-content-center place-items-center`,children:e.jsx("div",{className:`relative max-w-[90%] w-[90%] h-[80%] bg-white 
                        rounded-[8px] overflow-hidden z-[3100] mx-auto `,children:e.jsxs("div",{className:"w-full h-full overflow-y-auto",children:[e.jsxs("div",{className:"relative w-full h-[75%] bg-black",children:[e.jsx("img",{src:g,alt:"",className:"object-scale-down w-full h-full"}),e.jsx("input",{type:"file",accept:"image/*",ref:B,className:"hidden",onChange:c}),e.jsx("div",{className:`flex place-content-center place-items-center
                                        bg-black/10 w-full h-full absolute z-0 top-0 object-cover
                                        text-white/80 `,onMouseDown:T,children:e.jsx("div",{className:`w-[60px] h-[60px] flex flex-col
                                        place-content-center place-items-center bg-white/50
                                        hover:cursor-pointer hover:bg-white/50
                                        rounded-full transition duration-300 ease-in-out`,children:e.jsx(q,{className:" text-[30px]"})})})]}),e.jsxs("div",{className:"h-[25%]",children:[e.jsx("input",{onChange:h=>y(h.target.value),id:"product_title",value:b||"",placeholder:"Enter product title.",className:"w-full bg-gray-100 px-3  py-3 mb-1"}),e.jsx("textarea",{onChange:h=>D(h.target.value),id:"product_description",value:k||"",placeholder:"Enter product description.",className:"w-full bg-gray-100 px-3  h-[60px] py-3"}),e.jsx("input",{onChange:h=>M(h.target.value),id:"product_link",value:I||"",placeholder:"Enter product link.",className:"w-full bg-gray-100 px-3 py-3"}),e.jsxs("div",{className:"flex place-content-end px-3 gap-2",children:[e.jsx("button",{onMouseDown:()=>z(),className:`bg-gray-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md mb-2 mt-4`,children:"Cancel"}),e.jsx("button",{onClick:()=>_(),className:`bg-blue-800 text-white px-3 py-1.5 rounded-md
                                    shadow-md mb-2 mt-4`,children:l?"Working...":"Submit"})]})]})]})})})}),s]})}const we=({product:s,menu:l,userGuid:n,businessGuid:i})=>{const[o,g]=t.useState(!1),[u,d]=t.useState(null),a=xe(),w=V(),x=()=>{a.setDialog(!0),a.setImgSrc(W.IMG_BASE_URL+s.product_image_url),a.setProductTitle(s.product_title),a.setProductDescription(s.product_description),a.setProductLink(s.product_link),a.setProductGuid(s.product_guid),a.setUserGuid(n),a.setBusinessGuid(i)},p=async()=>{w.notify(),await new Promise(m=>setTimeout(m,1e3)),a.deleteVideo(n,i,s.product_guid)};return e.jsx("div",{className:"",children:l&&e.jsx("div",{className:` absolute top-2 right-2 w-[80%] bg-white
                rounded-[12px] overflow-hidden border-[1px] border-white
                shadow-md`,children:e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:" divide-y-[1px]",children:[e.jsx("div",{onMouseDown:x,className:`py-1 hover:bg-gray-300 w-full
                                flex flex-col
                                px-2 transition duration-1000 ease-in-out`,children:"Edit"}),e.jsx("div",{onMouseDown:p,className:`py-1 hover:bg-gray-300 w-full
                                flex flex-col
                                px-2 transition duration-1000 ease-in-out`,children:"Delete"})]})})})})},be=({showCarousel:s,product:l,itemIndex:n,userGuid:i,businessGuid:o})=>{const[g,u]=t.useState(!1),[d,a]=t.useState(null),w="https://pics.gasimg.com";let x="";l.product_image_url?x=w+l.product_image_url:x="https://trendyblinds.ca/wp-content/uploads/2023/09/3.-3D-WALLPAPER-SKU0015.jpg";const[p,m]=t.useState(x),N=()=>{u(!0)},P=async()=>{await new Promise(b=>setTimeout(b,200)),u(!1)};return t.useEffect(()=>{if(l){const b=se(l==null?void 0:l.product_link);a(b)}},[l]),e.jsx("div",{className:"z-0",children:e.jsxs("div",{className:`border-[1px] h-fit p-1 rounded-md shadow-md
                    hover:cursor-pointer relative z-0`,children:[e.jsx("button",{onMouseDown:N,onBlur:P,className:`w-[30px] h-[30px] z-50 bg-white 
                flex place-content-center place-items-center 
                rounded-full absolute right-2 top-2 cursor-pointer
                hover:bg-gray-500 hover:text-white/80 transition duration-1000 ease-in-out`,children:e.jsx(le,{className:"text-[20px]"})}),e.jsx("div",{onMouseDown:b=>s(n),className:`relative h-[100px] md:h-[170px] xl:h-[160px]
                         rounded-md overflow-hidden -z-10
                    `,children:e.jsx("img",{src:W.IMG_BASE_URL+(l==null?void 0:l.product_image_url),alt:"",className:`object-cover w-full h-full -z-40
                        `})}),(l==null?void 0:l.product_title).length>0&&e.jsx("div",{className:"text-[13px] mt-2 mb-1.5 leading-[1.2em] mx-[2px] line-clamp-2",children:l==null?void 0:l.product_title}),e.jsx(we,{product:l,menu:g,userGuid:i,businessGuid:o})]})})},ve=({slides:s,selectedSlide:l,handleClose:n})=>{const[i,o]=t.useState(0);t.useRef(0),t.useRef(0);const g=()=>{o(d=>d===0?s.length-1:d-1)},u=()=>{o(d=>d===s.length-1?0:d+1)};return t.useEffect(()=>{l!==null&&o(l-1)},[l]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 gap-0 ",children:[e.jsxs("div",{className:"col-span-12 md:col-span-9 w-full h-full relative bg-black flex",children:[e.jsx("div",{className:" w-auto h-screen flex overflow-hidden",children:s.map((d,a)=>e.jsx("img",{src:d.image_url,alt:"",style:{transform:`translateX(-${i*100}%)`},className:`object-scale-down w-full h-full 
                                            block flex-shrink-0 flex-grow-0 transition-transform
                                            ease-in-out duration-1000`},a))}),e.jsx("button",{onMouseDown:g,className:`block absolute top-0 bottom-0 
                p-[1rem] cursor-pointer left-0 group h-full 
                transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full place-content-center place-items-center group-hover:bg-white/30
                        transition duration-500 ease-in-out`,children:e.jsx(ne,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("button",{onMouseDown:u,className:`block absolute top-0 bottom-0 
                    p-[1rem] cursor-pointer right-0 group 
                     transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full flex place-content-center place-items-center group-hover:bg-white/30
                        transition duration-500 ease-in-out`,children:e.jsx(oe,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("div",{onMouseDown:()=>n(),className:`w-[50px] h-[50px] z-[300] bg-white
                    flex place-content-center place-items-center
                    rounded-full absolute left-2 top-2 cursor-pointer
                    hover:bg-white/40 transition duration-1000 ease-in-out`,children:e.jsx(de,{className:"text-[30px]"})})]}),e.jsxs("div",{className:"hidden md:block md:col-span-3 px-5",children:[e.jsx("h1",{className:" text-[22px] my-4 font-sans font-extrabold tracking-tight leading-[24px]",children:"Photos for Jason Won, DPT - Flex With Doctor Jay"}),e.jsxs("div",{className:" my-4 ",children:[i+1," / ",s.length]}),e.jsx("hr",{}),e.jsx("div",{className:" my-4",children:s[i].image_title})]})]})})},je=({overlay:s,setOverlay:l,selectedSlide:n,handleClose:i,gallery:o})=>e.jsx("div",{children:s&&e.jsx("div",{className:`flex w-screen h-screen bg-white z-[1000] 
                fixed top-0 left-0 right-0 bottom-0 `,children:o&&n&&e.jsx(ve,{slides:o,selectedSlide:n,handleClose:i})})}),ye=({productGallery:s,userGuid:l,businessGuid:n,listing:i})=>{const[o,g]=t.useState(!1),[u,d]=t.useState(0),a=ue(),w=()=>{g(!1)},x=p=>{a.setDialog(!0),a.setSelectedSlide(p+1),a.setGallery(s),a.setListing(i)};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:` border-[1px] p-3 rounded-[5px] 
                grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4
                lg:grid-cols-4 xl:grid-cols-5 gap-2 z-0`,children:s==null?void 0:s.map((p,m)=>e.jsx("div",{className:"z-0",children:e.jsx(be,{showCarousel:x,product:p,itemIndex:m,userGuid:l,businessGuid:n})},m))}),e.jsx(je,{overlay:o,setOverlay:g,selectedSlide:u+1,handleClose:w,gallery:s})]})},Ue=()=>{t.useEffect(()=>{ae(localStorage)},[]);const[s,l]=t.useState(""),[n,i]=t.useState(""),[o,g]=t.useState(null),[u,d]=t.useState(null),[a,w]=t.useState(!0),{business_guid:x,user_guid:p}=Z(),[m,N]=t.useState(null);return ce()?(t.useEffect(()=>{const b=async(y,k)=>{l(y),i(k);const D=await ie(y,k);g(D);const I=await re(y||"");N(I)};try{x&&p&&b(x,p)}catch(y){console.log(y.message)}},[x,p]),t.useEffect(()=>{s&&n&&o&&m&&(d({businessGuid:s,userGuid:n,productGallery:o,businessProfile:m}),w(!1))},[s,n,o,m]),a?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx(fe,{children:e.jsx(me,{children:e.jsx(he,{children:e.jsx(ee,{children:e.jsxs(te,{title:"Videos Settings",businessGuid:s,data:u,businessProfile:m,children:[s&&n&&e.jsx(ge,{userGuid:n,businessGuid:s}),o!==null&&(o==null?void 0:o.length)>0?e.jsx("div",{className:"z-0",children:e.jsx(ye,{productGallery:o,userGuid:n,businessGuid:s,listing:m})}):e.jsx("div",{className:" mt-2 border-[1px] rounded-lg p-3 mb-6",children:"Video Gallery is empty."})]})})})})})):null};export{Ue as default};
