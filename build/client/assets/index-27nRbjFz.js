import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as c,L as N,d as w,a as y}from"./components-qdL6XBti.js";import{A as P}from"./AccountLayout-DqEKwYFJ.js";import{u as S}from"./AuthContext-BnKqVxnU.js";import{z as _,r as g,ai as L,I as k,a2 as I,j as E,aj as $}from"./lib-gdbuLEb8.js";import{B as A}from"./BusinessMenu-CriD0Rgx.js";import"./UserMenu-CECLlKRK.js";import"./WhiteLogo-BTe8ysqQ.js";import"./index-CeMHKdet.js";import"./HomeNav-CYWF0wT0.js";import"./SrchNavbar-AcngZQKL.js";import"./json-BNowKBeR.js";const B=({listing:a,index:t})=>{const[s,m]=c.useState("/images/placeholder-icon.webp"),[l,p]=c.useState("");function r(x){return x%2!==0}return c.useEffect(()=>{if(a&&(a==null?void 0:a.image_url)!==null){let x=_.IMG_BASE_URL+(a==null?void 0:a.image_url);p(x)}else p(s)},[a]),e.jsx("div",{className:" cursor-pointer my-0",children:e.jsxs("div",{className:`flex rounded  gap-x-2 py-2 px-1
             hover:bg-blue-50  
             ${r(t),""}
                `,children:[e.jsx("div",{className:`relative min-w-[46px] w-[46px] h-[45px]
                    rounded-md overflow-hidden border bg-transparent bg-cover bg-center`,style:{backgroundImage:`url(${s})`},children:l!==null&&e.jsx("img",{src:l,alt:a.title,className:`object-cover w-full h-full text-sm bg-white
                             `})}),e.jsx("div",{className:" w-full",children:e.jsx(N,{to:`/web/account/portfolio/${a.gid}`,children:e.jsxs("div",{className:`md:flex md:place-content-between 
                w-full md:gap-x-[4px]`,children:[e.jsxs("div",{className:"w-full md:w-[60%] -space-y-1 block",children:[e.jsx("div",{className:"font-bold text-[14px] text-brown-800 line-clamp-1",children:a.title}),e.jsx("div",{className:"font-normal text-[11.5px] flex place-items-center gap-1",children:e.jsx("div",{className:"capitalize flex place-items-center ",children:a.category})}),e.jsx("div",{className:`font-normal text-[11px] 
                                    flex place-items-center gap-1 `,children:a!=null&&a.active_status?"Active":"Inactive"})]}),e.jsxs("div",{className:`w-full lg:w-[40%] hidden 
                                sm:block`,children:[e.jsx("div",{className:"flex flex-col place-items-end place-content-end font-bold text-black tracking-tighter",children:a.phone}),e.jsxs("div",{className:`flex flex-col text-end text-[12px]
                                leading-[1.2em]`,children:[a==null?void 0:a.address_one,a!=null&&a.address_two?`, ${a==null?void 0:a.address_two}`:"",a!=null&&a.city_name?`, ${a==null?void 0:a.city_name}`:"",a!=null&&a.state_name?`, ${a==null?void 0:a.state_name}`:"",a!=null&&a.country_name?`, ${a==null?void 0:a.country_name}`:""]})]})]})})})]})})},C=({data:a,itemsPerPage:t=3,resetPageKey:s})=>{const[m,l]=w(),p=Number(m.get("page"))||1,[r,x]=c.useState(p),u=Math.ceil(a.length/t),h=r*t,b=h-t,f=a.slice(b,h),n=o=>{x(o);const d=new URLSearchParams(m);d.set("page",String(o)),l(d)},j=()=>{r>1&&n(r-1)},i=()=>{r<u&&n(r+1)};return c.useEffect(()=>{s!==void 0&&n(1)},[s]),e.jsxs("div",{children:[e.jsx("div",{className:"divide-gray-500/20 divide-y-[1px]",children:f.map((o,d)=>e.jsx("div",{children:e.jsx(B,{index:d+1,listing:o})},d))}),u>1&&e.jsxs("div",{className:"flex justify-center gap-[5px] mt-[20px] text-[13px] border-t pt-6",children:[e.jsx("button",{onClick:j,disabled:r===1,className:"px-[12px] py-[6px] bg-white cursor-pointer border rounded-[4px] disabled:opacity-50",children:"Previous"}),Array.from({length:u},(o,d)=>d+1).map(o=>e.jsx("button",{onClick:()=>n(o),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${r===o?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:o},o)),e.jsx("button",{onClick:i,disabled:r===u,className:"px-[12px] py-[6px] bg-white cursor-pointer border rounded-[4px] disabled:opacity-50",children:"Next"})]})]})},R=({user:a,portfolio:t})=>e.jsx("div",{className:" h-fit",children:(t==null?void 0:t.length)>0?e.jsx(C,{data:t,itemsPerPage:7}):e.jsx("div",{className:`flex place-items-center rounded
                            place-content-center p-5 border capitalize`,children:e.jsx("span",{children:"no record"})})}),U=({query:a})=>e.jsx("form",{action:"/web/account/portfolio",className:"text-sm w-full max-w-md",children:e.jsxs("div",{className:`flex items-center bg-gray-50 rounded-full pl-4 pr-1 py-1 gap-2
            border-[1px] border-gray-500`,children:[e.jsx("input",{name:"q",defaultValue:a,type:"text",placeholder:"Business name, address, country, state...",className:"flex-grow text-gray-700 text-[12px] outline-none bg-transparent"}),e.jsx("button",{className:"bg-gray-600 w-8 h-8 flex items-center justify-center rounded-full text-white text-lg",children:e.jsx(g,{})})]})}),q=({base_url:a,title:t,q:s})=>e.jsx("div",{children:e.jsxs("div",{className:`bg-blue-100 w-full px-3 
                            flex place-content-between rounded-lg
                            place-items-center h-auto py-3 gap-[5px]
                            leading-[1.5em]`,children:[e.jsx("div",{className:"h-full",children:e.jsxs("div",{className:"flex items-center text-blue-800 text-[18px] font-poppins tracking-tight font-bold ",children:[e.jsx(L,{className:"mr-1 flex-shrink-0",size:25}),e.jsx("span",{className:"line-clamp-1 overflow-hidden",children:t})]})}),e.jsx("div",{className:"grow flex place-content-end",children:e.jsx(U,{query:s})})]})}),z=({children:a,businessGuid:t,data:s,businessProfile:m,title:l})=>e.jsx("div",{children:e.jsxs("div",{className:`mt-4 bg-white 
                rounded-lg shadow-md pb-8 `,children:[e.jsxs("div",{className:"font-semibold text-[17px] border-b-[1px] p-3 flex place-content-between place-items-center",children:[e.jsx("div",{children:l}),e.jsx("div",{className:"text-[13px] flex place-items-center gap-2",children:e.jsx("a",{href:"/web/account/portfolio",className:"border py-[5px] px-[10px] rounded-full bg-blue-50",children:"Portfolio Home"})})]}),e.jsxs("div",{className:"px-[15px]  pt-4 ",children:[e.jsx("div",{className:"w-full flex place-content-end",children:t&&s.userGuid&&e.jsx(A,{guid:t,userGuid:s.userGuid})}),a,e.jsx("div",{className:"h-[40px]"})]})]})}),Y=()=>{c.useEffect(()=>{k(localStorage)},[]);const a=S();if(!a)return null;const{user:t}=a,[s,m]=c.useState(null),[l,p]=c.useState(null),[r,x]=c.useState(null),[u,h]=c.useState(!0),b=y(),f=new URLSearchParams(b.search),n=(f==null?void 0:f.get("q"))||"";return c.useEffect(()=>{async function j(i,o){const d=await E(i||""),v=await $(i||"",o||"");m(d),p(v)}try{t!=null&&t.guid&&j(t==null?void 0:t.guid,n)}catch(i){console.log(i.message)}},[t==null?void 0:t.guid,n]),c.useEffect(()=>{s&&l&&x({userProfile:s,portfolio:l})},[s,l]),c.useEffect(()=>{r!==null&&h(!1)},[r]),u?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx(P,{children:e.jsxs(z,{title:"My Portfolio",children:[s===null?"Loading...":"",e.jsx(q,{base_url:"/web/account/portfolio",title:`${I(r.portfolio.length)} Pages`,q:n}),e.jsx("div",{className:"flex place-items-center place-content-center mt-3"}),e.jsx("div",{className:"mt-[20px]"}),r!==null&&e.jsx(R,{user:r.userProfile,portfolio:r.portfolio})]})})};export{Y as default};
