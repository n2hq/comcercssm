import{r as l,j as e}from"./components-UScJPEQZ.js";import{A as N,C as U}from"./ContentLayout-bnaZEuDE.js";import{a as _}from"./MobileNav-CZmBy4tC.js";import{u as C}from"./NotificationContext-YNujDc0A.js";import{u as R,g as E}from"./AuthContext-D-Wk8Hfz.js";import"./UserMenu-B4UA3JnZ.js";import"./index-DOwvlINV.js";const L=({user:t,userProfileImageData:o})=>{const i="https://oxbyt.com",n=C();let c="";o!=null&&o.image_url?c=i+o.image_url:c="https://trendyblinds.ca/wp-content/uploads/2023/09/3.-3D-WALLPAPER-SKU0015.jpg";const[r,h]=l.useState(c),[g,b]=l.useState(null),x=l.useRef(null),[j,w]=l.useState(!1),[d,u]=l.useState(!1),y=()=>{var s;(s=x.current)==null||s.click()},S=s=>{var f;const a=(f=s.target.files)==null?void 0:f[0];if(a){const p=URL.createObjectURL(a);h(p),b(a),w(!0)}},v=async()=>{if(u(!0),n.notify("Working..."),await new Promise(s=>setTimeout(s,1e3)),j){const s=new FormData;s.append("file",g),s.append("guid",t.user_guid);const p="https://oxbyt.com"+"/user_profile_pic_upload";try{const m=await fetch(p,{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*"},body:s});if(m.ok)n.alertReload("","Image uploaded successfully!");else{let k=m.json().then(A=>{n.alertCancel("",A.message)})}}catch{return}finally{u(!1)}}else n.alertCancel("","Please select an image to continue."),u(!1)};return e.jsxs("div",{className:`w-[50%] mx-auto flex flex-col 
        place-content-center place-items-center`,children:[e.jsxs("div",{className:`relative bg-blue-100 w-[150px] 
                h-[150px] z-40 rounded-full overflow-hidden`,children:[e.jsx("img",{src:r,alt:"Click to upload",className:" object-cover w-full h-full z-0 absolute"}),e.jsx("input",{type:"file",accept:"image/*",ref:x,className:" hidden",onChange:S}),e.jsx("div",{className:`flex place-content-center place-items-center
                                 bg-black/10 w-full h-full absolute z-0 
                                 top-0 object-cover
                                 text-white/80 `,onMouseDown:y,children:e.jsx("div",{className:`w-[50%] h-[50%] flex flex-col
                                    place-content-center place-items-center
                                    hover:cursor-pointer hover:bg-white/50
                                    rounded-full transition duration-300 ease-in-out`,children:e.jsx(_,{className:" text-[30px]"})})})]}),e.jsx("div",{className:` flex flex-col place-items-center 
                place-content-center mt-2 `,children:e.jsx("button",{className:`
                        ${d?"bg-gray-200 cursor-default":"bg-blue-100"}  
                        w-full py-[6px] rounded-[8px] border-[1px] border-gray-200
                        shadow-sm hover:shadow-lg transition duration-500 ease-in-out
                        px-5`,onMouseDown:v,disabled:d,children:d?"Uploading...":"Upload"})})]})},B=()=>{const{user:t}=R(),[o,i]=l.useState(null);return l.useEffect(()=>{async function n(c){const r=await E(c||"");i(r)}t!=null&&t.guid&&n(t==null?void 0:t.guid)},[t==null?void 0:t.guid]),l.useEffect(()=>{o!==null&&alert(JSON.stringify(o))},[o]),e.jsx(N,{children:e.jsxs(U,{title:"Account Profile",children:[e.jsx("div",{className:"font-semibold mb-2 text-md",children:"John Doe"}),e.jsx("div",{className:"",children:e.jsx(L,{user:null,userProfileImageData:null})}),e.jsx("div",{})]})})};export{B as default};
