import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r,L as M,c as me}from"./components-kAvIA9Ge.js";import{I as he,u as te,D as z,p as N,X as pe,Y as ue,Z as ie,_ as je,$ as ae,i as H,a0 as ve,a1 as Q,a2 as fe,a3 as Ne,B as we,a as ge,a4 as ye,W as be}from"./index-DJALgUKR.js";import{u as O}from"./SliderContext-DCMVAG4F.js";import{u as _e,s as Se,z as F}from"./index-CLh2UBG4.js";import{u as se}from"./NotificationContext-C59Elkkc.js";import{B as ke,a as Re,e as Ee,f as Le,g as Be,h as De,i as Ge,j as Ce}from"./MobileNav-B6yFQves.js";import{L as Ie,F as Me}from"./LatestStarRating-CLZUNxkI.js";import{G as Ae}from"./GenericNav-BWuHwmz7.js";import{H as $e}from"./HomeNav-pNK20H2x.js";import"./Hamburger-UUmUluoj.js";const ce=r.createContext(null);function le(){const t=r.useContext(ce);if(!t)throw new Error("useGallery must be used within a GalleryProvider");return t}const Ue=({children:t})=>{const[s,l]=r.useState(!1),[c,n]=r.useState(null),d=O(),[a,m]=r.useState(null),p="https://oxbyt.com",i=()=>l(!1);let g={setShow:l,setGallery:n,setListing:m};const w=x=>{d.setDialog(!0),d.setSelectedSlide(x+1),d.setGallery(c)};return r.useEffect(()=>{const x=v=>{v.key==="Escape"&&i()};return s&&document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[s]),e.jsxs(ce.Provider,{value:g,children:[s&&e.jsxs("div",{onMouseDown:x=>l(!1),className:`flex w-screen h-screen bg-black/40 
                        z-[3000] fixed top-0 left-0 right-0 bottom-0
                        place-items-center place-content-center px-[15px]`,children:[e.jsx("div",{onMouseDown:x=>x.stopPropagation(),className:`w-[95%] sm:w-[95%] md:w-[80%] max-h-[80%] mx-auto
                         bg-white rounded-lg shadow-lg shadow-black/50 space-y-6
                         z-[3100] overflow-hidden`,children:e.jsxs("div",{className:"w-full h-full",children:[e.jsx("div",{className:"border-b py-3 px-3",children:e.jsxs("div",{className:`font-bold text-gray-700
                                    text-xl w-[80%]  truncate`,children:["Gallery for ",a&&(a==null?void 0:a.title)]})}),e.jsx("div",{className:`grid grid-cols-4 md:grid-cols-6 gap-2 
                                h-full overflow-y-auto pt-2 px-2 pb-2
                                bg-gray-800 `,children:c&&(c==null?void 0:c.map((x,v)=>e.jsx("div",{onClick:()=>w(v),className:`relative hover:cursor-pointer
                                                 bg-red-200 h-[80px] md:h-[100px] lg:h-[120px] rounded-md
                                                 overflow-hidden`,children:e.jsx("img",{className:"object-cover w-full h-full",src:p+x.image_url,alt:""})})))})]})}),e.jsx("div",{onMouseDown:()=>i(),className:`w-[50px] h-[50px] z-[300] bg-white
                                flex place-content-center place-items-center
                                rounded-full absolute left-2 top-2 cursor-pointer
                                hover:bg-white/40 transition duration-1000 ease-in-out`,children:e.jsx(he,{className:"text-[30px]"})})]}),t]})},T=100,re=r.createContext(null);function Fe(){const t=r.useContext(re);if(!t)throw new Error("useRating must be used within a RatingProvider");return t}const Te=F.object({fullname:F.any(),rating:F.any(),comment:F.any()});function ze({children:t}){var q,J,Y;const[s,l]=r.useState(!1),[c,n]=r.useState(!1),[d,a]=r.useState(null),[m,p]=r.useState(void 0),[i,g]=r.useState(""),w=se(),[x,v]=r.useState(5);let{user:S}=te();const[I,L]=r.useState(null),[B,b]=r.useState(!1),R=o=>o.trim()===""?0:o.trim().split(/\s+/).length,h=o=>{let u=o.target.value,k=o.target.name;L(G=>({...G,[k]:u}))},{register:f,handleSubmit:y,getValues:E,setValue:D,watch:A,reset:$,setError:W,formState:{errors:_,isSubmitting:X}}=_e({resolver:Se(Te)}),U=o=>{const u=o.target.value,k=u.trim().split(/\s+/);if(k.length<=T)D("text",u),b(!1);else{b(!0);const G=k.slice(0,T).join(" ");D("text",G)}},j=async o=>{w.notify("Working..."),await new Promise(C=>setTimeout(C,1e3));const u=S.guid,k=d.gid;o.user_guid=u,o.business_guid=k;const ne="https://tynk.cc"+"/api/rating";try{const C=await fetch(ne,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),xe=await C.json();C.ok?w.alert("Success","Rating submitted successfully!"):w.alert("Error",xe.error)}catch(C){w.alert("",C.message)}};let K={show:s,setShow:l,setListing:a,reset:$,setRatingData:p,validateData:async(o,u)=>{if((o==null?void 0:o.length)===0){let k=(u==null?void 0:u.first_name)||"",G=(u==null?void 0:u.last_name)||"",Z=k+" "+G;D("fullname",Z)}}};const de=A("text")||"",oe=o=>{de.trim().split(/\s+/).length>=T&&o.key!=="Backspace"&&o.key!=="Delete"&&!o.ctrlKey?(o.preventDefault(),b(!0)):b(!1)};return r.useEffect(()=>{const o=u=>{u.key==="Escape"&&l(!1)};return s&&document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}},[s]),e.jsxs(re.Provider,{value:K,children:[s&&e.jsx("div",{className:`flex w-screen h-screen bg-black/40 z-[3000] 
                fixed top-0 left-0 right-0 bottom-0 place-items-center place-content-center`,children:e.jsxs("div",{className:"w-[450px] h-fit mx-auto p-6 bg-white rounded-xl shadow-md space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Create/Edit Rating"}),e.jsxs("form",{onSubmit:y(j),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-semibold",children:"Full Name"}),e.jsx("input",{...f("fullname",{onChange:h}),type:"text",className:`w-full px-3 py-2 border rounded-md
                                        text-sm`,placeholder:"Enter Business GUID"}),((q=_.fullname)==null?void 0:q.message)&&e.jsx("div",{className:"text-red-500 mt-1 text-sm",children:_.fullname.message.toString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-semibold",children:"Stars"}),e.jsx("select",{...f("rating",{onChange:o=>{v(Number(o.target.value)),h(o)}}),className:`w-full px-3 py-2 border rounded-md
                                        text-sm`,children:[5,4,3,2,1].map(o=>e.jsxs("option",{value:o,children:[o," Star",o>1?"s":""]},o))}),((J=_.rating)==null?void 0:J.message)&&e.jsx("div",{className:"text-red-500 mt-1 text-sm",children:_.rating.message.toString()})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex place-content-between",children:[e.jsx("label",{className:"block mb-1 text-sm font-semibold",children:"Comment"}),e.jsxs("label",{className:" text-gray-600 text-sm",children:["Word Count: ",e.jsx("strong",{children:R(i)})]})]}),e.jsx("textarea",{...f("comment",{onChange:o=>{R(i)<=T?(g(o.target.value),U(o),h(o)):o.preventDefault()}}),onKeyDown:oe,className:`w-full px-3 py-2 border rounded-md 
                                        text-sm`,placeholder:"Write your review...",rows:4}),B&&e.jsx("div",{className:"text-red-500 mt-0 text-sm",children:"Maximum maximumWords words allowed."}),((Y=_.comment)==null?void 0:Y.message)&&e.jsx("div",{className:"text-red-500 mt-0 text-sm",children:_.comment.message.toString()})]}),e.jsxs("div",{className:"w-full grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>l(!1),className:`w-full bg-red-200 rounded-md
                                        hover:bg-red-100 text-sm`,children:"Close"}),e.jsx("button",{type:"submit",disabled:c,className:`w-full bg-blue-600 text-white py-2 
                                        rounded-md hover:bg-blue-700 text-sm`,children:c?"Submitting...":"Submit Rating"})]})]})]})}),t]})}const We=({listing:t})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-[19px] md:text-[24px] 
                font-bold mt-[5px] leading-[1.2em]`,children:t==null?void 0:t.title}),e.jsxs("div",{className:"text-[13px] mt-1.5 leading-[1.2em]",children:[t!=null&&t.address_one?`${t==null?void 0:t.address_one}, `:"",t!=null&&t.address_two?`${t==null?void 0:t.address_two}, `:"",t!=null&&t.city_name?`${t==null?void 0:t.city_name}, `:"",t!=null&&t.state_name?`${t==null?void 0:t.state_name}, `:"",t==null?void 0:t.country_name]})]}),Xe=({listing:t})=>{const[s,l]=r.useState("");return r.useEffect(()=>{t.gid&&z(t.gid).then(n=>{l(N.IMG_BASE_URL+n.image_url)})},[t]),e.jsxs("div",{className:"mt-12",children:[e.jsx("div",{className:"font-bold text-lg",children:"About this business"}),e.jsxs("div",{className:`flex place-items-start place-content-start
                gap-2 mt-4 mb-3`,children:[e.jsx("div",{className:`rounded-full bg-black w-[30px] h-[30px]
                    overflow-hidden relative`,children:e.jsx("img",{className:"object-cover w-full h-full",src:s,alt:""})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-md font-bold tracking-tight leading-[1.2em]",children:t.title}),e.jsx("div",{className:"text-[12px] capitalize",children:t.category})]})]}),e.jsx("div",{className:"flex flex-col gap-y-5 text-[14px] mt-4 whitespace-pre-wrap",children:t==null?void 0:t.long_description})]})},Ke=({listing:t})=>{const s=Fe(),{user:l}=te(),c=se();r.useEffect(()=>{t!=null&&t.gid&&(l!=null&&l.guid)&&(s.setListing(t),pe(l.guid,t.gid).then(a=>{(a==null?void 0:a.length)!==0?(s.reset(a),s.setRatingData(a)):s.validateData(a,l)}))},[t,l]);const n=a=>{a?(c.cancel(),window.location.href="/signin"):c.cancel()},d=()=>{(l==null?void 0:l.guid)===null||(l==null?void 0:l.guid)===void 0?c.confirm("Login to continue",n):s.setShow(!0)};return e.jsx("div",{className:"w-full mt-0 ",children:e.jsx("div",{className:"",children:e.jsx("button",{onClick:()=>d(),className:`bg-blue-500 text-white flex flex-col
                items-center pt-[2px] pb-[3px] w-full `,children:"Write Review"})})})},P=({businessProfile:t})=>e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:` md:mx-[25px] md:bg-[#006ce4]/10
            md:rounded-[5px] overflow-hidden pt-[30px]
            pb-[15px] bg-[black] text-white md:black
            md:text-black`,children:[e.jsx("div",{className:`font-bold text-[15px] pb-2 
                   px-[20px]`,children:"Property Address"}),e.jsx("div",{className:"h-[25px]"}),e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-3 lg:grid-cols-1 
                text-[14px]  tracking-tight
                md:space-x-4 lg:space-x-0 md:text-black/80 font-sans
                `,children:[e.jsxs("div",{className:"px-[20px] space-y-4 lg:space-y-4",children:[e.jsx("div",{className:" w-full",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-1 ",children:e.jsx(ue,{className:"text-[20px]"})}),e.jsxs("div",{className:`col-span-11 leading-[1.2em] ml-2
                            text-[12px]`,children:[(t==null?void 0:t.address_one)+", ",(t==null?void 0:t.address_two)!==null?(t==null?void 0:t.address_two)+", ":"",(t==null?void 0:t.city_name)!==null?(t==null?void 0:t.city_name)+", ":"",(t==null?void 0:t.state_name)!==null?(t==null?void 0:t.state_name)+", ":"",(t==null?void 0:t.zipcode)!==null?(t==null?void 0:t.zipcode)+", ":"",t==null?void 0:t.country_name]})]})}),e.jsx("div",{className:"  w-full",children:e.jsx(M,{to:`tel:${t==null?void 0:t.phone}`,children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(ie,{className:"text-[20px]"})}),e.jsx("div",{className:`col-span-11 leading-[1.2em] ml-2
                                    text-[12px]`,children:t==null?void 0:t.phone})]})})}),e.jsx("div",{className:"  w-full",children:e.jsx(M,{to:`${t==null?void 0:t.website}`,children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:`col-span-1 relative top-0
                            `,children:e.jsx(je,{className:"text-[22px]"})}),e.jsx("div",{className:`col-span-11 leading-[1.2em] ml-2 top-0
                            flex place-items-center text-[12px]`,children:"Website"})]})})}),e.jsx("div",{className:"  w-full",children:e.jsx(M,{to:`mailto:${t==null?void 0:t.email_address}`,children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:`col-span-1 relative top-0
                            `,children:e.jsx(ae,{className:"text-[20px]"})}),e.jsx("div",{className:`col-span-11 leading-[1.2em] ml-2 top-0
                            flex place-items-center text-[12px]`,children:"Email Address"})]})})})]}),e.jsx("div",{children:e.jsx("div",{className:`bg-blue-500 mt-[40px] mx-[15px]
                        text-white text-center py-2 rounded`,children:t&&e.jsx(Ke,{listing:t})})})]})]})}),He=({ratingsData:t,rating:s=3.5,maxStars:l=5})=>{const c=[];for(let n=1;n<=l;n++)n<=s?c.push(e.jsx("span",{className:"text-green-700 text-md",children:e.jsx(ke,{})},n)):c.push(e.jsx("span",{className:`text-green-700 text-md rounded-full
                overflow-hidden`,children:e.jsx(Re,{className:"bg-green-100"})},n));return e.jsxs("div",{className:" flex w-full place-items-center gap-2 mt-6",children:[e.jsx("div",{className:"flex  gap-x-[3px] -mt-[2px]",children:c}),e.jsx("div",{className:"text-gray-400",children:e.jsx(H,{className:"text-[15px] text-green-700"})}),e.jsxs("div",{className:" text-sm",children:["Rating: ",s]}),e.jsx("div",{className:"text-gray-400",children:e.jsx(H,{className:"text-[15px] text-green-700"})}),e.jsxs("div",{className:"text-sm",children:["Reviews: ",Number(t.rating_count)]})]})},Oe=({listing:t})=>{const[s,l]=r.useState(void 0);return r.useEffect(()=>{ve(t.gid).then(c=>{l(c)})},[t.business_guid]),e.jsxs("div",{className:" mt-12",children:[e.jsx("div",{className:" font-bold text-xl",children:"Features"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mt-3",children:s==null?void 0:s.map((c,n)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-bold",children:c.name}),e.jsx("div",{className:"text-sm mt-[-2px] text-gray-500 leading-[1.2em] tracking-normal",children:c.user_description||c.description})]},n))})]})},Ve=({listing:t})=>e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-lg font-bold",children:"Intro"}),e.jsx("div",{className:" text-[14px] flex flex-col gap-y-4 whitespace-pre-wrap",children:t.short_description})]}),ee=({rating:t=3.5,maxStars:s=5})=>{const l=[];for(let c=1;c<=s;c++)c<=t?l.push(e.jsx("span",{className:"text-yellow-500 text-lg",children:e.jsx(Ee,{})},c)):l.push(e.jsx("span",{className:"text-yellow-500 text-lg",children:e.jsx(Le,{})},c));return e.jsxs("div",{className:" flex w-full place-items-center gap-2 mt-0",children:[e.jsx("div",{className:"flex  gap-x-[3px] -mt-[2px]",children:l}),e.jsx("div",{className:"text-gray-400",children:e.jsx(H,{className:"text-[15px] text-yellow-400"})}),e.jsxs("div",{className:" text-sm",children:["Rating: ",Number(t).toFixed(0)]})]})},qe=({listing:t})=>{const[s,l]=r.useState([]),[c,n]=r.useState({});return r.useEffect(()=>{const d=async m=>{m&&await fe(m).then(p=>{l(p)})},a=async m=>{m&&await Ne(m).then(p=>{n(p)})};t.gid&&(d(t.gid),a(t.gid))},[t]),e.jsxs("div",{className:"mt-12",children:[e.jsx("div",{className:"text-xl font-bold",children:"Reviews"}),e.jsxs("div",{className:"-mt-1 text-[14px] flex flex-col -gap-y-1 font-light",children:[e.jsx("div",{className:"font-bold",children:"Overall Rating:"}),c&&e.jsx(ee,{rating:c==null?void 0:c.rating_average})]}),e.jsx("hr",{className:"mt-3"}),e.jsx("div",{className:"flex flex-col gap-y-4 divide-y-[1px]",children:s!==null&&(s==null?void 0:s.map((d,a)=>e.jsxs("div",{className:"pt-7 pb-4",children:[e.jsxs("div",{className:"flex place-items-start gap-2",children:[e.jsx("div",{className:`w-[30px] h-[30px] rounded-full
                                        bg-black overflow-hidden`,children:e.jsx("img",{src:N.IMG_BASE_URL+d.image_url,alt:""})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm font-bold",children:d.fullname}),e.jsx("div",{className:"text-[12px]",children:`${d==null?void 0:d.city_name}, ${d==null?void 0:d.state_name}`}),e.jsx("div",{className:"text-[12px]",children:`${d==null?void 0:d.country_name}`})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{children:e.jsx(ee,{rating:d.rating})}),e.jsxs("div",{className:"text-[12px] flex gap-1 place-items-center",children:[e.jsx("b",{children:"Created at:"}),e.jsx("span",{className:"text-[12px]",children:Q(d.created_at)})]}),e.jsxs("div",{className:"text-[12px] flex gap-1 place-items-center",children:[e.jsx("b",{children:"Last Edited:"}),e.jsx("span",{className:"text-[12px]",children:Q(d.updated_at)})]}),e.jsx("div",{className:"text-[14px] mt-2",children:d.comment})]})]},a)))})]})},Je=({images:t,listing:s})=>{var g,w,x,v,S,I,L,B,b,R,h,f,y,E,D,A,$,W,_,X,U;const[l,c]=r.useState([]),n=O(),d=le(),[a,m]=r.useState([]);r.useEffect(()=>{let j=[...l];t&&(t.map((V,K)=>{K+1<12&&j.push(V)}),m(j))},[t]);const p=j=>{j<t.length&&(n.setDialog(!0),n.setSelectedSlide(j+1),n.setGallery(t),n.setListing(s))},i=j=>{d.setShow(!0),d.setGallery(t),d.setListing(s)};return e.jsxs("div",{className:"w-full h-auto mb-[32px] flex flex-col gap-2",children:[e.jsxs("div",{className:`h-[350px]
                grid grid-cols-12 gap-2`,children:[e.jsx("div",{className:`col-span-7 bg-red-300
                    row-span-2 rounded-md overflow-hidden
                    relative cursor-pointer`,onMouseDown:j=>p(0),children:e.jsx("img",{src:((g=t[0])==null?void 0:g.image_url)!==void 0&&((w=t[0])==null?void 0:w.image_url)!==null?N.IMG_BASE_URL+((x=t[0])==null?void 0:x.image_url):"https://accuvice.ng/wp-content/uploads/2016/06/placeholder.gif",alt:"",className:"object-cover h-full w-full"})}),e.jsx("div",{className:`col-span-5 bg-blue-300
                    rounded-md overflow-hidden
                    relative cursor-pointer`,onMouseDown:j=>p(1),children:e.jsx("img",{src:((v=t[1])==null?void 0:v.image_url)!==void 0&&((S=t[1])==null?void 0:S.image_url)!==null?N.IMG_BASE_URL+((I=t[1])==null?void 0:I.image_url):"https://accuvice.ng/wp-content/uploads/2016/06/placeholder.gif",alt:"",className:"object-cover h-full w-full"})}),e.jsx("div",{className:`col-span-5 bg-green-300
                    rounded-md overflow-hidden
                    relative cursor-pointer`,onMouseDown:j=>p(2),children:e.jsx("img",{src:((L=t[2])==null?void 0:L.image_url)!==void 0&&((B=t[2])==null?void 0:B.image_url)!==null?N.IMG_BASE_URL+((b=t[2])==null?void 0:b.image_url):"https://accuvice.ng/wp-content/uploads/2016/06/placeholder.gif",alt:"",className:"object-cover h-full w-full"})})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-1.5",children:[e.jsx("div",{className:`rounded overflow-hidden
                    relative cursor-pointer h-[100px]`,onMouseDown:j=>p(3),children:e.jsx("img",{src:((R=t[3])==null?void 0:R.image_url)!==void 0&&((h=t[3])==null?void 0:h.image_url)!==null?N.IMG_BASE_URL+((f=t[3])==null?void 0:f.image_url):"https://accuvice.ng/wp-content/uploads/2016/06/placeholder.gif",alt:"",className:"object-cover h-full w-full"})}),e.jsx("div",{className:`rounded overflow-hidden
                    relative cursor-pointer h-[100px]`,onMouseDown:j=>p(4),children:e.jsx("img",{src:((y=t[4])==null?void 0:y.image_url)!==void 0&&((E=t[4])==null?void 0:E.image_url)!==null?N.IMG_BASE_URL+((D=t[4])==null?void 0:D.image_url):"https://accuvice.ng/wp-content/uploads/2016/06/placeholder.gif",alt:"",className:"object-cover h-full w-full"})}),e.jsx("div",{className:`rounded-md overflow-hidden
                    relative bg-black cursor-pointer h-[100px]`,onMouseDown:j=>p(5),children:e.jsx("img",{src:((A=t[5])==null?void 0:A.image_url)!==void 0&&(($=t[5])==null?void 0:$.image_url)!==null?N.IMG_BASE_URL+((W=t[5])==null?void 0:W.image_url):"https://accuvice.ng/wp-content/uploads/2016/06/placeholder.gif",alt:"",className:"object-cover h-full w-full"})}),e.jsx("div",{className:`rounded-md overflow-hidden
                    relative bg-black cursor-pointer h-[100px]`,onMouseDown:j=>p(6),children:e.jsx("img",{src:((_=t[6])==null?void 0:_.image_url)!==void 0&&((X=t[6])==null?void 0:X.image_url)!==null?N.IMG_BASE_URL+((U=t[6])==null?void 0:U.image_url):"https://accuvice.ng/wp-content/uploads/2016/06/placeholder.gif",alt:"",className:"object-cover h-full w-full"})}),e.jsx("div",{className:`rounded-md overflow-hidden
                    relative bg-black text-white cursor-pointer
                    flex place-content-center place-items-center h-[100px]`,onMouseDown:j=>i(),children:(t==null?void 0:t.length)>7?`+${t.length-7}`:"View all"})]})]})},Ye=({images:t,listing:s})=>{const[l,c]=r.useState(0),n=r.useRef(0);r.useRef(0);const d=h=>{n.current=h.touches[0].clientX},a=h=>{const f=h.changedTouches[0].clientX,y=n.current-f;y>50?c(E=>(E+1)%t.length):y<-50&&c(E=>(E-1+t.length)%t.length)},[m,p]=r.useState(null);let i=r.useRef(null);const[g,w]=r.useState([]),x=O();le();const[v,S]=r.useState([]);r.useEffect(()=>{let h=[...g];t&&(t.map((f,y)=>{y+1<12&&h.push(f)}),S(h))},[t]);const I=h=>{h<t.length&&(x.setDialog(!0),x.setSelectedSlide(h+1),x.setGallery(t),x.setListing(s))};r.useEffect(()=>{t&&p(t)},[t]);const L=()=>{c(h=>h===0?m.length-1:h-1)},B=()=>{c(h=>h===m.length-1?0:h+1)},b=async()=>{i.current&&clearTimeout(i.current),B(),i.current=setTimeout(()=>{},15e3)},R=async()=>{i.current&&clearTimeout(i.current),L(),i.current=setTimeout(()=>{},15e3)};return r.useEffect(()=>{},[m]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:` w-full h-[300px] md:h-[500px] flex 
          overflow-hidden z-0
          `,children:m==null?void 0:m.map((h,f)=>e.jsx("img",{onTouchStart:d,onTouchEnd:a,onMouseDown:y=>I(f),src:N.IMG_BASE_URL+h.image_url,alt:"",style:{transform:`translateX(-${l*100}%)`},className:`object-cover w-full h-full 
                      block flex-shrink-0 flex-grow-0 transition-transform
                      ease-in-out duration-1000 cursor-pointer`},f))}),e.jsxs("div",{className:"z-[300]",children:[e.jsx("button",{onMouseDown:R,className:`block absolute top-0 bottom-0 
                                                  z-[300] p-[1rem] cursor-pointer left-0 group h-full 
                                                        transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full 
            place-content-center place-items-center group-hover:bg-white/30
            z-[300] transition duration-500 ease-in-out`,children:e.jsx(we,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("button",{onMouseDown:b,className:`block absolute top-0 bottom-0 
                                                        z-[300]    p-[1rem] cursor-pointer right-0 group 
                                                             transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full 
            flex place-content-center place-items-center group-hover:bg-white/30
            z-[300]   transition duration-500 ease-in-out
            `,children:e.jsx(ge,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})})]})]})})},Ze=({listing:t})=>{const[s,l]=r.useState("");return r.useEffect(()=>{t.gid&&z(t.gid).then(n=>{l(N.IMG_BASE_URL+n.image_url)})},[t]),e.jsxs("div",{className:"mt-12",children:[e.jsx("div",{className:"font-bold text-lg",children:"Business Phrases"}),e.jsx("div",{className:"flex flex-col gap-y-5 text-[14px] mt-4 whitespace-pre-wrap",children:t==null?void 0:t.business_phrases})]})},Qe=({listing:t})=>{const[s,l]=r.useState("");return r.useEffect(()=>{t.gid&&z(t.gid).then(n=>{l(N.IMG_BASE_URL+n.image_url)})},[t]),e.jsxs("div",{className:"mt-12",children:[e.jsx("div",{className:"font-bold text-lg",children:"Products"}),e.jsx("div",{className:"flex flex-col gap-y-5 text-[14px] mt-4 whitespace-pre-wrap",children:t==null?void 0:t.products})]})},Pe=({listing:t})=>{const[s,l]=r.useState("");return r.useEffect(()=>{t.gid&&z(t.gid).then(n=>{l(N.IMG_BASE_URL+n.image_url)})},[t]),e.jsxs("div",{className:"mt-12",children:[e.jsx("div",{className:"font-bold text-lg",children:"Services"}),e.jsx("div",{className:"flex flex-col gap-y-5 text-[14px] mt-4 whitespace-pre-wrap",children:t==null?void 0:t.services})]})},et=({listing:t})=>{const[s,l]=r.useState(""),[c,n]=r.useState(null);return r.useEffect(()=>{t!==null&&(a=>{const m=[];a!=null&&a.fbsocial&&m.push({media:a==null?void 0:a.fbsocial,icon:e.jsx(ye,{}),name:"Facebook",link:`https://facebook.com/${a==null?void 0:a.fbsocial}`}),a!=null&&a.fbsocial&&m.push({media:a==null?void 0:a.xsocial,icon:e.jsx(Be,{}),name:"Twitter",link:`https://facebook.com/${a==null?void 0:a.xsocial}`}),a!=null&&a.linksocial&&m.push({media:a==null?void 0:a.linksocial,icon:e.jsx(De,{}),name:"LinkedIn",link:`${a==null?void 0:a.linksocial}`}),a!=null&&a.website&&m.push({media:a==null?void 0:a.website,icon:e.jsx(Ge,{}),name:"Website",link:`${a==null?void 0:a.website}`}),a!=null&&a.email_address&&m.push({media:a==null?void 0:a.email_address,icon:e.jsx(ae,{}),name:"Email Address",link:`mailto:${a==null?void 0:a.email_address}`}),a!=null&&a.phone&&m.push({media:a==null?void 0:a.phone,icon:e.jsx(Ce,{}),name:"Phone",link:`tel:${a==null?void 0:a.phone}`}),n(m)})(t)},[t]),e.jsxs("div",{className:"mt-12",children:[e.jsx("div",{className:"font-bold text-lg",children:"Social Media"}),e.jsx("div",{className:"flex flex-col gap-y-5 text-[14px] mt-4 whitespace-pre-wrap",children:e.jsx("div",{className:"flex gap-3 flex-wrap",children:c!==null&&(c==null?void 0:c.map((d,a)=>e.jsx(M,{to:d==null?void 0:d.link,children:e.jsxs("div",{className:`border px-[5px] py-[2px] rounded
                                    cursor-pointer flex place-items-center
                                    gap-1 border-gray-400 
                                    hover:shadow-md`,children:[e.jsx("span",{className:"text-[12px]",children:d==null?void 0:d.icon}),d==null?void 0:d.name]},a)})))})})]})},tt=({listing:t,images:s,ratingsData:l})=>e.jsxs("div",{className:"",children:[e.jsx("div",{className:"px-[15px] w-full",children:e.jsxs("div",{className:"max-w-[1100px] w-full mx-auto bg-white",children:[l&&e.jsx(He,{ratingsData:l,rating:Number(l.rating_average)}),t&&e.jsx(We,{listing:t})]})}),(s==null?void 0:s.length)>0&&t&&e.jsx("div",{className:`bg-black h-fit md:hidden
                mt-4`,children:e.jsx(Ye,{images:s,listing:t})}),e.jsx("div",{className:" md:pt-4 md:px-[12px]",children:e.jsx("div",{className:"max-w-[1100px] w-full mx-auto bg-white",children:e.jsxs("div",{className:`grid grid-cols-12 gap-0 md:gap-0 relative
                    `,children:[e.jsxs("div",{className:" col-span-12 lg:col-span-8",children:[e.jsx("div",{className:"hidden md:block mt-0",children:(s==null?void 0:s.length)>0&&t&&e.jsx(Je,{images:s,listing:t})}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:`md:hidden ${(s==null?void 0:s.length)<=0&&"mt-5"}  md:mt-0 mb-5`,children:t&&e.jsx(P,{businessProfile:t})}),e.jsxs("div",{className:"px-[15px] md:px-[0px]",children:[e.jsx(Ve,{listing:t}),t&&e.jsx(et,{listing:t}),e.jsx(Oe,{listing:t}),t&&e.jsx(Ze,{listing:t}),t&&e.jsx(Qe,{listing:t}),t&&e.jsx(Pe,{listing:t}),e.jsx(Xe,{listing:t}),t&&e.jsx(qe,{listing:t})]})]})]}),e.jsx("div",{className:"col-span-12 lg:col-span-4 hidden lg:block",children:e.jsx("div",{className:" sticky top-[100px]",children:t&&e.jsx(P,{businessProfile:t})})})]})})})]}),at=({title:t,subtitle:s,category:l,limit:c})=>{const[n,d]=r.useState(""),[a,m]=r.useState(""),[p,i]=r.useState([]),g="https://oxbyt.com";r.useEffect(()=>{t&&s&&(d(t),m(s))},[t,s]);let w=async(x,v)=>{if(v&&x){let S=await be(x,v);i(S)}};return r.useEffect(()=>{c&&l&&w(l,c)},[c,l]),e.jsx("div",{className:"px-[15px]",children:e.jsx("div",{className:"max-w-[1100px] mx-auto w-full",children:e.jsxs("div",{className:"mt-10 border-t pt-5",children:[e.jsxs("div",{className:" mb-[20px] ",children:[e.jsx("div",{className:"font-semibold text-xl",children:n}),e.jsx("div",{className:"text-sm -mt-[2px]",children:a})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-3 gap-y-4",children:p==null?void 0:p.map((x,v)=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(M,{to:`/${x.gid}`,children:e.jsx("div",{className:`relative h-[120px]
                                                    md:h-[180px]`,children:e.jsx("img",{className:`object-cover w-full h-full
                                                    text-sm`,src:x!=null&&x.image_url?g+(x==null?void 0:x.image_url):"images/placeholder.gif",alt:x.title})})})}),e.jsx("div",{className:`mt-1 text-[15px] tracking-tight 
                                     truncate`,children:x.title}),e.jsx("div",{className:"mt-1",children:e.jsx(Ie,{rating:x.avg_rating})}),e.jsx("div",{className:`text-[11px] mt-[5px] tracking-tight
                                    leading-[1.2em]`,children:x.short_description.substring(0,100)})]},v))})]})})})},ut=()=>{const t=me(),s=t.listing,l=t.gallery,c=t.ratingsData;return e.jsx(ze,{children:e.jsxs(Ue,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(Ae,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx($e,{})}),s.gid!==null&&s.gid!==void 0&&e.jsx(tt,{listing:s,images:l,ratingsData:c}),e.jsx(at,{category:s==null?void 0:s.category,limit:6,title:`Related: ${s==null?void 0:s.category}`,subtitle:"Related based on the same category."}),e.jsx(Me,{})]})})};export{ut as default};
