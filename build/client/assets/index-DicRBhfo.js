import{j as t}from"./jsx-runtime-0DLF9kdB.js";import{r as e,b}from"./components-qdL6XBti.js";import{u as j}from"./NotificationContext-BN71CfFW.js";import{P as w,z as y,p as N,I as S,J as A,O as P}from"./lib-gdbuLEb8.js";import{A as B}from"./AccountLayout-DqEKwYFJ.js";import{C as E}from"./ContentLayout-CstOjNHK.js";import{u as L}from"./AuthContext-BnKqVxnU.js";import"./UserMenu-CECLlKRK.js";import"./WhiteLogo-BTe8ysqQ.js";import"./index-CeMHKdet.js";import"./HomeNav-CYWF0wT0.js";import"./SrchNavbar-AcngZQKL.js";import"./json-BNowKBeR.js";import"./BusinessMenu-CriD0Rgx.js";const _=({userGuid:n,businessGuid:c})=>{const[a,m]=e.useState(null),[i,f]=e.useState(!0),o=j(),[x,l]=e.useState(!1);e.useEffect(()=>{try{w(n,c).then(s=>{m(s[0].active_status),f(!1)})}catch{alert("Could not fetch business")}},[]);const u=async()=>{l(!0),o.notify(),await new Promise(r=>setTimeout(r,1e3));const s=!a;try{const r=`/api/listing/activate/${n}/${c}`,p=y.BASE_URL+r,d=await fetch(p,{method:"PUT",headers:N,body:JSON.stringify({user_guid:n,business_guid:c,active:s})});o.alertReload("Success","Completed!"),await new Promise(v=>setTimeout(v,1e3))}catch{}finally{m(s)}};return i?t.jsx("div",{children:"Loading..."}):t.jsx("div",{children:t.jsxs("div",{className:`p-6  rounded  max-w-2xl
        mx-auto mt-12`,children:[t.jsx("div",{className:"mb-6 text-[13.5px] border-b pb-3",children:"If you deactivate your data all your data will still be intact, however, it will no longer be visible across all Garssete.com platforms."}),t.jsxs("h2",{className:"text-lg mb-1 font-semibold",children:[a?"Deactivate":"Activate","Â Business or Organization"]}),t.jsx("div",{className:"mb-5",children:a?"Your data is active. It will be visible across all Garssete.com platforms.":"Your data is deactivated, it will no longer be visible. However, all your data will still be intact."}),t.jsx("div",{className:"border-[3px] border-gray-100 p-5 rounded-lg shadow",children:t.jsxs("label",{className:`flex items-center space-x-4 hover:cursor-pointer
                        `,children:[t.jsx("input",{type:"checkbox",checked:a??!1,onChange:u,className:"w-8 h-8"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold",children:a?"Active":"Inactive"}),t.jsxs("div",{className:"font-normal text-sm",children:["Click to ",a?"deactivate":"activate"," this business profile."]})]})]})})]})})},W=()=>{e.useEffect(()=>{S(localStorage)},[]);const[n,c]=e.useState(!0),[a,m]=e.useState(null),[i,f]=e.useState(""),[o,x]=e.useState(""),{business_guid:l,user_guid:u}=b(),[s,r]=e.useState(null);return L()?(e.useEffect(()=>{const h=async(d,v)=>{f(d),x(v);const g=await P(d||"");r(g)};try{l&&u&&h(l,u)}catch(d){A(d)}},[l,u]),e.useEffect(()=>{i&&o&&s&&(m({businessGuid:i,userGuid:o,businessProfile:s}),c(!1))},[i,o,s]),n?t.jsx("div",{className:"flex justify-center items-center h-screen",children:t.jsx("div",{className:"text-lg",children:"Loading..."})}):t.jsx(B,{children:t.jsx(E,{title:`${s.active_status?"Deactivate":"Activate"} Business Profile`,businessGuid:i,data:a,businessProfile:s,children:a&&t.jsx(_,{userGuid:o,businessGuid:i})})})):null};export{W as default};
