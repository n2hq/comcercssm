import{j as t}from"./jsx-runtime-0DLF9kdB.js";import{r as o,L as D,R as te,c as ve}from"./components-DN9bEK-g.js";import{I as ye,e as Ne,B as we,a as _e}from"./index-TQUiWdzl.js";import{u as Q}from"./SliderContext-CZFU22q-.js";import{u as ne}from"./AuthContext-Cppis7Ha.js";import{u as be,s as Se,z as O}from"./index-CORT_df8.js";import{u as de}from"./NotificationContext-CmxqxSem.js";import{w as X,f as E,D as ke,E as Re,H as se,I as ge,J as Ee,K as Le,L as $e,M as Ce,N as Ge,O as Be,P as K,m as Te,r as xe,h as Ie,A as Me}from"./lib-Ddo6mlOM.js";import{i as Ae,j as De,k as Fe,l as me}from"./index-BkU2dnIz.js";import{f as Ue,g as ze,h as Oe,i as We,j as Ke,k as Xe}from"./index-3pbSN0sp.js";import{b as qe}from"./UserMenu-CnuPIl-W.js";import{L as Ve}from"./LatestStarRating-D2KbueAY.js";import{H as Je}from"./HomeNav-CDlHIXoa.js";import{T as Ye}from"./TopAd-Cm4tYdQx.js";import{L as Qe,V as Ze}from"./VerticalHeight-CdHKkwRn.js";import{C as He,F as Pe}from"./FooterSection-jSN1f8Wa.js";import"./WhiteLogo-CBJbnFuS.js";import"./SearchNavbar-DyBhnST5.js";const ue=o.createContext(null);function he(){return o.useContext(ue)}const et=({children:e})=>{const[s,c]=o.useState(!1),[a,x]=o.useState(null),l=Q(),[n,r]=o.useState(null),f="https://tpics.gasimg.com",v=()=>c(!1);let h={setShow:c,setGallery:x,setListing:r};const S=i=>{l.setDialog(!0),l.setSelectedSlide(i+1),l.setGallery(a)};return o.useEffect(()=>{const i=w=>{w.key==="Escape"&&v()};return s&&document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[s]),t.jsxs(ue.Provider,{value:h,children:[s&&t.jsxs("div",{onMouseDown:i=>c(!1),className:`flex w-screen h-screen bg-black/40 
                        z-[20000] fixed top-0 left-0 right-0 bottom-0
                        place-items-center place-content-center px-[15px]`,children:[t.jsx("div",{onMouseDown:i=>i.stopPropagation(),className:`min-w-[95%] w-[95%] sm:w-[95%] md:w-[80%] h-[80%] max-h-[80%] 
                            mx-auto bg-white rounded-lg shadow-lg shadow-black/50 
                            space-y-6 z-[3100] overflow-hidden`,children:t.jsxs("div",{className:"w-full h-full",children:[t.jsx("div",{className:"border-b py-3 px-3",children:t.jsxs("div",{className:`font-bold text-gray-700
                                    text-xl w-[80%]  truncate`,children:["Gallery for ",n&&(n==null?void 0:n.title)]})}),t.jsx("div",{className:` 
                                h-full overflow-y-auto pt-2 px-2 pb-2
                                bg-white `,children:t.jsx("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-2",children:a&&(a==null?void 0:a.map((i,w)=>t.jsx("div",{onClick:()=>S(w),className:`relative hover:cursor-pointer
                                                 bg-red-200 h-[80px] md:h-[100px] lg:h-[120px] rounded-md
                                                 overflow-hidden`,children:t.jsx("img",{className:"object-cover w-full h-full",src:f+i.image_url,alt:""})})))})})]})}),t.jsx("div",{onMouseDown:()=>v(),className:`w-[50px] h-[50px] z-[300] bg-white
                                flex place-content-center place-items-center
                                rounded-full absolute left-2 top-2 cursor-pointer
                                hover:bg-white/40 transition duration-1000 ease-in-out`,children:t.jsx(ye,{className:"text-[30px]"})})]}),e]})},W=100,pe=o.createContext(null);function tt(){return o.useContext(pe)}const st=O.object({fullname:O.any(),rating:O.any(),comment:O.any()});function ct({children:e}){var Z,H,P;const[s,c]=o.useState(!1),[a,x]=o.useState(!1),[l,n]=o.useState(null),[r,f]=o.useState(void 0),[v,h]=o.useState(""),S=de(),[i,w]=o.useState(5),m=ne();if(!m)return null;let{user:y}=m;const[k,$]=o.useState(null),[C,L]=o.useState(!1),j=p=>p.trim()===""?0:p.trim().split(/\s+/).length,N=p=>{let b=p.target.value,T=p.target.name;$(M=>({...M,[T]:b}))},{register:_,handleSubmit:u,getValues:d,setValue:R,watch:I,reset:F,setError:q,formState:{errors:G,isSubmitting:V}}=be({resolver:Se(st)}),U=p=>{const b=p.target.value,T=b.trim().split(/\s+/);if(T.length<=W)R("text",b),L(!1);else{L(!0);const M=T.slice(0,W).join(" ");R("text",M)}},z=async p=>{S.notify("Working..."),await new Promise(A=>setTimeout(A,1e3));const b=y.guid,T=l.gid;p.user_guid=b,p.business_guid=T;const je="https://garssete.gasimg.com"+"/api/rating";try{const A=await fetch(je,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),fe=await A.json();A.ok?S.alert("Success","Rating submitted successfully!"):S.alert("Error",fe.error)}catch(A){S.alert("",A.message)}};let J={show:s,setShow:c,setListing:n,reset:F,setRatingData:f,validateData:async(p,b)=>{if((p==null?void 0:p.length)===0){let T=(b==null?void 0:b.first_name)||"",M=(b==null?void 0:b.last_name)||"",ee=T+" "+M;R("fullname",ee)}}};const Y=I("text")||"",ie=p=>{Y.trim().split(/\s+/).length>=W&&p.key!=="Backspace"&&p.key!=="Delete"&&!p.ctrlKey?(p.preventDefault(),L(!0)):L(!1)};return o.useEffect(()=>{const p=b=>{b.key==="Escape"&&c(!1)};return s&&document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[s]),t.jsxs(pe.Provider,{value:J,children:[s&&t.jsx("div",{className:`flex w-screen h-screen bg-black/40 z-[3000] 
                fixed top-0 left-0 right-0 bottom-0 place-items-center place-content-center`,children:t.jsxs("div",{className:"w-[450px] h-fit mx-auto p-6 bg-white rounded-xl shadow-md space-y-6",children:[t.jsx("h2",{className:"text-xl font-bold",children:"Create/Edit Rating"}),t.jsxs("form",{onSubmit:u(z),className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-1 text-sm font-semibold",children:"Full Name"}),t.jsx("input",{..._("fullname",{onChange:N}),type:"text",className:`w-full px-3 py-2 border rounded-md
                                        text-sm`,placeholder:"Enter Business GUID"}),((Z=G.fullname)==null?void 0:Z.message)&&t.jsx("div",{className:"text-red-500 mt-1 text-sm",children:G.fullname.message.toString()})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-1 text-sm font-semibold",children:"Stars"}),t.jsx("select",{..._("rating",{onChange:p=>{w(Number(p.target.value)),N(p)}}),className:`w-full px-3 py-2 border rounded-md
                                        text-sm`,children:[5,4,3,2,1].map(p=>t.jsxs("option",{value:p,children:[p," Star",p>1?"s":""]},p))}),((H=G.rating)==null?void 0:H.message)&&t.jsx("div",{className:"text-red-500 mt-1 text-sm",children:G.rating.message.toString()})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex place-content-between",children:[t.jsx("label",{className:"block mb-1 text-sm font-semibold",children:"Comment"}),t.jsxs("label",{className:" text-gray-600 text-sm",children:["Word Count: ",t.jsx("strong",{children:j(v)})]})]}),t.jsx("textarea",{..._("comment",{onChange:p=>{j(v)<=W?(h(p.target.value),U(p),N(p)):p.preventDefault()}}),onKeyDown:ie,className:`w-full px-3 py-2 border rounded-md 
                                        text-sm`,placeholder:"Write your review...",rows:4}),C&&t.jsx("div",{className:"text-red-500 mt-0 text-sm",children:"Maximum maximumWords words allowed."}),((P=G.comment)==null?void 0:P.message)&&t.jsx("div",{className:"text-red-500 mt-0 text-sm",children:G.comment.message.toString()})]}),t.jsxs("div",{className:"w-full grid grid-cols-2 gap-2",children:[t.jsx("button",{onClick:()=>c(!1),className:`w-full bg-red-200 rounded-md
                                        hover:bg-red-100 text-sm`,children:"Close"}),t.jsx("button",{type:"submit",disabled:a,className:`w-full bg-blue-600 text-white py-2 
                                        rounded-md hover:bg-blue-700 text-sm`,children:a?"Submitting...":"Submit Rating"})]})]})]})}),e]})}const at=({listing:e})=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`text-[19px] md:text-[24px]
                font-bold mt-[5px] leading-[1.2em] border-b pb-1`,children:e==null?void 0:e.title}),t.jsxs("div",{className:"mt-1.5 leading-[1.2em]",children:[e!=null&&e.address_one?`${e==null?void 0:e.address_one}, `:"",e!=null&&e.address_two?`${e==null?void 0:e.address_two}, `:"",e!=null&&e.city_name?`${e==null?void 0:e.city_name}, `:"",e!=null&&e.state_name?`${e==null?void 0:e.state_name}, `:"",e==null?void 0:e.country_name]})]}),B=({title:e})=>t.jsx("div",{className:`text-[19px] font-bold
                border-b mb-6`,children:e}),rt=({listing:e})=>{const[s,c]=o.useState("");return o.useEffect(()=>{e.gid&&X(e.gid).then(x=>{c(E.IMG_BASE_URL+x.image_url)})},[e]),t.jsxs("div",{className:"mt-12",children:[t.jsx(B,{title:"About this business"}),t.jsxs("div",{className:`flex place-items-start place-content-start
                gap-2 mt-4 mb-3`,children:[t.jsx("div",{className:`rounded-full bg-black w-[30px] h-[30px]
                    overflow-hidden relative`,children:t.jsx("img",{className:"object-cover w-full h-full",src:s,alt:""})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{className:"text-md font-bold tracking-tight leading-[1.2em]",children:e.title}),t.jsx("div",{className:"text-[12px] capitalize",children:e.category})]})]}),t.jsx("div",{className:"flex flex-col gap-y-5 text-[14px] mt-4 whitespace-pre-wrap",children:e==null?void 0:e.long_description})]})},ot=({listing:e})=>{const s=tt(),{user:c}=ne(),a=de();o.useEffect(()=>{e!=null&&e.gid&&(c!=null&&c.guid)&&(s.setListing(e),ke(c.guid,e.gid).then(n=>{(n==null?void 0:n.length)!==0?(s.reset(n),s.setRatingData(n)):s.validateData(n,c)}))},[e,c]);const x=n=>{n?(a.cancel(),window.location.href="/signin"):a.cancel()},l=()=>{(c==null?void 0:c.guid)===null||(c==null?void 0:c.guid)===void 0?a.confirm("Login to continue",x):s.setShow(!0)};return t.jsx("div",{className:"w-full mt-0 ",children:t.jsx("div",{className:"",children:t.jsx("button",{onClick:()=>l(),className:`bg-blue-500 text-white flex flex-col
                items-center pt-[2px] pb-[3px] w-full `,children:"Write Review"})})})},ce=({businessProfile:e})=>t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:`  md:bg-white
            md:rounded overflow-hidden pt-[30px]
            pb-[15px] bg-[blue]/0 text-black md:black
            md:text-black  border-[1px] border-gray-300/70`,children:[t.jsx("div",{className:`font-bold text-[15px] pb-2 
                   px-[20px]`,children:"Property Address"}),t.jsx("div",{className:"h-[25px]"}),t.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-3 lg:grid-cols-1 
                text-[14px]  tracking-tight
                md:space-x-4 lg:space-x-0 md:text-black/80 font-sans
                `,children:[t.jsxs("div",{className:"px-[20px] space-y-4 lg:space-y-4",children:[t.jsx("div",{className:" w-full",children:t.jsxs("div",{className:"grid grid-cols-12",children:[t.jsx("div",{className:"col-span-1 ",children:t.jsx(Ae,{className:"text-[20px]"})}),t.jsxs("div",{className:`col-span-11 leading-[1.2em] ml-2
                            text-[12px]`,children:[(e==null?void 0:e.address_one)+", ",(e==null?void 0:e.address_two)!==null?(e==null?void 0:e.address_two)+", ":"",(e==null?void 0:e.city_name)!==null?(e==null?void 0:e.city_name)+", ":"",(e==null?void 0:e.state_name)!==null?(e==null?void 0:e.state_name)+", ":"",(e==null?void 0:e.zipcode)!==null?(e==null?void 0:e.zipcode)+", ":"",e==null?void 0:e.country_name]})]})}),t.jsx("div",{className:"  w-full",children:t.jsx(D,{to:`tel:${e==null?void 0:e.phone}`,children:t.jsxs("div",{className:"grid grid-cols-12",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(De,{className:"text-[20px]"})}),t.jsx("div",{className:`col-span-11 leading-[1.2em] ml-2
                                    text-[12px]`,children:e==null?void 0:e.phone})]})})}),t.jsx("div",{className:"  w-full",children:t.jsx(D,{to:`${e==null?void 0:e.website}`,children:t.jsxs("div",{className:"grid grid-cols-12",children:[t.jsx("div",{className:`col-span-1 relative top-0
                            `,children:t.jsx(Fe,{className:"text-[22px]"})}),t.jsx("div",{className:`col-span-11 leading-[1.2em] ml-2 top-0
                            flex place-items-center text-[12px]`,children:"Website"})]})})}),t.jsx("div",{className:"  w-full",children:t.jsx(D,{to:`mailto:${e==null?void 0:e.email_address}`,children:t.jsxs("div",{className:"grid grid-cols-12",children:[t.jsx("div",{className:`col-span-1 relative top-0
                            `,children:t.jsx(me,{className:"text-[20px]"})}),t.jsx("div",{className:`col-span-11 leading-[1.2em] ml-2 top-0
                            flex place-items-center text-[12px]`,children:"Email Address"})]})})})]}),t.jsx("div",{children:t.jsx("div",{className:`bg-blue-500 mt-[40px] mx-[15px]
                        text-white text-center py-2 rounded`,children:e&&t.jsx(ot,{listing:e})})})]})]})}),lt=({listing:e})=>{const[s,c]=o.useState(void 0);return o.useEffect(()=>{Re(e.gid).then(a=>{c(a)})},[e.business_guid]),t.jsxs("div",{className:" mt-12",children:[t.jsx(B,{title:"Features"}),t.jsx("div",{className:"grid grid-cols-2 gap-4 mt-3",children:s==null?void 0:s.map((a,x)=>t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{className:"font-bold",children:a.name}),t.jsx("div",{className:" mt-[-2px] text-black tracking-normal leading-snug",children:a.user_description||a.description})]},x))})]})},nt=({listing:e})=>t.jsxs("div",{className:"mt-4",children:[t.jsx(B,{title:"Intro"}),t.jsx("div",{className:" text-[14px] flex flex-col gap-y-4 whitespace-pre-wrap ",children:e.short_description})]}),ae=({rating:e=3.5,maxStars:s=5})=>{const c=[];for(let a=1;a<=s;a++)a<=e?c.push(t.jsx("span",{className:"text-yellow-500 text-lg",children:t.jsx(Ue,{})},a)):c.push(t.jsx("span",{className:"text-yellow-500 text-lg",children:t.jsx(ze,{})},a));return t.jsxs("div",{className:" flex w-full place-items-center gap-2 mt-0",children:[t.jsx("div",{className:"flex  gap-x-[3px] -mt-[2px]",children:c}),t.jsx("div",{className:"text-gray-400",children:t.jsx(Ne,{className:"text-[15px] text-yellow-400"})}),t.jsxs("div",{className:" text-sm",children:["Rating: ",Number(e).toFixed(0)]})]})},dt=({listing:e})=>{const[s,c]=o.useState([]),[a,x]=o.useState({});return o.useEffect(()=>{const l=async r=>{r&&await ge(r).then(f=>{c(f)})},n=async r=>{r&&await Ee(r).then(f=>{x(f)})};e.gid&&(l(e.gid),n(e.gid))},[e]),t.jsxs("div",{className:"mt-12",children:[t.jsx(B,{title:"Reviews"}),t.jsxs("div",{className:"-mt-1 text-[14px] flex flex-col -gap-y-1 font-light",children:[t.jsx("div",{className:"font-bold",children:"Overall Rating:"}),a&&t.jsx(ae,{rating:a==null?void 0:a.rating_average})]}),t.jsx("hr",{className:"mt-3"}),t.jsx("div",{className:"flex flex-col gap-y-4 divide-y-[1px]",children:s!==null&&(s==null?void 0:s.map((l,n)=>t.jsxs("div",{className:"pt-7 pb-4",children:[t.jsxs("div",{className:"flex place-items-start gap-2",children:[t.jsx("div",{className:`w-[30px] h-[30px] rounded-full
                                        bg-black overflow-hidden`,children:t.jsx("img",{src:E.IMG_BASE_URL+(l==null?void 0:l.image_url),alt:""})}),t.jsxs("div",{className:"flex flex-col -space-y-1.5",children:[t.jsx("div",{className:"text-lg font-bold",children:l.fullname}),(l==null?void 0:l.city_name)!==null&&(l==null?void 0:l.state_name)&&t.jsx("div",{className:"text-[11px]",children:`${l==null?void 0:l.city_name}, ${l==null?void 0:l.state_name}`}),(l==null?void 0:l.country_name)!==null&&t.jsx("div",{className:"text-[11px]",children:`${l==null?void 0:l.country_name}`})]})]}),t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{children:t.jsx(ae,{rating:l.rating})}),t.jsxs("div",{className:"text-[12px] flex gap-1 place-items-center",children:[t.jsx("b",{children:"Created at:"}),t.jsx("span",{className:"text-[12px]",children:se(l.created_at)})]}),t.jsxs("div",{className:"text-[12px] flex gap-1 place-items-center",children:[t.jsx("b",{children:"Last Edited:"}),t.jsx("span",{className:"text-[12px]",children:se(l.updated_at)})]}),t.jsx("div",{className:"text-[14px] mt-2",children:l.comment})]})]},n)))})]})},xt=({images:e,listing:s})=>{var i,w,m,y,k,$,C,L,j,N,_,u,d,R,I,F,q,G,V,U,z;const[c,a]=o.useState([]),x=Q(),l=he(),[n,r]=o.useState("images/abstract_placeholder.jpg"),[f,v]=o.useState([]);o.useEffect(()=>{let g=[...c];e&&(e.map((J,Y)=>{Y+1<12&&g.push(J)}),v(g))},[e]);const h=g=>{g<e.length&&(x.setDialog(!0),x.setSelectedSlide(g+1),x.setGallery(e),x.setListing(s))},S=g=>{l.setShow(!0),l.setGallery(e),l.setListing(s)};return t.jsxs("div",{className:"w-full h-auto mb-[32px] flex flex-col gap-2",children:[t.jsxs("div",{className:`h-[350px]
                grid grid-cols-12 gap-[7px]`,children:[t.jsx("div",{className:`col-span-7 bg-black
                    row-span-2 rounded-xl overflow-hidden
                    relative cursor-pointer`,onMouseDown:g=>h(0),children:t.jsx("img",{src:((i=e[0])==null?void 0:i.image_url)!==void 0&&((w=e[0])==null?void 0:w.image_url)!==null?E.IMG_BASE_URL+((m=e[0])==null?void 0:m.image_url):n,alt:"",className:"object-cover h-full w-full"})}),t.jsx("div",{className:`col-span-5 bg-black
                    rounded-xl overflow-hidden h-full
                    relative cursor-pointer`,onMouseDown:g=>h(1),children:t.jsx("img",{src:((y=e[1])==null?void 0:y.image_url)!==void 0&&((k=e[1])==null?void 0:k.image_url)!==null?E.IMG_BASE_URL+(($=e[1])==null?void 0:$.image_url):n,alt:"",className:"object-cover h-full w-full"})}),t.jsx("div",{className:`col-span-5 bg-black
                    rounded-xl overflow-hidden h-full
                    relative cursor-pointer`,onMouseDown:g=>h(2),children:t.jsx("img",{src:((C=e[2])==null?void 0:C.image_url)!==void 0&&((L=e[2])==null?void 0:L.image_url)!==null?E.IMG_BASE_URL+((j=e[2])==null?void 0:j.image_url):n,alt:"",className:"object-cover h-full w-full"})})]}),t.jsxs("div",{className:"grid grid-cols-5 gap-[7px] mt-[2px]",children:[t.jsx("div",{className:`rounded-xl overflow-hidden
                    relative cursor-pointer h-[100px] bg-black`,onMouseDown:g=>h(3),children:t.jsx("img",{src:((N=e[3])==null?void 0:N.image_url)!==void 0&&((_=e[3])==null?void 0:_.image_url)!==null?E.IMG_BASE_URL+((u=e[3])==null?void 0:u.image_url):n,alt:"",className:"object-cover h-full w-full"})}),t.jsx("div",{className:`rounded-xl overflow-hidden
                    relative cursor-pointer h-[100px] bg-black`,onMouseDown:g=>h(4),children:t.jsx("img",{src:((d=e[4])==null?void 0:d.image_url)!==void 0&&((R=e[4])==null?void 0:R.image_url)!==null?E.IMG_BASE_URL+((I=e[4])==null?void 0:I.image_url):n,alt:"",className:"object-cover h-full w-full"})}),t.jsx("div",{className:`rounded-xl overflow-hidden
                    relative bg-black cursor-pointer h-[100px]`,onMouseDown:g=>h(5),children:t.jsx("img",{src:((F=e[5])==null?void 0:F.image_url)!==void 0&&((q=e[5])==null?void 0:q.image_url)!==null?E.IMG_BASE_URL+((G=e[5])==null?void 0:G.image_url):n,alt:"",className:"object-cover h-full w-full"})}),t.jsx("div",{className:`rounded-xl overflow-hidden
                    relative bg-black cursor-pointer h-[100px]`,onMouseDown:g=>h(6),children:t.jsx("img",{src:((V=e[6])==null?void 0:V.image_url)!==void 0&&((U=e[6])==null?void 0:U.image_url)!==null?E.IMG_BASE_URL+((z=e[6])==null?void 0:z.image_url):n,alt:"",className:"object-cover h-full w-full"})}),t.jsx("div",{className:`rounded-xl overflow-hidden
                    relative bg-black text-white cursor-pointer
                    flex place-content-center place-items-center h-[100px]`,onMouseDown:g=>S(),children:(e==null?void 0:e.length)>7?`+${e.length-7}`:"View all"})]})]})},mt=({images:e,listing:s})=>{const[c,a]=o.useState(0),x=o.useRef(0);o.useRef(0);const l=j=>{x.current=j.touches[0].clientX},n=j=>{const N=j.changedTouches[0].clientX,_=x.current-N;_>50?a(u=>(u+1)%e.length):_<-50&&a(u=>(u-1+e.length)%e.length)},[r,f]=o.useState(null);let v=o.useRef(null);const[h,S]=o.useState([]),i=Q();he();const[w,m]=o.useState([]);o.useEffect(()=>{let j=[...h];e&&(e.map((N,_)=>{_+1<12&&j.push(N)}),m(j))},[e]);const y=j=>{j<e.length&&(i.setDialog(!0),i.setSelectedSlide(j+1),i.setGallery(e),i.setListing(s))};o.useEffect(()=>{e&&f(e)},[e]);const k=()=>{a(j=>j===0?r.length-1:j-1)},$=()=>{a(j=>j===r.length-1?0:j+1)},C=async()=>{v.current&&clearTimeout(v.current),$(),v.current=setTimeout(()=>{},15e3)},L=async()=>{v.current&&clearTimeout(v.current),k(),v.current=setTimeout(()=>{},15e3)};return o.useEffect(()=>{},[r]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:` w-full h-[300px] md:h-[500px] flex 
          overflow-hidden z-0
          `,children:r==null?void 0:r.map((j,N)=>t.jsx("img",{onTouchStart:l,onTouchEnd:n,onMouseDown:_=>y(N),src:E.IMG_BASE_URL+j.image_url,alt:"",style:{transform:`translateX(-${c*100}%)`},className:`object-cover w-full h-full 
                      block flex-shrink-0 flex-grow-0 transition-transform
                      ease-in-out duration-1000 cursor-pointer`},N))}),t.jsxs("div",{className:"z-[300]",children:[t.jsx("button",{onMouseDown:L,className:`block absolute top-0 bottom-0 
                                                  z-[300] p-[1rem] cursor-pointer left-0 group h-full 
                                                        transition duration-1000 ease-in-out`,children:t.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full 
            place-content-center place-items-center group-hover:bg-white/30
            z-[300] transition duration-500 ease-in-out`,children:t.jsx(we,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),t.jsx("button",{onMouseDown:C,className:`block absolute top-0 bottom-0 
                                                        z-[300]    p-[1rem] cursor-pointer right-0 group 
                                                             transition duration-1000 ease-in-out`,children:t.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full 
            flex place-content-center place-items-center group-hover:bg-white/30
            z-[300]   transition duration-500 ease-in-out
            `,children:t.jsx(_e,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})})]})]})})},ut=({listing:e})=>{const[s,c]=o.useState("");return o.useEffect(()=>{e.gid&&X(e.gid).then(x=>{c(E.IMG_BASE_URL+x.image_url)})},[e]),t.jsxs("div",{className:"mt-12",children:[t.jsx(B,{title:"Business Phrases"}),t.jsx("div",{className:"flex flex-col gap-y-5 text-[14px] mt-4 whitespace-pre-wrap",children:e==null?void 0:e.business_phrases})]})},ht=({listing:e})=>{const[s,c]=o.useState("");return o.useEffect(()=>{e.gid&&X(e.gid).then(x=>{c(E.IMG_BASE_URL+x.image_url)})},[e]),t.jsxs("div",{className:"mt-12",children:[t.jsx(B,{title:"Products"}),t.jsx("div",{className:"flex flex-col gap-y-5 text-[14px] mt-4 whitespace-pre-wrap",children:e==null?void 0:e.products})]})},pt=({listing:e})=>{const[s,c]=o.useState("");return o.useEffect(()=>{e.gid&&X(e.gid).then(x=>{c(E.IMG_BASE_URL+x.image_url)})},[e]),t.jsxs("div",{className:"mt-12",children:[t.jsx(B,{title:"Services"}),t.jsx("div",{className:"flex flex-col gap-y-5 text-[14px] mt-4 whitespace-pre-wrap",children:e==null?void 0:e.services})]})},it=({listing:e})=>{const[s,c]=o.useState(""),[a,x]=o.useState(null);function l(n){let r=null;switch(n==null?void 0:n.media_id){case"facebook":r=t.jsx(Be,{});break;case"twitterx":r=t.jsx(Xe,{});break;case"linkedin":r=t.jsx(Ke,{});break;case"instagram":r=t.jsx(We,{});break;case"pinterest":r=t.jsx(Ge,{});break;case"youtube":r=t.jsx(Ce,{});break;case"vimeo":r=t.jsx($e,{});break}return r}return o.useEffect(()=>{e!==null&&(async r=>{const f=[];(await Le(r.gid)).map((h,S)=>{f.push({media:h==null?void 0:h.name,icon:l(h),name:h==null?void 0:h.name,link:`${h==null?void 0:h.base_url}${h==null?void 0:h.user_description}`})}),r!=null&&r.website&&f.push({media:r==null?void 0:r.website,icon:t.jsx(qe,{}),name:"Website",link:`${r==null?void 0:r.website}`}),r!=null&&r.email_address&&f.push({media:r==null?void 0:r.email_address,icon:t.jsx(me,{}),name:"Email Address",link:`mailto:${r==null?void 0:r.email_address}`}),r!=null&&r.phone&&f.push({media:r==null?void 0:r.phone,icon:t.jsx(Oe,{}),name:"Phone",link:`tel:${r==null?void 0:r.phone}`}),x(f)})(e)},[e]),t.jsxs("div",{className:"mt-12",children:[t.jsx(B,{title:"Social Media"}),t.jsx("div",{className:"flex flex-col gap-y-5 text-[14px] mt-4 whitespace-pre-wrap",children:t.jsx("div",{className:"flex gap-3 flex-wrap",children:a!==null&&(a==null?void 0:a.map((n,r)=>t.jsx(D,{to:n==null?void 0:n.link,children:t.jsxs("div",{className:`border px-[8px] py-[2px] 
                                    cursor-pointer flex place-items-center rounded-full
                                    gap-1 border-gray-400 bg-white hover:bg-black
                                    text-black hover:text-white
                                    hover:shadow-md`,children:[t.jsx("span",{className:"text-[12px]",children:n==null?void 0:n.icon}),n==null?void 0:n.name]},r)},r)))})})]})},re=({data:e})=>{const[s,c]=o.useState("");return o.useEffect(()=>{const a=x=>{x>4?c("Superb"):x>3&&x<4||x>2&&x<3?c("Very Good"):x>1&&x<2?c("Good"):c("Poor")};(e==null?void 0:e.rating)!==null?a(Number(e==null?void 0:e.rating)):a(0)},[e]),t.jsx("div",{className:`
             md:border py-[12px] px-[12px] md:mb-3  rounded`,children:t.jsxs("div",{className:`flex place-content-between gap-1
                `,children:[t.jsxs("div",{className:`flex flex-col place-items-center -space-y-1.5
                    place-content-start w-full `,children:[t.jsx("div",{className:"font-sans text-[13px] font-semibold text-blue-900 flex place-items-start  w-full -ml-[1.5px]",children:"Category"}),t.jsx("div",{className:" font-normal text-black capitalize text-[11px] tracking-normal  w-full",children:e==null?void 0:e.category})]}),t.jsxs("div",{className:"w-full flex flex-col place-items-end place-content-center -space-y-2 ",children:[t.jsx("div",{className:"font-bold tracking-tighter text-[12px] font-sans text-black ",children:s}),t.jsxs("div",{className:"text-[11px] ",children:[K(Number(e==null?void 0:e.ratingCount))," reviews"]})]}),t.jsx("div",{className:"flex place-items-center px-[3px]",children:t.jsx("div",{className:"min-w-10 w-10 h-10 mt-[-1px] bg-blue-800 flex place-content-center text-white place-items-center rounded",children:K(Number(e==null?void 0:e.rating))})})]})})};function jt({rating:e}){return t.jsx("div",{className:"flex gap-[3px]",children:Array.from({length:5}).map((s,c)=>{const a=Math.max(0,Math.min(1,e-c))*100;return t.jsx("div",{className:`relative w-[17px] h-[17px] bg-white rounded-full 
                            overflow-hidden flex place-items-center border-[1px]
                            place-content-center border-gray-500`,children:t.jsx("div",{className:"absolute inset-0 bg-green-600 z-[0]",style:{width:`${a}%`}})},c)})})}const oe=({listing:e})=>{const[s,c]=o.useState("user");return o.useEffect(()=>{const a=async x=>{await Te(x).then(l=>{let n=l;c(n.role),console.log(n.role)})};e!=null&&e.owner&&a(e==null?void 0:e.owner)},[e]),t.jsx(t.Fragment,{children:s==="admin"&&t.jsx("div",{className:" mt-8 ",children:t.jsx(D,{to:"/web/contact",children:t.jsx("div",{className:`px-3 text-[14px] text-center border py-[15px] rounded underline underline-offset-2 hover:text-blue-500 bg-blue-50 mx-[15px] md:mx-[0px]
                            mb-[40px] md:mb-[40px]`,children:"Is this your business? Claim it for free!"})})})})},ft=({listing:e,operatingHoursStatus:s})=>{const[c,a]=te.useState(!0),[x,l]=te.useState(!1),[n,r]=o.useState(""),[f,v]=o.useState(""),[h,S]=o.useState(void 0),[i,w]=o.useState(null),[m,y]=o.useState(""),[k,$]=o.useState(""),[C,L]=o.useState(""),[j,N]=o.useState(void 0);o.useEffect(()=>{e&&(r(e==null?void 0:e.gid),v(e==null?void 0:e.owner))},[e]);const _=u=>{const d=[];y(u==null?void 0:u.open_status),d.push({day:"Mon",hours:`${u.monday_from} - ${u.monday_to}`}),d.push({day:"Tue",hours:`${u.tuesday_from} - ${u.tuesday_to}`}),d.push({day:"Wed",hours:`${u.wednesday_from} - ${u.wednesday_to}`}),d.push({day:"Thu",hours:`${u.thursday_from} - ${u.thursday_to}`}),d.push({day:"Fri",hours:`${u.friday_from} - ${u.friday_to}`}),d.push({day:"Sat",hours:`${u.saturday_from} - ${u.saturday_to}`}),d.push({day:"Sun",hours:`${u.sunday_from} - ${u.sunday_to}`}),w(d)};return o.useEffect(()=>{n&&f&&(async(d,R)=>await xe(d,R))(n,f).then(d=>{_(d)})},[n,f]),o.useEffect(()=>{e!==null&&(async d=>{let R=d!=null&&d.address_one?d==null?void 0:d.address_one:"";R+=d!=null&&d.address_two?", "+(d==null?void 0:d.address_two):"",R+=d!=null&&d.city_name?", "+(d==null?void 0:d.city_name):"",R+=d!=null&&d.state_name?", "+(d==null?void 0:d.state_name):"",R+=d!=null&&d.zipcode?" "+(d==null?void 0:d.zipcode):"",R+=d!=null&&d.country_code?" "+(d==null?void 0:d.country_code):"";let I=`https://www.google.com/maps?q=${encodeURI(R)}`;$(R),L(I)})(e)},[e]),o.useEffect(()=>{s!==void 0&&N(s)},[s]),t.jsxs("div",{className:"mt-12",children:[t.jsx(B,{title:"Location and Hours"}),t.jsx("div",{className:" ",children:t.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-12 gap-5
                    `,children:[t.jsxs("div",{className:"col-span-6",children:[t.jsx("div",{className:" relative w-full h-[150px] border-[1px] border-gray-300",children:t.jsx("img",{className:" object-cover w-full h-full",src:"/images/mapicon.jpeg",alt:""})}),t.jsxs("div",{className:" grid grid-cols-2 gap-6 mt-3",children:[t.jsx("div",{children:k}),t.jsx("div",{children:t.jsx("a",{href:`${C}`,target:"_blank",children:t.jsx("button",{className:"w-[100%] bg-gray-100 border-[1px] border-gray-300",children:t.jsx("div",{className:"text-[14px]  font-sans font-bold text-black  py-1 ",children:"Get Directions"})})})})]})]}),t.jsx("div",{className:"col-span-6",children:t.jsxs("div",{className:"",children:[m==="no_hours"||m===null&&t.jsx("div",{children:"No hours selected."}),m==="always_open"&&t.jsx("div",{children:"Business is always open"}),m==="permanently_closed"&&t.jsx("div",{children:"Permanently Closed"}),m==="temporarily_closed"&&t.jsx("div",{children:"Temporarily Closed"}),i!==null&&m==="selected_hours"&&t.jsx("ul",{className:"w-full divide-y-[1px] md:divide-none",children:i==null?void 0:i.map((u,d)=>t.jsx("li",{className:"w-full",children:t.jsxs("div",{className:"grid grid-cols-12 py-2 ",children:[t.jsx("div",{className:` col-span-2 flex flex-col
                                                        place-items-start`,children:u==null?void 0:u.day}),t.jsxs("div",{className:`flex flex-row col-span-10
                                                    place-items-end place-content-end md:place-content-start gap-3`,children:[t.jsx("span",{children:u==null?void 0:u.hours}),t.jsx("span",{children:j.today===(u==null?void 0:u.day)&&(j.isOpen?"Open Now":"Close Now")})]})]})},d))})]})})]})})]})},vt=async e=>{const s=E.BASE_URL+"/api/util/country_locale";try{const c=await fetch(s,{method:"GET",headers:Ie});if(!c.ok)throw new Error(`HTTP error! Status: ${c.status}`);return await c.json()}catch(c){return{message:c.message}}},yt=(e,s)=>s.find(c=>(c==null?void 0:c.countryCode)===e),Nt=e=>{const s=[],c=e==null?void 0:e.open_status;return s.push({day:"Mon",hours:`${e.monday_from} - ${e.monday_to}`}),s.push({day:"Tue",hours:`${e.tuesday_from} - ${e.tuesday_to}`}),s.push({day:"Wed",hours:`${e.wednesday_from} - ${e.wednesday_to}`}),s.push({day:"Thu",hours:`${e.thursday_from} - ${e.thursday_to}`}),s.push({day:"Fri",hours:`${e.friday_from} - ${e.friday_to}`}),s.push({day:"Sat",hours:`${e.saturday_from} - ${e.saturday_to}`}),s.push({day:"Sun",hours:`${e.sunday_from} - ${e.sunday_to}`}),console.log(s),{opHours:s,openStatus:c}};function le(e){const[s,c]=e.split(":");let a=parseInt(s,10);const x=a>=12?"pm":"am";return a=a%12||12,`${a.toString().padStart(2,"0")}:${c} ${x}`}const wt=async e=>{const s=e==null?void 0:e.country_code,c=await vt(),a=yt(s,c),x=await xe(e==null?void 0:e.gid,e==null?void 0:e.owner);console.log(x);const n=Nt(x).opHours;a.hours=n,a.openStatus=x==null?void 0:x.open_status;const r=new Date,f=r.getDay(),h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][f],S=a;if(!S)return{message:"Country not found"};const i=S.hours.find(y=>y.day===h);let w=!1,m="Closed Today";if(i&&i.hours.includes("-")){const[y,k]=i.hours.split(" - "),[$,C]=y.split(":").map(Number),[L,j]=k.split(":").map(Number),N=new Date(r);N.setHours($,C,0,0);const _=new Date(r);_.setHours(L,j,0,0),w=r>=N&&r<=_,m=`${w?"Open Now":"Closed Now"}: ${h}, ${le(y)} - ${le(k)}`}return{...S,isOpen:w,todayHoursFormatted:m,today:h}},_t=async e=>wt(e),bt=({listing:e,images:s,ratingsData:c})=>{const[a,x]=o.useState(),[l,n]=o.useState(void 0);return o.useEffect(()=>{e&&c&&x({totalReviews:0,category:e==null?void 0:e.category,rating:c.rating_average,ratingCount:c.rating_count})},[e,c]),o.useEffect(()=>{e&&_t(e).then(r=>{n(r)})},[e]),t.jsxs("div",{className:"",children:[t.jsx("div",{className:"px-[15px] w-full",children:t.jsxs("div",{className:"max-w-[1100px] w-full mx-auto bg-white",children:[c&&t.jsxs("div",{className:"mt-4 flex gap-2 place-items-center",children:[t.jsx(jt,{rating:c==null?void 0:c.rating_average}),t.jsxs("div",{className:`flex place-items-center place-content-center
                                    gap-1 text-black/60 text-[14px]`,children:[t.jsx("div",{children:K(Number(c==null?void 0:c.rating_average))}),t.jsxs("div",{children:["(",t.jsxs("span",{className:"underline",children:[K(c==null?void 0:c.rating_count)," reviews"]}),")"]})]})]}),e&&t.jsx(at,{listing:e}),l!==void 0&&t.jsx("div",{className:"mt-[4px] leading-[1.2em]",children:l.openStatus==="selected_hours"?t.jsxs("div",{children:[l.todayHoursFormatted," / ",l.abbreviation," ",l.gmtOffsetName]}):t.jsxs("div",{children:[l.openStatus==="always_open"&&"Always Open",l.openStatus==="permanently_closed"&&"Permanently Closed",l.openStatus==="temporarily_closed"&&"Temporarily Closed"]})})]})}),(s==null?void 0:s.length)>0&&e&&t.jsx("div",{className:`bg-black h-fit md:hidden
                mt-4`,children:t.jsx(mt,{images:s,listing:e})}),t.jsx("div",{className:" md:pt-4 md:px-[12px]",children:t.jsx("div",{className:"max-w-[1100px] w-full mx-auto bg-white",children:t.jsxs("div",{className:`grid grid-cols-12 gap-0 md:gap-4 relative
                    `,children:[t.jsxs("div",{className:" col-span-12 lg:col-span-8",children:[t.jsx("div",{className:"hidden md:block mt-0",children:(s==null?void 0:s.length)>0&&e&&t.jsx(xt,{images:s,listing:e})}),t.jsxs("div",{className:"",children:[t.jsxs("div",{className:`md:hidden ${(s==null?void 0:s.length)<=0&&"mt-5"}  md:mt-0 mb-5`,children:[a&&t.jsx(re,{data:a}),e&&t.jsx(ce,{businessProfile:e}),e&&t.jsx(oe,{listing:e})]}),t.jsxs("div",{className:"px-[15px] md:px-[0px]",children:[t.jsx(nt,{listing:e}),e&&l&&t.jsx(ft,{listing:e,operatingHoursStatus:l}),t.jsx(rt,{listing:e}),e&&t.jsx(it,{listing:e}),e&&t.jsx(lt,{listing:e}),e&&t.jsx(ut,{listing:e}),e&&t.jsx(ht,{listing:e}),e&&t.jsx(pt,{listing:e}),e&&t.jsx(dt,{listing:e})]})]})]}),t.jsx("div",{className:"col-span-12 lg:col-span-4 hidden lg:block",children:t.jsxs("div",{className:" sticky top-[100px]",children:[a&&t.jsx(re,{data:a}),e&&t.jsx(ce,{businessProfile:e}),e&&t.jsx(oe,{listing:e})]})})]})})})]})},St=({title:e,subtitle:s})=>t.jsxs("div",{className:"mb-6 border-b pb-4 -space-y-1",children:[t.jsx("div",{className:`text-[19px] font-bold
                `,children:e}),t.jsx("div",{className:"text-sm ",children:s})]}),kt=({title:e,subtitle:s,category:c,limit:a})=>{const[x,l]=o.useState(""),[n,r]=o.useState(""),[f,v]=o.useState([]),[h,S]=o.useState(""),i="https://tpics.gasimg.com";o.useEffect(()=>{e&&s&&(l(e),r(s))},[e,s]);let w=async(m,y)=>{if(y&&m){let k=await Me(m,y);v(k)}};return o.useEffect(()=>{a&&c&&w(c,a)},[a,c]),t.jsx("div",{className:"px-[15px]",children:t.jsx("div",{className:"max-w-[1100px] mx-auto w-full",children:t.jsxs("div",{className:"mt-10 border-t pt-5",children:[t.jsx("div",{className:" mb-[20px] ",children:t.jsx(St,{title:x,subtitle:n})}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-3 gap-y-4",children:f==null?void 0:f.map((m,y)=>{let k="";return m!=null&&m.username?k=m==null?void 0:m.username:k=m==null?void 0:m.gid,t.jsxs("div",{children:[t.jsx("div",{children:t.jsx(D,{to:`/${k}`,children:t.jsx("div",{className:`relative h-[120px]
                                                    md:h-[180px]`,children:t.jsx("img",{className:`object-cover w-full h-full
                                                    text-sm`,src:m!=null&&m.image_url?i+(m==null?void 0:m.image_url):"images/placeholder.gif",alt:m.title})})})}),t.jsx("div",{className:`mt-1 text-[15px] tracking-tight 
                                     truncate`,children:m.title}),t.jsx("div",{className:"mt-1",children:t.jsx(Ve,{rating:m.avg_rating})}),t.jsx("div",{className:`text-[11px] mt-[5px] tracking-tight
                                    leading-[1.2em]`,children:m.short_description.substring(0,100)})]},y)})})]})})})},Rt=()=>t.jsx("div",{className:"flex place-content-center place-items-center w-full min-h-[700px] text-[13px] flex-col space-y-4",children:t.jsxs("div",{className:`flex place-content-center place-items-center gap-3
                h-[40px]`,children:[t.jsx("div",{className:`text-2xl font-bold text-red-600 h-full
                    flex place-items-center`,children:"404"}),t.jsx("div",{className:"h-full w-[2px] border-r"}),t.jsxs("div",{className:`text-black text-[14px]
                    h-full flex place-items-center space-x-2`,children:[t.jsx("span",{children:"Resource not found."}),t.jsx("button",{onClick:()=>{window.history.back()},className:"underline",children:"Go back"})]})]})}),Xt=({data:e})=>{const s=e==null?void 0:e.listing,c=e==null?void 0:e.profileImageData,a=E.IMG_BASE_URL+(c==null?void 0:c.image_url),x=c==null?void 0:c.mimetype,n=(r=>r==null||r===""?null:r.replace(/&/g,",").split(",").map(h=>h.trim()).filter(h=>h.length>0))((s==null?void 0:s.business_phrases)||null);return[{title:(s==null?void 0:s.title)||"Garssete Inc."},{name:"description",content:s==null?void 0:s.short_description},{name:"keywords",content:n},{property:"fb:app_id",content:"1325393508603168"},{property:"og:url",content:(s==null?void 0:s.website)||"https://garssete.com"},{property:"og:type",content:"website"},{property:"og:title",content:(s==null?void 0:s.title)||"Garssete.com"},{property:"og:description",content:s==null?void 0:s.short_description},{property:"og:image",content:a},{property:"og:image:secure_url",content:a},{property:"og:image:type",content:x},{property:"og:image:width",content:"200"},{property:"og:image:alt",content:(s==null?void 0:s.title)||"Garssete"},{name:"twitter:creator",content:"garssete"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:(s==null?void 0:s.title)||"Garssete Directory Listing"},{name:"twitter:description",content:s==null?void 0:s.short_description}]},qt=()=>{const e=ve(),s=e.listing,c=e.gallery,a=e.ratingsData;return t.jsx(ct,{children:t.jsx(et,{children:t.jsxs(Qe,{children:[t.jsx("div",{className:"md:hidden",children:t.jsx(Je,{})}),t.jsx(Ye,{}),s.gid!==null&&s.gid!==void 0&&t.jsx(bt,{listing:s,images:c,ratingsData:a}),(s==null?void 0:s.category)!==void 0?t.jsx(kt,{category:s==null?void 0:s.category,limit:6,title:`Related: ${s==null?void 0:s.category}`,subtitle:"Related based on the same category."}):t.jsx(Rt,{}),t.jsx(Ze,{}),t.jsx(He,{}),t.jsx(Pe,{})]})})})};export{qt as default,Xt as meta};
