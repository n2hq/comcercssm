import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as t,b as N}from"./components-qdL6XBti.js";import{A as S,C as y}from"./ContentLayout-ncskH0AU.js";import{j as D,ag as I,B as V,a as _,I as B,ai as C,J as M}from"./lib-Vg6a-bJE.js";import{B as A,a as k}from"./BusinessHeader-DQNVA0R-.js";import{u as E,a as L}from"./EditVideoDialogContext-BKn0JFj6.js";import{u as P}from"./NotificationContext-Bv4FVccE.js";import{I as z}from"./index-Cj0zFx3r.js";import{u as R}from"./VideoSliderContext-bIsesVxk.js";import{u as U}from"./AuthContext-BnCYfHn3.js";import"./UserMenu-DvxRlRi_.js";import"./WhiteLogo-CksmgS5T.js";import"./HomeNav-DdgaWdh1.js";import"./SrchNavbar-D7Rp1wRh.js";import"./json-CfA3Rlrt.js";import"./CardTitle-BY0Ps6Ga.js";import"./index-C4bLmoCR.js";const F=({item:s,menu:o,userGuid:i,businessGuid:l})=>{const[a,x]=t.useState(!1),[u,r]=t.useState(null),n=E(),g=P(),m=()=>{n.setDialog(!0),n.setVideoSrc(s.video_url),n.setVideoTitle(s.video_title),n.setUserGuid(i),n.setBusinessGuid(l),n.setVideoGuid(s.video_guid),n.setVideoDescription(s.video_description)},h=async()=>{g.notify(),await new Promise(c=>setTimeout(c,1e3)),n.deleteVideo(i,l,s.video_guid)};return e.jsx("div",{className:"",children:o&&e.jsx("div",{className:` absolute top-2 right-2 w-[80%] bg-white
                rounded-[12px] overflow-hidden border-[1px] border-white
                shadow-md`,children:e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:" divide-y-[1px]",children:[e.jsx("div",{onMouseDown:m,className:`py-1 hover:bg-gray-300 w-full
                                flex flex-col
                                px-2 transition duration-1000 ease-in-out`,children:"Edit"}),e.jsx("div",{onMouseDown:h,className:`py-1 hover:bg-gray-300 w-full
                                flex flex-col
                                px-2 transition duration-1000 ease-in-out`,children:"Delete"})]})})})})},G=({showCarousel:s,item:o,itemIndex:i,userGuid:l,businessGuid:a})=>{const[x,u]=t.useState(!1),[r,n]=t.useState(null),g="https://pics.gasimg.com";let m="";o.video_url?m=g+o.video_url:m="https://trendyblinds.ca/wp-content/uploads/2023/09/3.-3D-WALLPAPER-SKU0015.jpg";const[h,c]=t.useState(m),d=()=>{u(!0)},w=async()=>{await new Promise(p=>setTimeout(p,200)),u(!1)};return t.useEffect(()=>{if(o){const p=D(o==null?void 0:o.video_url);n(p)}},[o]),e.jsx("div",{className:"z-0",children:e.jsxs("div",{className:`border-[1px] h-fit p-1 rounded-md shadow-md
                    hover:cursor-pointer relative z-0`,children:[e.jsx("button",{onMouseDown:d,onBlur:w,className:`w-[30px] h-[30px] z-50 bg-white 
                flex place-content-center place-items-center 
                rounded-full absolute right-2 top-2 cursor-pointer
                hover:bg-gray-500 hover:text-white/80 transition duration-1000 ease-in-out`,children:e.jsx(I,{className:"text-[20px]"})}),e.jsx("div",{onMouseDown:p=>s(i),className:`relative h-[100px] md:h-[170px] xl:h-[160px]
                         rounded-md overflow-hidden -z-10
                    `,children:e.jsx("img",{src:`https://img.youtube.com/vi/${r}/0.jpg`,alt:"",className:`object-cover w-full h-full -z-40
                        `})}),o.video_title.length>0&&e.jsx("div",{className:"text-[13px] mt-2 mb-1.5 leading-[1.2em] mx-[2px] line-clamp-2",children:o.video_title}),e.jsx(F,{item:o,menu:x,userGuid:l,businessGuid:a})]})})},O=({slides:s,selectedSlide:o,handleClose:i})=>{const[l,a]=t.useState(0);t.useRef(0),t.useRef(0);const x=()=>{a(r=>r===0?s.length-1:r-1)},u=()=>{a(r=>r===s.length-1?0:r+1)};return t.useEffect(()=>{o!==null&&a(o-1)},[o]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 gap-0 ",children:[e.jsxs("div",{className:"col-span-12 md:col-span-9 w-full h-full relative bg-black flex",children:[e.jsx("div",{className:" w-auto h-screen flex overflow-hidden",children:s.map((r,n)=>e.jsx("img",{src:r.image_url,alt:"",style:{transform:`translateX(-${l*100}%)`},className:`object-scale-down w-full h-full 
                                            block flex-shrink-0 flex-grow-0 transition-transform
                                            ease-in-out duration-1000`},n))}),e.jsx("button",{onMouseDown:x,className:`block absolute top-0 bottom-0 
                p-[1rem] cursor-pointer left-0 group h-full 
                transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full place-content-center place-items-center group-hover:bg-white/30
                        transition duration-500 ease-in-out`,children:e.jsx(V,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("button",{onMouseDown:u,className:`block absolute top-0 bottom-0 
                    p-[1rem] cursor-pointer right-0 group 
                     transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full flex place-content-center place-items-center group-hover:bg-white/30
                        transition duration-500 ease-in-out`,children:e.jsx(_,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("div",{onMouseDown:()=>i(),className:`w-[50px] h-[50px] z-[300] bg-white
                    flex place-content-center place-items-center
                    rounded-full absolute left-2 top-2 cursor-pointer
                    hover:bg-white/40 transition duration-1000 ease-in-out`,children:e.jsx(z,{className:"text-[30px]"})})]}),e.jsxs("div",{className:"hidden md:block md:col-span-3 px-5",children:[e.jsx("h1",{className:" text-[22px] my-4 font-sans font-extrabold tracking-tight leading-[24px]",children:"Photos for Jason Won, DPT - Flex With Doctor Jay"}),e.jsxs("div",{className:" my-4 ",children:[l+1," / ",s.length]}),e.jsx("hr",{}),e.jsx("div",{className:" my-4",children:s[l].image_title})]})]})})},T=({overlay:s,setOverlay:o,selectedSlide:i,handleClose:l,gallery:a})=>e.jsx("div",{children:s&&e.jsx("div",{className:`flex w-screen h-screen bg-white z-[1000] 
                fixed top-0 left-0 right-0 bottom-0 `,children:a&&i&&e.jsx(O,{slides:a,selectedSlide:i,handleClose:l})})}),J=({videoGallery:s,userGuid:o,businessGuid:i,listing:l})=>{const[a,x]=t.useState(!1),[u,r]=t.useState(0),n=R(),g=()=>{x(!1)},m=h=>{n.setDialog(!0),n.setSelectedSlide(h+1),n.setGallery(s),n.setListing(l)};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:` border-[1px] p-3 rounded-[5px] 
                grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4
                lg:grid-cols-4 xl:grid-cols-5 gap-2 z-0`,children:s==null?void 0:s.map((h,c)=>e.jsx("div",{className:"z-0",children:e.jsx(G,{showCarousel:m,item:h,itemIndex:c,userGuid:o,businessGuid:i})},c))}),e.jsx(T,{overlay:a,setOverlay:x,selectedSlide:u+1,handleClose:g,gallery:s})]})},W=({userGuid:s,businessGuid:o})=>{const i=t.useRef(null),[l,a]=t.useState(null),[x,u]=t.useState(null),[r,n]=t.useState(!1),[g,m]=t.useState(!1),[h,c]=t.useState(!1),d=L(),w=()=>{d.setDialog(!0),d.setUserGuid(s),d.setBusinessGuid(o)},p=f=>{var j;try{const v=(j=f.target.files)==null?void 0:j[0];if(v){const b=URL.createObjectURL(v);a(b),u(v),n(!0),d.setDialog(!0),d.setImgSrc(b),d.setSelectedFile(v),d.setIsImageSelected(!0),d.setUserGuid(s),d.setBusinessGuid(o)}}finally{f.target.value=""}};return e.jsxs("div",{className:"mb-2",children:[e.jsx("button",{onMouseDown:w,className:` bg-blue-800 rounded-md px-3 py-1
                text-white hover:bg-blue-700 transition
                duration-500 ease-in-out hover:shadow-md
                 shadow-gray-900 hover:shadow-black/50`,children:"Add Video"}),e.jsx("input",{type:"file",accept:"image/*",ref:i,className:" hidden",onChange:p})]})},ce=()=>{t.useEffect(()=>{B(localStorage)},[]);const[s,o]=t.useState(""),[i,l]=t.useState(""),[a,x]=t.useState(null),[u,r]=t.useState(null),[n,g]=t.useState(!0),{business_guid:m,user_guid:h}=N(),[c,d]=t.useState(null);return U()?(t.useEffect(()=>{m&&h&&(async(f,j)=>{o(f),l(j);const v=await C(f,j);x(v);const b=await M(f||"");d(b)})(m,h)},[m,h]),t.useEffect(()=>{s&&i&&a&&c&&(r({businessGuid:s,userGuid:i,videoGallery:a,businessProfile:c}),g(!1))},[s,i,a,c]),n?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx(S,{children:e.jsxs(y,{title:"Videos Settings",businessGuid:s,data:u,businessProfile:c,children:[e.jsx(A,{businessGuid:s,data:u,businessProfile:c}),s&&i&&e.jsx(k,{guid:s,userGuid:i}),s&&i&&e.jsx(W,{userGuid:i,businessGuid:s}),a!==null&&(a==null?void 0:a.length)>0?e.jsx("div",{className:"z-0",children:e.jsx(J,{videoGallery:a,userGuid:i,businessGuid:s,listing:c})}):e.jsx("div",{className:" mt-2 border-[1px] rounded-lg p-3 mb-6",children:"Video Gallery is empty."})]})})):null};export{ce as default};
