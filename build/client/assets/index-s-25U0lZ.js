import{j as a}from"./jsx-runtime-0DLF9kdB.js";import{r as o,d as E,c as z}from"./components-qdL6XBti.js";import{a2 as A,w as P,a3 as y,a4 as U,a5 as M,a6 as V,a7 as D,a8 as S,a9 as G}from"./lib-B99MpCwE.js";import{R as $,T,A as q,C as W,a as H,F as O}from"./Categories-BqF3IuV8.js";import{S as Q}from"./SrchNavbar-C9SGeG7l.js";import"./UserMenu-D9qHYBjD.js";import"./AuthContext-D5Fmb5z1.js";import"./WhiteLogo-Cnyixi1M.js";import"./index-zlaG2RT4.js";import"./json-ChAQkGq-.js";const I=({averageRating:e})=>{const[j,m]=o.useState(0);return o.useEffect(()=>{e!=null&&m(e)},[e]),a.jsxs("div",{className:"text-blue-700",children:["(",A(Number(j)),")"]})},J=({listing:e})=>{var _;const[j,m]=o.useState("/images/placeholder-icon.webp"),[p,h]=o.useState(""),[u,d]=o.useState(""),[x,l]=o.useState(null),[f,v]=o.useState(""),[s,k]=o.useState(null),[N,C]=o.useState(null),[B,F]=o.useState("");return o.useEffect(()=>{if(e){const c=e;k(c),h(P.IMG_BASE_URL+(c==null?void 0:c.image_url))}},[e]),o.useEffect(()=>{e!=null&&e.website?v(e==null?void 0:e.website):(e==null?void 0:e.username)===""||(e==null?void 0:e.username)===null?v("/"+(e==null?void 0:e.gid)):v("/"+(e==null?void 0:e.username))},[e]),o.useEffect(()=>{e&&((e==null?void 0:e.image_url)!==""&&(e==null?void 0:e.image_url)!==null&&(e==null?void 0:e.image_url)!==void 0&&h(P.IMG_BASE_URL+(e==null?void 0:e.image_url)),(e==null?void 0:e.username)!==""&&(e==null?void 0:e.username)!==null&&(e==null?void 0:e.username)!==void 0?d(e==null?void 0:e.username):d(e==null?void 0:e.gid))},[e]),o.useEffect(()=>{if(e!=null&&e.social_media){let c=[];const r=y(e==null?void 0:e.social_media,",");r!==null&&(r==null||r.map((t,n)=>{const b=y(t,"$"),w={mediaName:b[0],mediaHandle:b[1],baseUrl:b[2]};c.push(w)})),l(c)}},[e]),o.useEffect(()=>{},[x]),o.useEffect(()=>{if(s!=null&&s.facility_features){let c=[];const r=y(s==null?void 0:s.facility_features,"&");r!==null&&(r==null||r.map((n,b)=>{const w=y(n,"$"),R={featureId:w[0],userDescription:w[1]};c.push(R)}));const t=U(c);C(t)}},[s]),o.useEffect(()=>{e!==null&&(async r=>{let t=r==null?void 0:r.title;t+=r!=null&&r.address_one?", "+(r==null?void 0:r.address_one):"",t+=r!=null&&r.address_two?", "+(r==null?void 0:r.address_two):"",t+=r!=null&&r.city_name?", "+(r==null?void 0:r.city_name):"",t+=r!=null&&r.state_name?", "+(r==null?void 0:r.state_name):"",t+=r!=null&&r.zipcode?" "+(r==null?void 0:r.zipcode):"",t+=r!=null&&r.country_code?" "+(r==null?void 0:r.country_code):"";let n=`https://www.google.com/maps?q=${encodeURI(t)}&t=&z=15&ie=UTF8&iwloc=B&output=`;F(n)})(e)},[e]),a.jsxs("div",{className:"bg-white w-full h-auto  overflow-hidden border   hover:shadow-md hover:shadow-gray-200",children:[a.jsx("div",{className:"bg-gray-50/30 py-3 px-4 border-b-0",children:a.jsxs("a",{href:`/${u}`,children:[a.jsxs("div",{className:"flex place-content-between gap-2",children:[a.jsxs("div",{className:"flex place-items-start gap-2 w-full",children:[a.jsx("div",{className:"w-[90px] h-[90px] min-w-[90px]   bg-black bg-cover bg-center overflow-hidden relative border",style:{backgroundImage:`url(${j})`},children:p!==""&&a.jsx("img",{src:p,alt:"",className:`object-cover w-full h-full text-sm
                             z-0 bg-white`})}),a.jsxs("div",{className:" w-full",children:[a.jsx("div",{className:"text-[18px] font-normal text-blue-700 line-clamp-1 w-full",children:e==null?void 0:e.title}),(e==null?void 0:e.category)&&a.jsx("div",{className:"text-[12px] text-gray-500  capitalize mt-[0px]",children:(_=M(e==null?void 0:e.category))==null?void 0:_.name}),a.jsxs("div",{className:"flex place-items-center gap-x-1 mt-[5px] ",children:[a.jsx("div",{children:(s==null?void 0:s.average_rating)!==null&&(s==null?void 0:s.average_rating)!==""&&(s==null?void 0:s.average_rating)!==void 0?a.jsxs("div",{className:" flex gap-2 place-items-center",children:[a.jsx($,{rating:Number(s==null?void 0:s.average_rating)}),a.jsx(I,{averageRating:s==null?void 0:s.average_rating})]}):a.jsxs("div",{className:" flex gap-2 place-items-center",children:[a.jsx($,{rating:1}),a.jsx(I,{averageRating:0})]})}),a.jsx("div",{className:" ",children:Number(s==null?void 0:s.total_reviews)>0?s==null?void 0:s.total_reviews:0})]})]})]}),a.jsx("div",{className:"flex place-items-start",children:a.jsx("div",{className:"font-bold rounded-sm border px-3 py-[2px]",children:"View"})})]}),a.jsx("div",{className:"mt-[8px] text-[14px] md:text-[13px] text-gray-800 leading-[1.3em] line-clamp-3",children:e==null?void 0:e.short_description})]})}),a.jsx("div",{children:a.jsxs("div",{className:" h-auto flex place-content-between gap-2 ",children:[a.jsxs("div",{className:"flex place-items-start w-[60%] flex-col  pl-4  pt-2 pb-4 ",children:[a.jsxs("div",{className:"flex place-items-center gap-x-1",children:[a.jsx(V,{}),a.jsxs("span",{className:"mt-[1px] text-gray-500 space-x-2",children:[a.jsx("span",{className:"font-bold",children:"Founded:"}),a.jsx("span",{children:e==null?void 0:e.established})]})]}),N!==null&&a.jsxs("div",{className:"mt-2 flex place-items-start gap-2 w-full relative",children:[a.jsx("span",{className:"text-[13px]",children:"Facilities: "}),a.jsx("div",{className:"flex place-items-baseline gap-3 flex-wrap leading-[0.9em] ",children:N==null?void 0:N.map((c,r)=>a.jsx(T,{tooltip:`${c==null?void 0:c.name}: ${(c==null?void 0:c.userDescription)||""}`,children:a.jsx("div",{className:"text-[15px]",children:c==null?void 0:c.icon})},r))})]})]}),a.jsxs("div",{className:"flex place-items-end flex-col w-[40%] text-end pr-4 pt-2 pb-4",children:[a.jsx("div",{className:"font-[600]",children:e==null?void 0:e.phone}),a.jsx("div",{className:"text-[12px] leading-[1.2em] mt-1",children:a.jsx(q,{listing:e})})]})]})}),a.jsx("div",{className:"border-none",children:a.jsxs("div",{className:"flex place-content-between mx-4 my-1",children:[a.jsxs("div",{className:"flex place-items-center gap-4",children:[a.jsx("a",{href:`mailto:${e==null?void 0:e.email_address}`,children:a.jsx(D,{size:20})},34),a.jsx("a",{href:`tel:${e==null?void 0:e.phone}`,children:a.jsx(S,{size:20})},30),x!==null&&(x==null?void 0:x.map((c,r)=>a.jsx("a",{href:`${c==null?void 0:c.baseUrl}${c==null?void 0:c.mediaHandle}`,children:G(c==null?void 0:c.mediaName)},r)))]}),a.jsx("div",{className:"px-1.5 py-0.5 bg-red-500 rounded hover:shadow-lg text-white",children:a.jsx("a",{href:`${f}`,children:"Website"})})]})}),a.jsx("div",{className:"px-4 mb-4 mt-8",children:a.jsxs("div",{className:" grid grid-cols-2 gap-2 w-full md:w-[50%]",children:[a.jsx("a",{target:"_blank",href:`${B}`,className:"border border-blue-400 py-[5px] rounded px-2 font-semibold w-full text-center",children:"Go to map"}),a.jsx("div",{children:(s==null?void 0:s.phone)&&a.jsx("a",{href:`tel:${s==null?void 0:s.phone}`,children:a.jsxs("button",{className:"bg-blue-700 rounded w-full text-white flex place-items-center place-content-center text-[15px] gap-2 py-[5px]",children:[a.jsx(S,{size:20,className:"mt-[2px]"}),a.jsx("span",{children:"Call"})]})})})]})})]})},K=()=>a.jsx("div",{className:"bg-white w-full h-auto md:rounded-t-md shadow-md overflow-hidden border",children:a.jsxs("div",{className:"bg-gray-50/30 py-3 px-4 border-b",children:[a.jsxs("div",{className:"flex place-content-between",children:[a.jsx("div",{className:"flex place-items-center gap-2",children:a.jsxs("div",{className:"-space-y-1",children:[a.jsx("div",{className:"text-black text-lg font-semibold",children:"Garsset.com"}),a.jsx("div",{className:"text-[12px] text-gray-500 italic capitalize",children:"Business Directory Service"})]})}),a.jsx("div",{className:"flex place-items-center"})]}),a.jsx("div",{className:"mt-[8px] text-[12px] text-gray-500 leading-[1.3em]",children:"The only real-time generative AI app for video chatting, live streaming, and video creation on the market."})]})});function X({pagination:e}){const[j]=E(),m=e.currentPage,p=e.totalPages,h=()=>{const d=[];let l=Math.max(1,m-Math.floor(2.5)),f=Math.min(p,l+5-1);f-l+1<5&&(l=Math.max(1,f-5+1)),l>1&&(d.push(1),l>2&&d.push("..."));for(let v=l;v<=f;v++)d.push(v);return f<p&&(f<p-1&&d.push("..."),d.push(p)),d},u=d=>{const x=new URLSearchParams(j);return x.set("page",d.toString()),`?${x.toString()}`};return a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(m-1)*e.itemsPerPage+1," to"," ",Math.min(m*e.itemsPerPage,e.totalItems)," of"," ",e.totalItems," items"]}),a.jsxs("nav",{className:"flex items-center space-x-1",children:[a.jsx("a",{href:u(m-1),className:`px-3 py-2 border rounded-md text-sm font-medium ${e.hasPrev?"text-gray-700 hover:bg-gray-100":"opacity-50 cursor-not-allowed text-gray-400"}`,"aria-disabled":!e.hasPrev,children:"Previous"}),h().map((d,x)=>typeof d=="number"?a.jsx("a",{href:u(d),className:`px-3 py-2 border rounded-md text-sm font-medium ${d===m?"bg-blue-500 text-white border-blue-500":"text-gray-700 hover:bg-gray-100"}`,children:d},d):a.jsx("span",{className:"px-3 py-2 text-gray-500",children:d},`ellipsis-${x}`)),a.jsx("a",{href:u(m+1),className:`px-3 py-2 border rounded-md text-sm font-medium ${e.hasNext?"text-gray-700 hover:bg-gray-100":"opacity-50 cursor-not-allowed text-gray-400"}`,"aria-disabled":!e.hasNext,children:"Next"})]})]})}const de=()=>{const e=z(),[j]=E(),m=e.data.items,p=e.data.pagination,h=e.query,u=e.countries,[d,x]=o.useState(null);return parseInt(j.get("page")||"1"),o.useEffect(()=>{h&&x(h)},[h]),a.jsxs("div",{className:" ",children:[a.jsx(Q,{}),a.jsxs("div",{className:"h-screen flex flex-col relative ",children:[a.jsx("div",{className:"mt-[120px] md:mt-[60px]"}),a.jsxs("div",{className:"grid grid-cols-12 h-full overflow-hidden  gap-5 ",children:[a.jsxs("aside",{className:"col-span-3 h-full overflow-y-auto scrollbar-hidden pt-2 hidden xl:block",children:[a.jsxs("div",{className:"",children:[a.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Categories"}),a.jsx(W,{})]}),a.jsxs("div",{className:"mt-5",children:[a.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Countries"}),u&&a.jsx(H,{countries:u})]}),a.jsx("div",{className:" py-4 px-4 border-t",children:"Garssete - Business Directory Listing"})]}),a.jsx("div",{className:"col-span-12 xl:col-span-9  overflow-y-auto w-full md:px-[15px]",children:a.jsxs("div",{className:"grid grid-cols-12 gap-5",children:[a.jsx("div",{className:"col-span-12 md:col-span-8  pt-3",children:a.jsxs("div",{className:"space-y-8",children:[m.map((l,f)=>a.jsx(J,{listing:l})),a.jsx(X,{pagination:p}),a.jsx(K,{})]})}),a.jsx("div",{className:"hidden md:block md:col-span-4 pt-3    ",children:a.jsx("div",{className:"w-full xl:w-[90%] sticky top-3 ml-auto",children:a.jsx(O,{})})})]})})]})]})]})};export{de as default};
