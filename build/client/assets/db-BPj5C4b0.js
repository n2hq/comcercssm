import{j as r}from"./jsx-runtime-0DLF9kdB.js";import{r as a,c as I,d as $}from"./components-ByGjlxrc.js";import{S as A}from"./SrchNavbar-DxdFC0Wy.js";import{R as C,T as B,S as T,C as U,a as D,F as G}from"./Categories-BY7tMnAl.js";import{C as O,F as q}from"./FooterSection-Biw2w4h0.js";import{V as H}from"./VerticalHeight-CjKseacd.js";import{w as P,a1 as _,a2 as M,a3 as z,a4 as V,a5 as Q,a6 as W}from"./lib-BfxD_PrT.js";import"./UserMenu-DjfYbg23.js";import"./AuthContext-BW5xbZ91.js";import"./WhiteLogo-C2qMaGt0.js";import"./index-CkyiyLWW.js";import"./json-CKHlsUtu.js";const F=({listing:l})=>r.jsxs("div",{className:"leading-[1.3em] ",children:[l!=null&&l.address_one?(l==null?void 0:l.address_one)+", ":"",l!=null&&l.state_code?(l==null?void 0:l.state_name)+", ":"",l!=null&&l.country_code?l==null?void 0:l.country_code:""]}),E=({listing:l,index:o})=>{var f;const[e,x]=a.useState(null),[u,p]=a.useState(""),[t,y]=a.useState(""),[d,j]=a.useState(null),[m,h]=a.useState(null),[n,i]=a.useState("");return a.useEffect(()=>{e&&((e==null?void 0:e.image_url)!==""&&(e==null?void 0:e.image_url)!==null&&(e==null||e.image_url),(e==null?void 0:e.bg_image_url)!==""&&(e==null?void 0:e.bg_image_url)!==null&&(e==null?void 0:e.bg_image_url)!==void 0&&y(P.IMG_BASE_URL+(e==null?void 0:e.bg_image_url)),(e==null?void 0:e.username)!==""&&(e==null?void 0:e.username)!==null&&(e==null?void 0:e.username)!==void 0?i(e==null?void 0:e.username):i(e==null?void 0:e.gid))},[e]),a.useEffect(()=>{if(l){const c=l;x(c),p(P.IMG_BASE_URL+(c==null?void 0:c.image_url))}},[l]),a.useEffect(()=>{if(e!=null&&e.facility_features){let c=[];const s=_(e==null?void 0:e.facility_features,"&");s!==null&&(s==null||s.map((S,N)=>{const w=_(S,"$"),R={featureId:w[0],userDescription:w[1]};c.push(R)}));const v=M(c);console.log(v),h(v)}},[e]),a.useEffect(()=>{if(e!=null&&e.social_media){let c=[];const s=_(e==null?void 0:e.social_media,",");s!==null&&(s==null||s.map((v,S)=>{const N=_(v,"$"),w={mediaName:N[0],mediaHandle:N[1],baseUrl:N[2]};c.push(w)})),j(c)}},[e]),r.jsxs("div",{className:"border py-3 px-3 hover:shadow-md hover:shadow-gray-200",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"w-[90px] min-w-[90px] h-[90px] relative",children:r.jsx("img",{src:u,alt:"",className:" object-cover w-full h-full border"})}),r.jsxs("div",{className:"flex place-content-between w-full",children:[r.jsxs("div",{className:"w-full  block",children:[r.jsx("div",{className:"text-xl font-normal text-blue-700",children:r.jsx("a",{href:`/${n}`,children:e==null?void 0:e.title})}),r.jsx("div",{className:" mt-2 font-bold md:hidden",children:e==null?void 0:e.phone}),r.jsx("div",{className:"mt-2 md:hidden",children:r.jsx(F,{listing:e})}),(e==null?void 0:e.category)!==null&&(e==null?void 0:e.category)!==""&&r.jsx("div",{className:"text-[14px] mt-2",children:(f=z((e==null?void 0:e.category)||""))==null?void 0:f.name}),(e==null?void 0:e.average_rating)!==null&&(e==null?void 0:e.average_rating)!==""?r.jsxs("div",{className:"mt-2 flex gap-2 place-items-center",children:[r.jsx(C,{rating:Number(e==null?void 0:e.average_rating)}),r.jsx(k,{averageRating:e==null?void 0:e.average_rating})]}):r.jsxs("div",{className:"mt-2 flex gap-2 place-items-center",children:[r.jsx(C,{rating:3}),r.jsx(k,{averageRating:3})]}),(e==null?void 0:e.website)&&r.jsx("div",{className:"mt-2",children:r.jsx("a",{href:e==null?void 0:e.website,className:"text-blue-700",children:"Website"})}),d!==null&&r.jsx("div",{className:"mt-4 flex place-items-center gap-4",children:d==null?void 0:d.map((c,s)=>r.jsx("a",{href:`${c==null?void 0:c.baseUrl}${c==null?void 0:c.mediaHandle}`,children:V(c==null?void 0:c.mediaName)},s))})]}),r.jsxs("div",{className:"w-[200px] hidden md:block ",children:[r.jsx("div",{className:" text-end font-bold",children:e==null?void 0:e.phone}),r.jsx("div",{className:" text-end ",children:r.jsx(F,{listing:e})})]})]})]}),m!==null&&r.jsxs("div",{className:"mt-6 flex place-items-center gap-8 w-full relative",children:[r.jsx("span",{className:"text-[15px]",children:"Facilities: "}),r.jsx("div",{className:"flex place-items-center gap-3 flex-wrap ",children:m==null?void 0:m.map((c,s)=>r.jsx("a",{href:"",className:"text-[17px] block",children:r.jsx(B,{href:"#",tooltip:`${c==null?void 0:c.name}: ${(c==null?void 0:c.userDescription)||""}`,children:c==null?void 0:c.icon})},s))})]}),r.jsx("div",{className:" mt-4",children:(e==null?void 0:e.short_description)&&r.jsx("div",{className:"line-clamp-2 mt-2 text-[13px]",children:e==null?void 0:e.short_description})}),r.jsx("div",{className:"mt-8 max-w-[100%] md:max-w-[50%] w-full",children:r.jsxs("div",{className:" grid grid-cols-2 gap-2 w-full",children:[r.jsx("div",{className:"w-full",children:r.jsx("button",{className:"border border-blue-400 py-[5px] rounded px-2 font-semibold w-full",children:"Go to map"})}),r.jsx("div",{children:(e==null?void 0:e.phone)&&r.jsxs("button",{className:"bg-blue-700 rounded w-full text-white flex place-items-center place-content-center text-[15px] gap-2 py-[5px]",children:[r.jsx(Q,{size:20,className:"mt-[2px]"}),r.jsx("span",{children:"Call"})]})})]})})]})},k=({averageRating:l})=>{const[o,e]=a.useState(0);return a.useEffect(()=>{l!=null&&e(l)},[l]),r.jsxs("div",{className:"text-blue-700 mt-[3px]",children:["(",W(Number(o)),")"]})},b=({data:l,itemsPerPage:o=10,resetPageKey:e})=>{const[x,u]=I(),p=Number(x.get("page"))||1,[t,y]=a.useState(p),d=Math.ceil(l.length/o),j=t*o,m=j-o,h=l.slice(m,j),n=c=>{y(c);const s=new URLSearchParams(x);s.set("page",String(c)),u(s)},i=()=>{t>1&&n(t-1)},f=()=>{t<d&&n(t+1)};return a.useEffect(()=>{e!==void 0&&n(1)},[e]),r.jsxs("div",{children:[r.jsx("div",{className:"space-y-6",children:h==null?void 0:h.map((c,s)=>r.jsx("div",{children:(s+1)%2?r.jsx("div",{children:r.jsx(E,{listing:c,index:s})}):r.jsxs(r.Fragment,{children:[r.jsx(E,{listing:c,index:s}),r.jsx(T,{})]})},s))}),d>1&&r.jsxs("div",{className:"flex justify-center gap-[5px] mt-[60px]",children:[r.jsx("button",{onClick:i,disabled:t===1,className:"px-[12px] py-[8px] bg-white cursor-pointer border rounded-[4px]",children:"Previous"}),Array.from({length:d},(c,s)=>s+1).map(c=>r.jsx("button",{onClick:()=>n(c),className:`px-[12px] py-[8px] cursor-pointer border rounded-[4px] ${t===c?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:c},c)),r.jsx("button",{onClick:f,disabled:t===d,className:"px-[12px] py-[8px] bg-white cursor-pointer border rounded-[4px]",children:"Next"})]})]})},ae=()=>{const l=$();I();const o=l.data,e=l.query,x=l.countries,[u,p]=a.useState(null);return a.useEffect(()=>{e&&p(e)},[e]),r.jsxs("div",{children:[r.jsx(A,{}),r.jsx("div",{className:"h-[140px] md:h-[80px]"}),r.jsxs("div",{className:"flex place-content-between md:gap-x-8",children:[r.jsxs("div",{className:" w-[350px] min-w-[350px] h-screen overflow-auto scrollbar-hidden sticky top-[80px] md:pr-6 hidden lg:block",children:[r.jsxs("div",{className:"",children:[r.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Categories"}),r.jsx(U,{})]}),r.jsxs("div",{className:"mt-5",children:[r.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Countries"}),x&&r.jsx(D,{countries:x})]}),r.jsx("div",{className:" py-4 px-4 border-t",children:"Garssete - Business Directory Listing"})]}),r.jsxs("div",{className:" flex md:place-content-between w-full md:gap-x-24 md:mr-[15px]",children:[r.jsx("div",{children:(o==null?void 0:o.length)>0?r.jsx(b,{data:o,itemsPerPage:20,resetPageKey:e}):r.jsx("div",{className:`flex place-items-center rounded
                            place-content-center p-5 border capitalize`,children:r.jsx("span",{children:"no record"})})}),r.jsx("div",{className:"w-[350px] min-w-[350px] h-screen  sticky top-[80px] hidden lg:block",children:r.jsx(G,{})})]})]}),r.jsxs("div",{children:[r.jsx(H,{}),r.jsx(O,{}),r.jsx(q,{})]})]})};export{ae as default};
