import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as s,b as j}from"./components-DN9bEK-g.js";import{u as b}from"./NotificationContext-DQtpxZot.js";import{e as y,f as w,h as N,d as S}from"./lib-DkU1NRFm.js";import{A,C as B}from"./ContentLayout-Fl7oK8sA.js";import{B as P}from"./BusinessMenu-BPFu39Ff.js";import"./MobileNav-D7FcM9wJ.js";import"./index-BuMB8ucW.js";import"./AuthContext-Bd05mLB0.js";import"./WhiteLogo-D0_DZqmS.js";import"./HomeNav-sGChEP8Q.js";const L=({userGuid:c,businessGuid:r})=>{const[t,u]=s.useState(null),[n,f]=s.useState(!0),a=b(),[g,l]=s.useState(!1);s.useEffect(()=>{try{y(c,r).then(i=>{u(i[0].active_status),f(!1)})}catch{alert("Could not fetch business")}},[]);const d=async()=>{l(!0),a.notify(),await new Promise(o=>setTimeout(o,1e3));const i=!t;try{const o=`/api/listing/activate/${c}/${r}`,m=w.BASE_URL+o,x=await fetch(m,{method:"PUT",headers:N,body:JSON.stringify({user_guid:c,business_guid:r,active:i})});a.alertReload("Success","Completed!"),await new Promise(h=>setTimeout(h,1e3))}catch{}finally{u(i)}};return n?e.jsx("div",{children:"Loading..."}):e.jsx("div",{children:e.jsxs("div",{className:`p-6  rounded  max-w-lg
        mx-auto mt-12`,children:[e.jsxs("h2",{className:"text-lg mb-4 font-semibold",children:[t?"Deactivate":"Activate","Â Business"]}),e.jsx("div",{className:"border-[3px] border-gray-100 p-5 rounded-lg shadow",children:e.jsxs("label",{className:`flex items-center space-x-4 hover:cursor-pointer
                        `,children:[e.jsx("input",{type:"checkbox",checked:t??!1,onChange:d,className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:t?"Active":"Inactive"}),e.jsxs("div",{className:"font-normal text-sm",children:["Click to ",t?"deactivate":"activate"," the business profile. Once deactivated, it will no longer be visible"]})]})]})})]})})},J=()=>{var m;const[c,r]=s.useState(!0),[t,u]=s.useState(null),[n,f]=s.useState(""),[a,g]=s.useState(""),{business_guid:l,user_guid:d}=j(),[i,o]=s.useState(null);return s.useEffect(()=>{l&&d&&(async(x,h)=>{f(x),g(h);const p=await S(x||"");o(p)})(l,d)},[l,d]),s.useEffect(()=>{n&&a&&i&&(u({businessGuid:n,userGuid:a,businessProfile:i}),r(!1))},[n,a,i]),c?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx(A,{children:e.jsxs(B,{title:`${i.active_status?"Deactivate":"Activate"} Business Profile`,children:[e.jsx("div",{className:"font-semibold mb-2 text-md",children:(m=t==null?void 0:t.businessProfile)==null?void 0:m.title}),n&&a&&e.jsx(P,{guid:n,userGuid:a}),t&&e.jsx(L,{userGuid:a,businessGuid:n})]})})};export{J as default};
