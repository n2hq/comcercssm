import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as a,v as k,L as w,c as P}from"./components-CooaLra5.js";import{S as E}from"./SrchNavbar-CRl7kIMF.js";import{p as y,aE as b,aF as F,aG as $,ai as g,an as A,a3 as I}from"./lib-UR2i9eR1.js";import"./UserMenu-CJWpXaxL.js";import"./AuthContext-Br-zgIRh.js";import"./WhiteLogo-D7JXn1e6.js";import"./index-0-CGGdit.js";import"./json-dvSDYxkR.js";const B=()=>e.jsx("div",{className:"bg-white w-full h-auto md:rounded-t-md shadow-md overflow-hidden border",children:e.jsxs("div",{className:"bg-gray-50/30 py-3 px-4 border-b",children:[e.jsxs("div",{className:"flex place-content-between",children:[e.jsx("div",{className:"flex place-items-center gap-2",children:e.jsxs("div",{className:"-space-y-1",children:[e.jsx("div",{className:"text-black text-lg font-semibold",children:"Garsset.com"}),e.jsx("div",{className:"text-[12px] text-gray-500 italic capitalize",children:"Business Directory Service"})]})}),e.jsx("div",{className:"flex place-items-center"})]}),e.jsx("div",{className:"mt-[8px] text-[12px] text-gray-500 leading-[1.3em]",children:"The only real-time generative AI app for video chatting, live streaming, and video creation on the market."})]})}),T=()=>{const[c,l]=a.useState(!1);return a.useEffect(()=>{},[]),null},_=({listing:c})=>e.jsxs("div",{className:"leading-[1.3em] ",children:[c!=null&&c.address_one?(c==null?void 0:c.address_one)+", ":"",c!=null&&c.state_code?(c==null?void 0:c.state_name)+", ":"",c!=null&&c.country_code?c==null?void 0:c.country_code:""]});function M({rating:c}){return e.jsx("div",{className:"flex gap-[3px]",children:Array.from({length:5}).map((l,r)=>{const d=Math.max(0,Math.min(1,c-r))*100;return e.jsx("div",{className:`relative w-[17px] h-[17px] bg-white rounded-full 
                            overflow-hidden flex place-items-center border-[1px]
                            place-content-center border-gray-500`,children:e.jsx("div",{className:"absolute inset-0 bg-green-600 z-[0]",style:{width:`${d}%`}})},r)})})}const S=({listing:c,index:l})=>{var p;const[r,d]=a.useState(null),[t,s]=a.useState(""),[o,N]=a.useState(""),[i,j]=a.useState(null),[v,h]=a.useState("");return a.useEffect(()=>{r&&((r==null?void 0:r.image_url)!==""&&(r==null?void 0:r.image_url)!==null&&(r==null||r.image_url),(r==null?void 0:r.bg_image_url)!==""&&(r==null?void 0:r.bg_image_url)!==null&&(r==null?void 0:r.bg_image_url)!==void 0&&N(y.IMG_BASE_URL+(r==null?void 0:r.bg_image_url)),(r==null?void 0:r.username)!==""&&(r==null?void 0:r.username)!==null&&(r==null?void 0:r.username)!==void 0?h(r==null?void 0:r.username):h(r==null?void 0:r.gid))},[r]),a.useEffect(()=>{if(c){const x=c;d(x),console.log(x),s(y.IMG_BASE_URL+(x==null?void 0:x.image_url))}},[c]),a.useEffect(()=>{if(r!=null&&r.social_media){let x=[];const u=b(r==null?void 0:r.social_media,",");u!==null&&(u==null||u.map((m,n)=>{const f=b(m,"$"),C={mediaName:f[0],mediaHandle:f[1],baseUrl:f[2]};x.push(C)})),j(x)}},[r]),e.jsxs("div",{className:"border py-3 px-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-[90px] min-w-[90px] h-[90px] relative",children:e.jsx("img",{src:t,alt:"",className:" object-cover w-full h-full border"})}),e.jsxs("div",{className:"flex place-content-between w-full",children:[e.jsxs("div",{className:"w-full  grow block",children:[e.jsx("div",{className:"text-xl font-normal text-blue-700",children:e.jsx("a",{href:`/${v}`,children:r==null?void 0:r.title})}),e.jsx("div",{className:" mt-2 font-bold md:hidden",children:r==null?void 0:r.phone}),e.jsx("div",{className:"mt-2 md:hidden",children:e.jsx(_,{listing:r})}),(r==null?void 0:r.category)!==null&&(r==null?void 0:r.category)!==""&&e.jsx("div",{className:"text-[14px] mt-2",children:(p=F((r==null?void 0:r.category)||""))==null?void 0:p.name}),(r==null?void 0:r.average_rating)!==null&&(r==null?void 0:r.average_rating)!==""&&e.jsxs("div",{className:"mt-2 flex gap-2 place-items-center",children:[e.jsx(M,{rating:Number(r==null?void 0:r.average_rating)}),e.jsx(R,{averageRating:r==null?void 0:r.average_rating})]}),(r==null?void 0:r.website)&&e.jsx("div",{className:"mt-2",children:e.jsx("a",{href:r==null?void 0:r.website,className:"text-blue-700",children:"Website"})})]}),e.jsxs("div",{className:"w-[200px] hidden md:block ",children:[e.jsx("div",{className:" text-end font-bold",children:r==null?void 0:r.phone}),e.jsx("div",{className:" text-end ",children:e.jsx(_,{listing:r})})]})]})]}),e.jsx("div",{className:" mt-6",children:(r==null?void 0:r.short_description)&&e.jsx("div",{className:"line-clamp-2 mt-2 text-[13px]",children:r==null?void 0:r.short_description})}),e.jsx("div",{className:"mt-8 max-w-[100%] md:max-w-[50%] w-full",children:e.jsxs("div",{className:" grid grid-cols-2 gap-2 w-full",children:[e.jsx("div",{className:"w-full",children:e.jsx("button",{className:"border border-blue-400 py-[5px] rounded px-2 font-semibold w-full",children:"Go to map"})}),e.jsx("div",{children:(r==null?void 0:r.phone)&&e.jsxs("button",{className:"bg-blue-700 rounded w-full text-white flex place-items-center place-content-center text-[15px] gap-2 py-[5px]",children:[e.jsx($,{size:20,className:"mt-[2px]"}),e.jsx("span",{children:"Call"})]})})]})})]})},R=({averageRating:c})=>{const[l,r]=a.useState(0);return a.useEffect(()=>{c!=null&&r(c)},[c]),e.jsxs("div",{className:"text-blue-700 mt-[3px]",children:["(",g(Number(l)),")"]})},G=({data:c,itemsPerPage:l=10,resetPageKey:r})=>{const[d,t]=k(),s=Number(d.get("page"))||1,[o,N]=a.useState(s),i=Math.ceil(c.length/l),j=o*l,v=j-l,h=c.slice(v,j),p=m=>{N(m);const n=new URLSearchParams(d);n.set("page",String(m)),t(n)},x=()=>{o>1&&p(o-1)},u=()=>{o<i&&p(o+1)};return a.useEffect(()=>{r!==void 0&&p(1)},[r]),e.jsxs("div",{children:[e.jsx("div",{className:"space-y-6",children:h==null?void 0:h.map((m,n)=>e.jsx("div",{children:(n+1)%2?e.jsx("div",{children:e.jsx(S,{listing:m,index:n})}):e.jsxs(e.Fragment,{children:[e.jsx(S,{listing:m,index:n}),e.jsx(T,{})]})},n))}),i>1&&e.jsxs("div",{className:"flex justify-center gap-[5px] mt-[60px]",children:[e.jsx("button",{onClick:x,disabled:o===1,className:"px-[12px] py-[8px] bg-white cursor-pointer border rounded-[4px]",children:"Previous"}),Array.from({length:i},(m,n)=>n+1).map(m=>e.jsx("button",{onClick:()=>p(m),className:`px-[12px] py-[8px] cursor-pointer border rounded-[4px] ${o===m?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:m},m)),e.jsx("button",{onClick:u,disabled:o===i,className:"px-[12px] py-[8px] bg-white cursor-pointer border rounded-[4px]",children:"Next"})]})]})},q=({listing:c})=>e.jsxs("div",{children:[c==null?void 0:c.address_one,c!=null&&c.address_two?`, ${c==null?void 0:c.address_two}`:"",c!=null&&c.city_name?`, ${c==null?void 0:c.city_name}`:"",c!=null&&c.state_name?`, ${c==null?void 0:c.state_name}`:"",c!=null&&c.country_name?`, ${c==null?void 0:c.country_name}`:""]}),U=({feature:c})=>e.jsxs("div",{id:c.gid,className:"pb-4 pt-3",children:[e.jsx(w,{to:`/${c!=null&&c.username?c==null?void 0:c.username:c==null?void 0:c.gid}`,children:e.jsx("div",{className:`text-[15px] tracking-normal 
                text-blue-700 font-normal`,children:c.title})}),e.jsx("div",{className:`text-md font-semibold 
                tracking-tight mt-[2px]`,children:c.phone}),e.jsx("div",{className:`font-normal  
                tracking-normal mt-[2px] leading-[1.3em]
                text-black`,children:c.short_description.substring(0,80)}),e.jsx("div",{className:`text-[12px] font-normal 
                tracking-tight mt-[5px] leading-[1.4em]
                text-brown-700`,children:e.jsx(q,{listing:c})}),e.jsx("div",{className:` font-semibold  
                tracking-tight mt-[8px] text-blue-800`,children:e.jsx(w,{to:c.website?c.website:`#${c.gid}`,children:"Website"})})]}),z=()=>{const[c,l]=a.useState([]),[r,d]=a.useState(0);return a.useEffect(()=>{(async()=>{const s=await A();l(s)})()},[]),e.jsxs("div",{className:`border-[1px] px-4 pt-4 pb-4
        rounded-xl border-gray-200`,children:[e.jsx("div",{className:"font-bold text-lg",children:"Featured"}),e.jsx("div",{className:"divide-y divide-gray-200",children:(c==null?void 0:c.length)>0?c==null?void 0:c.map((t,s)=>s>2?null:e.jsx(U,{feature:t},s)):e.jsx("div",{className:"text-[15px] mt-4",children:"Loading..."})})]})},D=({countries:c})=>{var t;const[l,r]=a.useState(""),d=(t=c==null?void 0:c.filter(s=>s.name.toLowerCase().includes(l.toLowerCase())))==null?void 0:t.sort((s,o)=>s.name.localeCompare(o.name));return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"px-3",children:e.jsx("input",{type:"text",placeholder:"Search country...",value:l,onChange:s=>r(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsxs("div",{className:"h-[300px] overflow-y-auto scrollbar-hidden",children:[d==null?void 0:d.map((s,o)=>e.jsx("div",{children:e.jsx("a",{href:`/web/browse?q=${s==null?void 0:s.name.toLowerCase()}`,children:e.jsxs("div",{className:"flex place-content-start place-items-center gap-2 w-full hover:bg-blue-100 pl-5 py-1.5 hover:cursor-pointer",children:[e.jsx("div",{className:"w-[30px] h-[30px] flex place-content-center place-items-center bg-blue-100 rounded-full",children:s==null?void 0:s.id}),e.jsx("div",{className:"text-lg",children:s==null?void 0:s.name})]})})},o)),(d==null?void 0:d.length)===0&&e.jsx("div",{className:"px-5 text-gray-500",children:"No results found"})]})]})},O=()=>{var d,t;const[c,l]=a.useState(""),r=(t=(d=I)==null?void 0:d.filter(s=>s.name.toLowerCase().includes(c.toLowerCase())))==null?void 0:t.sort((s,o)=>s.name.localeCompare(o.name));return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"px-3",children:e.jsx("input",{type:"text",placeholder:"Search category...",value:c,onChange:s=>l(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsxs("div",{className:"h-[300px] overflow-y-auto scrollbar-hidden",children:[r==null?void 0:r.map((s,o)=>e.jsx("div",{children:e.jsx("a",{href:`/web/browse?q=${s==null?void 0:s.id}`,children:e.jsxs("div",{className:"flex place-content-start place-items-center gap-2 w-full hover:bg-blue-100 pl-5 py-1.5 hover:cursor-pointer",children:[e.jsx("div",{className:"w-[30px] h-[30px] flex place-content-center place-items-center bg-blue-100 rounded-full",children:s==null?void 0:s.icon}),e.jsx("div",{className:"text-lg",children:s==null?void 0:s.name})]})})},o)),(r==null?void 0:r.length)===0&&e.jsx("div",{className:"px-5 text-gray-500",children:"No results found"})]})]})},L=()=>{const c=P();k();const l=c.data,r=c.query,d=c.countries,[t,s]=a.useState(null);return a.useEffect(()=>{r&&s(r)},[r]),e.jsxs("div",{className:" ",children:[e.jsx(E,{}),e.jsxs("div",{className:"h-screen flex flex-col relative ",children:[e.jsx("div",{className:"mt-[120px] md:mt-[60px]"}),e.jsxs("div",{className:"grid grid-cols-12 h-full overflow-hidden  gap-5 ",children:[e.jsxs("aside",{className:"col-span-3 h-full overflow-y-auto scrollbar-hidden pt-2 hidden lg:block",children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Categories"}),e.jsx(O,{})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Countries"}),d&&e.jsx(D,{countries:d})]}),e.jsx("div",{className:" py-4 px-4 border-t",children:"Garssete - Business Directory Listing"})]}),e.jsx("div",{className:"col-span-12 lg:col-span-9  overflow-y-auto w-full md:px-[15px]",children:e.jsxs("div",{className:"grid grid-cols-12 gap-5",children:[e.jsx("div",{className:"col-span-12 md:col-span-7  pt-3",children:e.jsxs("div",{className:"space-y-8",children:[(l==null?void 0:l.length)>0?e.jsx(G,{data:l,itemsPerPage:20,resetPageKey:r}):e.jsx("div",{className:`flex place-items-center rounded
                            place-content-center p-5 border capitalize`,children:e.jsx("span",{children:"no record"})}),e.jsx(B,{})]})}),e.jsx("div",{className:"hidden md:block md:col-span-5 pt-3   ",children:e.jsx("div",{className:"w-full lg:w-[90%] sticky top-3 ml-auto",children:e.jsx(z,{})})})]})})]})]})]})};export{L as default};
