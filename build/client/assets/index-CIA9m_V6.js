import{j as a}from"./jsx-runtime-0DLF9kdB.js";import{r as c,L as w,v as N,u as y}from"./components-Bk2QJ2_x.js";import{A as P,C as S}from"./ContentLayout-BqWbHoJ2.js";import{u as _}from"./AuthContext-DZGylfWd.js";import{o as L,I,H as C,U as E}from"./lib-B3YxGgVF.js";import{C as k}from"./CardTitle-e_7rmtxE.js";import{h as A}from"./index-CS0-_5jV.js";import"./UserMenu-CZg6XGzG.js";import"./index-B5qpSsui.js";import"./WhiteLogo-xlplX3JS.js";import"./HomeNav-B8gf9OX2.js";import"./SrchNavbar-Buz0XjDf.js";import"./json-BQCmjusd.js";import"./index-B94cTHz8.js";import"./HamburgerSecondary-BuPcP53z.js";const $=({listing:e,index:t})=>{const[s,u]=c.useState("/images/placeholder-icon.webp"),[d,p]=c.useState(null);function r(x){return x%2!==0}return c.useEffect(()=>{if(e&&(e==null?void 0:e.image_url)!==null){let x=L.IMG_BASE_URL+(e==null?void 0:e.image_url);p(x)}},[e]),a.jsx("div",{className:" cursor-pointer my-0",children:a.jsxs("div",{className:`flex rounded  gap-x-2 py-2 px-1
             hover:bg-blue-50  
             ${r(t),""}
                `,children:[a.jsx("div",{className:`relative min-w-[50px] w-[50px] h-[45px]
                    rounded-md overflow-hidden border bg-transparent bg-cover bg-center`,style:{backgroundImage:`url(${s})`},children:d!==null&&a.jsx("img",{src:d,alt:e.title,className:`object-cover w-full h-full text-sm
                             `})}),a.jsx("div",{className:" w-full",children:a.jsx(w,{to:`/web/account/portfolio/${e.gid}`,children:a.jsxs("div",{className:`md:flex md:place-content-between 
                w-full md:gap-x-[4px]`,children:[a.jsxs("div",{className:"w-full md:w-[60%] -space-y-1",children:[a.jsx("div",{className:"font-bold text-[14px] text-brown-800 ",children:e.title}),a.jsx("div",{className:"font-normal text-[11.5px] flex place-items-center gap-1",children:a.jsx("div",{className:"capitalize flex place-items-center ",children:e.category})}),a.jsx("div",{className:`font-normal text-[11px] 
                                    flex place-items-center gap-1 `,children:e!=null&&e.active_status?"Active":"Inactive"})]}),a.jsxs("div",{className:`w-full lg:w-[40%] hidden 
                                sm:block`,children:[a.jsx("div",{className:"flex flex-col place-items-end place-content-end font-bold text-black tracking-tighter",children:e.phone}),a.jsxs("div",{className:`flex flex-col text-end text-[12px]
                                leading-[1.2em]`,children:[e==null?void 0:e.address_one,e!=null&&e.address_two?`, ${e==null?void 0:e.address_two}`:"",e!=null&&e.city_name?`, ${e==null?void 0:e.city_name}`:"",e!=null&&e.state_name?`, ${e==null?void 0:e.state_name}`:"",e!=null&&e.country_name?`, ${e==null?void 0:e.country_name}`:""]})]})]})})})]})})},U=({data:e,itemsPerPage:t=3,resetPageKey:s})=>{const[u,d]=N(),p=Number(u.get("page"))||1,[r,x]=c.useState(p),m=Math.ceil(e.length/t),h=r*t,b=h-t,f=e.slice(b,h),n=o=>{x(o);const l=new URLSearchParams(u);l.set("page",String(o)),d(l)},i=()=>{r>1&&n(r-1)},j=()=>{r<m&&n(r+1)};return c.useEffect(()=>{s!==void 0&&n(1)},[s]),a.jsxs("div",{children:[a.jsx("div",{className:"divide-gray-500/20 divide-y-[1px]",children:f.map((o,l)=>a.jsx("div",{children:a.jsx($,{index:l+1,listing:o})},l))}),m>1&&a.jsxs("div",{className:"flex justify-end gap-[5px] mt-[20px] text-[13px] border-t pt-6",children:[a.jsx("button",{onClick:i,disabled:r===1,className:"px-[12px] py-[6px] bg-white cursor-pointer border rounded-[4px] disabled:opacity-50",children:"Previous"}),Array.from({length:m},(o,l)=>l+1).map(o=>a.jsx("button",{onClick:()=>n(o),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${r===o?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:o},o)),a.jsx("button",{onClick:j,disabled:r===m,className:"px-[12px] py-[6px] bg-white cursor-pointer border rounded-[4px] disabled:opacity-50",children:"Next"})]})]})},g=({user:e,portfolio:t})=>a.jsx("div",{className:" h-fit",children:(t==null?void 0:t.length)>0?a.jsx(U,{data:t,itemsPerPage:7}):a.jsx("div",{className:`flex place-items-center rounded
                            place-content-center p-5 border capitalize`,children:a.jsx("span",{children:"no record"})})}),B=({query:e})=>a.jsx("form",{action:"/web/account/portfolio",className:"text-sm w-full max-w-md",children:a.jsxs("div",{className:`flex items-center bg-gray-50 rounded-full pl-4 pr-1 py-1 gap-2
            border-[1px] border-gray-500`,children:[a.jsx("input",{name:"q",defaultValue:e,type:"text",placeholder:"Business name, address, country, state...",className:"flex-grow text-gray-700 text-[12px] outline-none bg-transparent"}),a.jsx("button",{className:"bg-gray-600 w-8 h-8 flex items-center justify-center rounded-full text-white text-lg",children:a.jsx(A,{})})]})}),R=({base_url:e,title:t,q:s})=>a.jsx("div",{children:a.jsxs("div",{className:`bg-blue-100 w-full px-3 
                            flex place-content-between rounded-lg
                            place-items-center h-auto py-3 gap-[5px]
                            leading-[1.5em]`,children:[a.jsx("div",{className:"h-full",children:a.jsx(k,{baseUrl:e,guid:"",children:t})}),a.jsx("div",{className:"grow flex place-content-end",children:a.jsx(B,{query:s})})]})}),Z=()=>{c.useEffect(()=>{I(localStorage)},[]);const e=_();if(!e)return null;const{user:t}=e,[s,u]=c.useState(null),[d,p]=c.useState(null),[r,x]=c.useState(null),[m,h]=c.useState(!0),b=y(),f=new URLSearchParams(b.search),n=(f==null?void 0:f.get("q"))||"";return c.useEffect(()=>{async function i(j,o){const l=await C(j||""),v=await E(j||"",o||"");u(l),p(v)}t!=null&&t.guid&&i(t==null?void 0:t.guid,n)},[t==null?void 0:t.guid,n]),c.useEffect(()=>{s&&d&&x({userProfile:s,portfolio:d})},[s,d]),c.useEffect(()=>{r!==null&&h(!1)},[r]),m?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("div",{className:"text-lg",children:"Loading..."})}):a.jsx(P,{children:a.jsxs(S,{title:"My Portfolio",children:[s===null?"Loading...":"",a.jsx(R,{base_url:"/web/account/portfolio",title:"Portfolio",q:n}),a.jsx("div",{className:"flex place-items-center place-content-center mt-3"}),a.jsx("div",{className:"mt-[20px]"}),r!==null&&a.jsx(g,{user:r.userProfile,portfolio:r.portfolio})]})})};export{Z as default};
