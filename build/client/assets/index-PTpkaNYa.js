import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as l,L as P,d as g,b as S}from"./components-CCwaTRgT.js";import{A as _}from"./AccountLayout-zLF_nnCh.js";import{u as k}from"./AuthContext-C7k3lHjW.js";import{x as L,r as $,aj as I,I as E,aa as A,j as C,ak as B}from"./lib-d5lyMBXU.js";import{B as M}from"./BusinessMenu-lxtqnmPk.js";import"./UserMenu-BJva0xcL.js";import"./WhiteLogo-hx6VZQD6.js";import"./index-oI16Z90E.js";import"./HomeNav-CVNWGNT6.js";import"./SrchNavbar-BmbhUp-t.js";import"./HamburgerSecondary-BkHc2D4C.js";const R=({listing:t,index:a})=>{const[s,m]=l.useState("/images/placeholder-icon.webp"),[x,i]=l.useState("");function r(u){return u%2!==0}return l.useEffect(()=>{if(t&&(t==null?void 0:t.image_url)!==null){let u=L.IMG_BASE_URL+(t==null?void 0:t.image_url);i(u)}else i(s)},[t]),e.jsx("div",{className:" cursor-pointer my-0",children:e.jsxs("div",{className:`flex rounded  gap-x-2 py-2 px-1
             hover:bg-blue-50  
             ${r(a),""}
                `,children:[e.jsx("div",{className:`relative min-w-[46px] w-[46px] h-[45px]
                    rounded-md overflow-hidden border bg-transparent bg-cover bg-center`,style:{backgroundImage:`url(${s})`},children:x!==null&&e.jsx("img",{src:x,alt:t.title,className:`object-cover w-full h-full text-sm bg-white
                             `})}),e.jsx("div",{className:" w-full",children:e.jsx(P,{to:`/web/account/portfolio/${t.gid}`,children:e.jsxs("div",{className:`md:flex md:place-content-between 
                w-full md:gap-x-[4px]`,children:[e.jsxs("div",{className:"w-full md:w-[60%] -space-y-1 block",children:[e.jsx("div",{className:"font-bold text-[14px] text-brown-800 line-clamp-1",children:t.title}),e.jsx("div",{className:"font-normal text-[11.5px] flex place-items-center gap-1",children:e.jsx("div",{className:"capitalize flex place-items-center ",children:t.category})}),e.jsx("div",{className:`font-normal text-[11px] 
                                    flex place-items-center gap-1 `,children:t!=null&&t.active_status?"Active":"Inactive"})]}),e.jsxs("div",{className:`w-full lg:w-[40%] hidden 
                                sm:block`,children:[e.jsx("div",{className:"flex flex-col place-items-end place-content-end font-bold text-black tracking-tighter",children:t.phone}),e.jsxs("div",{className:`flex flex-col text-end text-[12px]
                                leading-[1.2em]`,children:[t==null?void 0:t.address_one,t!=null&&t.address_two?`, ${t==null?void 0:t.address_two}`:"",t!=null&&t.city_name?`, ${t==null?void 0:t.city_name}`:"",t!=null&&t.state_name?`, ${t==null?void 0:t.state_name}`:"",t!=null&&t.country_name?`, ${t==null?void 0:t.country_name}`:""]})]})]})})})]})})},U=({data:t,itemsPerPage:a=3,resetPageKey:s})=>{const[m,x]=g(),i=Number(m.get("page"))||1,[r,u]=l.useState(i),c=Math.ceil(t.length/a),b=r*a,N=b-a,h=t.slice(N,b),d=o=>{u(o);const p=new URLSearchParams(m);p.set("page",String(o)),x(p)},j=()=>{r>1&&d(r-1)},f=()=>{r<c&&d(r+1)};l.useEffect(()=>{s!==void 0&&d(1)},[s]);const v=()=>{if(c<=3)return Array.from({length:c},(n,y)=>y+1).map(n=>e.jsx("button",{onClick:()=>d(n),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${r===n?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:n},n));const o=[];r>2&&(o.push(e.jsx("button",{onClick:()=>d(1),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${r===1?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:"1"},1)),r>3&&o.push(e.jsx("span",{className:"px-2",children:"…"},"start-ellipsis")));const p=Math.max(1,r-1),w=Math.min(c,r+1);for(let n=p;n<=w;n++)o.push(e.jsx("button",{onClick:()=>d(n),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${r===n?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:n},n));return r<c-1&&(r<c-2&&o.push(e.jsx("span",{className:"px-2",children:"…"},"end-ellipsis")),o.push(e.jsx("button",{onClick:()=>d(c),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${r===c?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:c},c))),o};return e.jsxs("div",{children:[e.jsx("div",{className:"divide-gray-500/20 divide-y-[1px]",children:h.map((o,p)=>e.jsx("div",{children:e.jsx(R,{index:p+1,listing:o})},p))}),c>1&&e.jsxs("div",{className:"flex justify-center gap-[5px] mt-[20px] text-[13px] border-t pt-6",children:[e.jsx("button",{onClick:j,disabled:r===1,className:"px-[12px] py-[6px] bg-white cursor-pointer border rounded-[4px] disabled:opacity-50",children:"Previous"}),v(),e.jsx("button",{onClick:f,disabled:r===c,className:"px-[12px] py-[6px] bg-white cursor-pointer border rounded-[4px] disabled:opacity-50",children:"Next"})]})]})},q=({user:t,portfolio:a})=>e.jsx("div",{className:" h-fit",children:(a==null?void 0:a.length)>0?e.jsx(U,{data:a,itemsPerPage:7}):e.jsx("div",{className:`flex place-items-center rounded
                            place-content-center p-5 border capitalize`,children:e.jsx("span",{children:"no record"})})}),G=({query:t})=>e.jsx("form",{action:"/web/account/portfolio",className:"text-sm w-full max-w-md",children:e.jsxs("div",{className:`flex items-center bg-gray-50 rounded-full pl-4 pr-1 py-1 gap-2
            border-[1px] border-gray-500`,children:[e.jsx("input",{name:"q",defaultValue:t,type:"text",placeholder:"Business name, address, country, state...",className:"flex-grow text-gray-700 text-[12px] outline-none bg-transparent"}),e.jsx("button",{className:"bg-gray-600 w-8 h-8 flex items-center justify-center rounded-full text-white text-lg",children:e.jsx($,{})})]})}),z=({base_url:t,title:a,q:s})=>e.jsx("div",{children:e.jsxs("div",{className:`bg-blue-100 w-full px-3 
                            flex place-content-between rounded-lg
                            place-items-center h-auto py-3 gap-[5px]
                            leading-[1.5em]`,children:[e.jsx("div",{className:"h-full",children:e.jsxs("div",{className:"flex items-center text-blue-800 text-[18px] font-poppins tracking-tight font-bold ",children:[e.jsx(I,{className:"mr-1 flex-shrink-0",size:25}),e.jsx("span",{className:"line-clamp-1 overflow-hidden",children:a})]})}),e.jsx("div",{className:"grow flex place-content-end",children:e.jsx(G,{query:s})})]})}),O=({children:t,businessGuid:a,data:s,businessProfile:m,title:x})=>e.jsx("div",{children:e.jsxs("div",{className:`mt-4 bg-white 
                rounded-lg shadow-md pb-8 `,children:[e.jsxs("div",{className:"font-semibold text-[17px] border-b-[1px] p-3 flex place-content-between place-items-center",children:[e.jsx("div",{children:x}),e.jsx("div",{className:"text-[13px] flex place-items-center gap-2",children:e.jsx("a",{href:"/web/account/portfolio",className:"border py-[5px] px-[10px] rounded-full bg-blue-50",children:"Portfolio Home"})})]}),e.jsxs("div",{className:"px-[15px]  pt-4 ",children:[e.jsx("div",{className:"w-full flex place-content-end",children:a&&s.userGuid&&e.jsx(M,{guid:a,userGuid:s.userGuid})}),t,e.jsx("div",{className:"h-[40px]"})]})]})}),ee=()=>{l.useEffect(()=>{E(localStorage)},[]);const t=k();if(!t)return null;const{user:a}=t,[s,m]=l.useState(null),[x,i]=l.useState(null),[r,u]=l.useState(null),[c,b]=l.useState(!0),N=S(),h=new URLSearchParams(N.search),d=(h==null?void 0:h.get("q"))||"";return l.useEffect(()=>{async function j(f,v){const o=await C(f||""),p=await B(f||"",v||"");m(o),i(p)}try{a!=null&&a.guid&&j(a==null?void 0:a.guid,d)}catch(f){console.log(f.message)}},[a==null?void 0:a.guid,d]),l.useEffect(()=>{s&&x&&u({userProfile:s,portfolio:x})},[s,x]),l.useEffect(()=>{r!==null&&b(!1)},[r]),c?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsx(_,{children:e.jsxs(O,{title:"My Portfolio",children:[s===null?"Loading...":"",e.jsx(z,{base_url:"/web/account/portfolio",title:`${A(r.portfolio.length)} Pages`,q:d}),e.jsx("div",{className:"flex place-items-center place-content-center mt-3"}),e.jsx("div",{className:"mt-[20px]"}),r!==null&&e.jsx(q,{user:r.userProfile,portfolio:r.portfolio})]})})};export{ee as default};
